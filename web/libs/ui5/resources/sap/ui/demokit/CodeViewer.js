/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','sap/ui/commons/Button','sap/ui/commons/Dialog','sap/ui/core/Control','./library',"./CodeViewerRenderer",'jquery.sap.keycodes'],function(q,B,D,C,l,a){"use strict";var b=C.extend("sap.ui.demokit.CodeViewer",{metadata:{library:"sap.ui.demokit",properties:{source:{type:"string",group:"Misc",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null},editable:{type:"boolean",group:"Misc",defaultValue:false},lineNumbering:{type:"boolean",group:"Misc",defaultValue:false},visible:{type:"boolean",group:"Misc",defaultValue:true}},events:{press:{},save:{}}}});b.load=function(){if(!window.prettyPrint){q.sap.require("sap.ui.demokit.js.google-code-prettify.prettify");}};b.load();b.prototype.onAfterRendering=function(){var d=this.getDomRef();if(!this.getEditable()&&d&&d.className.indexOf("prettyprint")!==-1&&window.prettyPrint){prettyPrint();d.className='sapUiCodeViewer sapUiCodeViewerRO '+(this.aCustomStyleClasses||[]).join(' ');}};b.prototype.onclick=function(o){if(!this.getEditable()){this.firePress({id:this.getId()});o.preventDefault();o.stopPropagation();}};b.prototype.onsapescape=function(){if(this.getEditable()){this.setEditable(false);}};b.prototype.onkeydown=function(e){if(this.getEditable()&&((e.keyCode==q.sap.KeyCodes.S&&e.ctrlKey&&!e.shiftKey&&!e.altKey)||(e.keyCode==q.sap.KeyCodes.F2))){e.preventDefault();e.stopPropagation();this.fireSave();}};b.prototype.getCurrentSource=(function(){var S=/<(\/?[^ >]+)[^>]*>|(&[^;]+;)/g,T={"/p":"\n","br":"\n","div":"\n"},E={"&nbsp;":" ","&lt;":"<","&gt;":">","&amp;":"&"};return function(){var c='',d=this.getDomRef();if(d){c=d.innerHTML;c=c.replace(S,function(m,e,f){if(e){e=e.toLowerCase();if(T[e]){return T[e];}}else if(f){f=f.toLowerCase();if(E[f]){return E[f];}}return"";});}return c;};})();b.showScript=function(i){var d=document.getElementById(i);var s=d.innerHTML;if(!d||!s){return;}var c=new B({text:"Close",press:function(){o.close();}});var o=new D({applyContentPadding:false,title:"Source Code for '"+i+"'",resizable:true,minWidth:"400px",minHeight:"200px",buttons:[c],content:new b({source:s,press:function(){q.sap.log.info('clicked into code viewer');}}),defaultButton:c});o.center();o.open();};return b;});
