<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="abstract" content="OPA5 has a built-in actions parameter that can be used for simulating events. If you use an action, OPA5 will make sure that the UI is in a state that allows the action to be executed."/>
<meta name="description" content="OPA5 has a built-in actions parameter that can be used for simulating events. If you use an action, OPA5 will make sure that the UI is in a state that allows the action to be executed."/>

<link rel="stylesheet" type="text/css" href="css/prettify.css?x=5354871026452793"/>
<link rel="stylesheet" type="text/css" href="css/documentation.css?x=5354871026452793"/>
<title>Simulating User Interactions on Controls</title>
  <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/themes/base/highlight-query-terms.css" />
    <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/js/google-code-prettify/prettify.css" />
    <script src="../../resources/sap/ui/demokit/js/sdk-pagehelper.js"></script>
  </head>
<body class="" id="loio8615a0b9088645ae936dbb8bbce5d01d">
<div id="wrapper"><div id="container">

	<h1 class="title topictitle1">Simulating User Interactions on Controls</h1>

	
	<div class="body conbody"><p class="shortdesc">OPA5 has a built-in actions parameter that can be used for simulating events. If you use
		an action, OPA5 will make sure that the UI is in a state that allows the action to be
		executed.</p>

		<p class="p">We recommend that you use actions and not success functions for user interactions as using
            success functions will not execute the checks on the UI.</p>

		<div class="section"><div class="section_title">Simulating a Press Event</div><div type="Simulating a Press Event">
			
			<p class="p">Use the press action for <samp class="ph codeph">sap.m.Button</samp> controls or to select any kind
				of <samp class="ph codeph">sap.m</samp> list item, such as a
				<samp class="ph codeph">StandardListItem</samp>.</p>

			<p class="p">Here's an example showing how to trigger a <samp class="ph codeph">press</samp> event on a button using the
                OPA5 <samp class="ph codeph">waitFor</samp> function and the press action:</p>

			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-js">sap.ui.require(["sap/ui/test/opaQUnit", "sap/ui/test/actions/Press"], function (opaTest, Press) {

    opaTest("Should trigger a press event", function (Given, When, Then) {
        // Startup the application using Given

        When.waitFor({
            id: "myButton",
            actions: new Press()
        });

        // Assert what happened after pressing using Then

    });

});</pre></div>

		</div></div>

		<div class="section"><div class="section_title">Choosing an Item from sap.m.Select</div><div type="Choosing an Item from sap.m.Select">
			
			<p class="p">Here's an example showing how to choose an item from <samp class="ph codeph">sap.m.Select</samp> or
                    <samp class="ph codeph">sap.m.ComboBox</samp>, using the <samp class="ph codeph">waitFor</samp> function of
                OPA5, and the <samp class="ph codeph">Press</samp> action:</p>

			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-js">sap.ui.require([
    "sap/ui/test/opaQUnit",
    "sap/ui/test/actions/Press",
    "sap/ui/test/matchers/Properties",
    "sap/ui/test/matchers/Ancestor"
],  function (opaTest, Press, Properties, Ancestor) {

    opaTest("Should trigger a press event", function (Given, When, Then) {
        // Startup the application using Given

        When.waitFor({
            id: "mySelect",
            actions: new Press(),
            success: function(oSelect) {
                this.waitFor({
                    controlType: "sap.ui.core.Item",
                    matchers: [
                        new Ancestor(oSelect),
                        new Properties({ key: "Germany"})
                    ],
                    actions: new Press(),
                    errorMessage: "Cannot select Germany from mySelect"
                });
            },
            errorMessage: "Could not find mySelect"
        });

        // Assert what happened after pressing using Then

    });

});</pre></div>

		</div></div>

		<div class="section"><div class="section_title">Entering Text into Input Fields</div><div type="Entering Text into Input Fields">
			
			<p class="p">If you want to enter text into fields within a form, OPA contains an
					<samp class="ph codeph">EnterText</samp> action which you can use to enter texts or
					<samp class="ph codeph">sap.m.Tokens</samp> into <samp class="ph codeph">sap.m.Input</samp>,
					<samp class="ph codeph">sap.m.MultiInput</samp>, <samp class="ph codeph">sap.m.SearchField</samp>, or
					<samp class="ph codeph">sap.m.TextArea</samp>.</p>

			<p class="p">In the following example, the text of an input will be changed twice. First, the user types
                    <kbd class="ph userinput">Hello</kbd>. The text will be set as a value of the input. In
                the second action, the user types <kbd class="ph userinput">World</kbd> - the resulting text
                in the input will be <samp class="ph systemoutput">Hello World</samp>. This means you can
                use multiple actions on one control. You may also mix built-in actions with custom
                actions.</p>

			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-js">sap.ui.require(["sap/ui/test/opaQUnit", "sap/ui/test/actions/EnterText"], function (opaTest, EnterText) {

    opaTest("Should trigger a press event", function (Given, When, Then) {
        // Startup the application using Given

        When.waitFor({
            id: "myInput",
            // If you want you can provide multiple actions
            actions: [new EnterText({ text: "Hello " }), new EnterText({ text: " World" })
        });

        // Assert what happened after pressing using Then
    });

});</pre></div>

		</div></div>

		<div class="section" id="loio8615a0b9088645ae936dbb8bbce5d01d__section_tmf_bpm_2cb"><div class="section_title">Table Interaction</div><div type="Table Interaction">
			
			<p class="p">A Table consists of columns (<samp class="ph codeph">sap.m.Column</samp>) and rows. The rows,
				defined as <samp class="ph codeph">sap.m.ColumnListItems</samp>, consist of cells. In order to
				utilize a stable locator which is not expected to change frequently, you can use a
				field/value combination to retrieve and interact with table items.</p>

			<p class="p">The following example simulates a click on an item in a table. The name of the field
				can be found in the $metadata file of your odata-service.</p>

			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">iClickOnTableItemByFieldValue: function () {
                    return this.waitFor({
                        controlType: "sap.m.ColumnListItem",

                        // Retrieve all list items in the table
                        matchers: [function(oCandidateListItem) {
                            var oTableLine = {};
                            oTableLine = oCandidateListItem.getBindingContext().getObject();
                            var sFound = false;

                            // Iterate through the list items until the specified cell is found
                            for (var sName in oTableLine) {
                                if ((sName === "Field Name") &amp;&amp; (oTableLine[sName].toString() === "Cell Value")) {
                                     QUnit.ok(true, "Cell has been found");
                                    sFound = true;
                                    break;
                                }
                            }
                            return sFound;
                        }],

                        // Click on the specified item
                        actions: new Press(),
                        errorMessage: "Cell could not be found in the table"
                     });
                }</pre></div>

		</div></div>

		<div class="section"><div class="section_title">Writing Your Own Action</div><div type="Writing Your Own Action">
			
			<p class="p">Since OPA5 uses JavaScript for its execution, you cannot use native browser events to simulate
				user events. Sometimes it's also hard to know the exact position where to click or
				enter your keystrokes since <span class="ph"><span class="ph pname">OpenUI5</span></span> controls don't
				have a common interface for that. If you find you're missing a certain built-in
				action, you can create your own actions very easily. Just provide an inline function
				as shown here:</p>

			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-js">sap.ui.require(["sap/ui/test/opaQUnit", "sap/ui/test/matchers/Properties"], function (opaTest, Properties) {

    opaTest("Should simulate press on the delete button", function (Given, When, Then) {
        // Startup the application using Given

        When.waitFor({
            id : "entryList",
            matchers : new Properties({ mode : "Delete"}),
            actions: function (oList) {
                oList.fireDelete({listItem : oList.getItems()[0]});
            },
            errorMessage : "The delete button could not be pressed"
        });

        // Assert what happened after selecting the item using Then

    });

});</pre></div>

		</div></div>

	</div>

    <div class="related-links"> 
<div class="relinfo"><div class="relinfotitle ">Related Information</div>
<div><a class="link" href="../../docs/api/symbols/sap.ui.test.matchers.Interactable.html" alt="../../docs/api/symbols/sap.ui.test.matchers.Interactable.html" title="../../docs/api/symbols/sap.ui.test.matchers.Interactable.html">API Reference: <samp class="ph codeph">sap.ui.test.matchers.Interactable</samp></a></div>
<div><a class="link" href="../../docs/api/symbols/sap.ui.test.actions.html" alt="../../docs/api/symbols/sap.ui.test.actions.html" title="../../docs/api/symbols/sap.ui.test.actions.html">API Reference: <samp class="ph codeph">sap.ui.test.actions</samp></a></div>
<div><a class="link" href="../../docs/api/symbols/sap.ui.test.actions.Press.html" alt="../../docs/api/symbols/sap.ui.test.actions.Press.html" title="../../docs/api/symbols/sap.ui.test.actions.Press.html">API Reference: <samp class="ph codeph">sap.ui.test.actions.Press</samp></a></div>
</div>
</div>
</div></div>

</body>
</html>