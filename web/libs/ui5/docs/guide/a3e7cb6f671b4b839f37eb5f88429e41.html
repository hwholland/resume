<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="abstract" content="Our OData service provides one OData operation: the ResetDataSource action. In this step, we add a button that resets all data changes we made during the tutorial to their original state using this action."/>
<meta name="description" content="Our OData service provides one OData operation: the ResetDataSource action. In this step, we add a button that resets all data changes we made during the tutorial to their original state using this action."/>

<link rel="stylesheet" type="text/css" href="css/prettify.css?x=2956660006226356"/>
<link rel="stylesheet" type="text/css" href="css/documentation.css?x=2956660006226356"/>
<title>Step 8: OData Operations</title>
  <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/themes/base/highlight-query-terms.css" />
    <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/js/google-code-prettify/prettify.css" />
    <script src="../../resources/sap/ui/demokit/js/sdk-pagehelper.js"></script>
  </head>
<body class="" id="loioa3e7cb6f671b4b839f37eb5f88429e41">
<div id="wrapper"><div id="container">

	<h1 class="title topictitle1">Step 8: OData Operations</h1>

	
	<div class="body conbody"><p class="shortdesc">Our OData service provides one OData operation: the <samp class="ph codeph">ResetDataSource</samp>
		action. In this step, we add a button that resets all data changes we made during the
		tutorial to their original state using this action.</p>

		<div class="section" id="loioa3e7cb6f671b4b839f37eb5f88429e41__section_bt4_fxc_z1b"><div class="section_title">Preview</div><div type="Preview">
			<div class="fig fignone" id="loioa3e7cb6f671b4b839f37eb5f88429e41__fig_ybl_pdx_4cb"><div class="figcontainer">
				
				<img class="image" id="loioa3e7cb6f671b4b839f37eb5f88429e41__image_dsw_pdx_4cb" src="loioe518debe1cdc4fcd9f5a6cffd014fbfa_LowRes.png"/>
			<div class="figcap">A <span class="ph uicontrol">Restart Tutorial</span> button is added</div></div></div>
</div></div>

		<div class="section" id="loioa3e7cb6f671b4b839f37eb5f88429e41__section_tsr_gxc_z1b"><div class="section_title">Coding</div><div type="Coding"><p class="p">You can view and download all files <span class="ph">at <a class="xref" target="_blank" href="../../explored.html#/sample/sap.ui.core.tutorial.odatav4.08/preview" alt="../../explored.html#/sample/sap.ui.core.tutorial.odatav4.08/preview" title="../../explored.html#/sample/sap.ui.core.tutorial.odatav4.08/preview">OData V4 - Step 8</a></span>.</p>
</div></div>

		<div class="section" id="loioa3e7cb6f671b4b839f37eb5f88429e41__section_pvc_fyc_z1b"><div class="section_title">webapp/controller/App.controller.js</div><div type="webapp/controller/App.controller.js">
			
			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-js">...
		onResetChanges : function () {
			this.byId("peopleList").getBinding("items").resetChanges();
			this._setUIChanges();
		},

		<span class="ph emphasis emphasis">onResetDataSource : function () {
			var oModel = this.getView().getModel(),
				oOperation = oModel.bindContext("/ResetDataSource(...)");

			oOperation.execute().then(function () {
					oModel.refresh();
					MessageToast.show(this._getText("sourceResetSuccessMessage"));
				}.bind(this), function (oError) {
					MessageBox.error(oError.message);
				}
			);
		},</span>

		onSave : function () {
...
</pre></div>

			<p class="p">The <samp class="ph codeph">onResetDataSource</samp> event handler calls the
					<samp class="ph codeph">ResetDataSource</samp> action, which is an action of the
					<span class="ph uicontrol">TripPin</span> OData service that resets the data of the service
				to its original state.</p>

			<p class="p">We call that action by first creating a deferred operation binding on the model. The
					<samp class="ph codeph">(â€¦)</samp> part of the binding syntax marks the binding as deferred.
				We use a deferred binding because we want to control when the action is executed.
				Since it is deferred, we need to explicitly call its <samp class="ph codeph">execute</samp>
				method.</p>

			<p class="p">The execution is asynchronous, therefore the execute method returns a
					<samp class="ph codeph">Promise</samp>. We attach simple success and error handlers to that
					<samp class="ph codeph">Promise</samp> by calling its <samp class="ph codeph">then</samp> method.</p>

			<div class="note note"><span class="notetitle">Note</span> 
				<p class="p">Many of the methods in the OData V4 API of <span class="ph"><span class="ph pname">OpenUI5</span></span> return a
						<samp class="ph codeph">Promise</samp> to manage asynchronous processing</p>

			</div>

		</div></div>

		<div class="section" id="loioa3e7cb6f671b4b839f37eb5f88429e41__section_pp2_mxc_z1b"><div class="section_title">webapp/view/App.view.xml</div><div type="webapp/view/App.view.xml"><div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">&lt;mvc:View
	controllerName="sap.ui.core.tutorial.odatav4.controller.App"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	displayBlock="true"&gt;
	&lt;App busy="{appView&gt;/busy}" class="sapUiSizeCompact"&gt;
		&lt;pages&gt;
			&lt;Page title="{i18n&gt;peoplePageTitle}"&gt;
				<span class="ph emphasis emphasis">&lt;headerContent&gt;
					&lt;Button
						id="resetChangesButton"
						text="{i18n&gt;resetChangesButtonText}"
						enabled="{= !${appView&gt;/hasUIChanges}}"
						press="onResetDataSource"
						type="Emphasized"&gt;
					&lt;/Button&gt;
				&lt;/headerContent&gt;</span>
...</pre></div>
<p class="p">We add the <span class="ph emphasis emphasis">headerContent</span> aggregation to the <span class="ph emphasis emphasis">Page</span> and
				insert the new <span class="ph emphasis emphasis">Button</span>. We add the
					<span class="ph emphasis emphasis">onResetDataSource</span>  event handler to the
					<span class="ph emphasis emphasis">press</span> event.</p>
</div></div>

		<div class="section" id="loioa3e7cb6f671b4b839f37eb5f88429e41__section_kl4_d1x_4cb"><div class="section_title">webapp/i18n/i18n.properties</div><div type="webapp/i18n/i18n.properties">
			
			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-prefs">...
# Toolbar
...
<span class="ph emphasis emphasis">#XBUT: Button text for reset changes
resetChangesButtonText=Restart Tutorial</span>
...
# Messages
...
<span class="ph emphasis emphasis">#XMSG: Message for changes reverted
sourceResetSuccessMessage=All changes reverted back to start</span></pre></div>

			<p class="p">We add the missing texts to the properties file.</p>

		</div></div>

		<div class="section" id="loioa3e7cb6f671b4b839f37eb5f88429e41__section_rtl_jnx_pcb">And now we are done! We built a simple application with user
			data from an OData V4 service. We can display, edit, create, and delete users. And we
			use OData V4 features such as batch groups and automatic type detection.</div>

	</div>

	<div class="related-links"> 

<div class="familylinks">
<div class="parentlink"><br/>
<strong>Parent topic: </strong><a class="link" href="bcdbde6911bd4fc68fd435cf8e306ed0.html" title="In this tutorial, we explore how features of OData V4 can be used in OpenUI5. We write a small app that consumes data from an OData V4 service to understand how to access, modify, aggregate, and filter data in an OData V4 model.">OData V4</a><br/>
</div>
<div class="previouslink"><br/>
<strong>Previous: </strong><a class="link" href="12a0d1ef150a42ef81e9f07fe6407018.html" title="In this step, we make it possible to delete user data.">Step 7: Delete</a><br/>
</div>
</div>
<div class="relinfo"><div class="relinfotitle ">Related Information</div>
<div><a class="link" href="54e0ddf695af4a6c978472cecb01c64d.html" title="Bindings connect OpenUI5 view elements to model data, allowing changes in the model to be reflected in the view element and vice versa.">Bindings</a></div>
<div><a class="link" href="b54f7895b7594c61a83fa7257fa9d13f.html" title="The OData V4 model supports OData operations (ActionImport, FunctionImport, bound Actions and bound Functions). Unbound parameters are limited to primitive values.">OData Operations</a></div>
</div>
</div>
</div></div>

</body>
</html>