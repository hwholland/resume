<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Request Fails Due to Same-Origin Policy (Cross-Origin Resource Sharing (CORS))</title>
      <link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon">
      <link rel="shortcut icon" href="themes/sap-default/img/favicon.ico">
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"c34413d7554a4ae7b2aba6bcca92aac8.html","previousTopicHref":"492d9d93effd4229a5a89cb20124553c.html"}</script>
      <link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css">
      <script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script>
      <script type="text/javascript" src="toc-info.js"></script>
      <script type="text/javascript" src="themes/sap-default/js/script.js"></script>
      
      		<!--[if lt IE 9]>
      			<script>
      			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
      			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
      			    "progress,section,time,video").split(',');
      			  for (var i = 0; i < e.length; i++) {
      			    document.createElement(e[i]);
      			  }
      			</script>
      		<![endif]-->
      
      <script>
      function addLoadEvent(func) {
      var oldonload = window.onload;
      if (typeof window.onload != 'function') {
      window.onload = func;
      } else {
      window.onload = function() {
      if (oldonload) {
      oldonload();
      }
      func();
      }
      }
      }
      
      addLoadEvent(function() { prettyPrint();
      if ($('#local-navigation').length) {
      $('#local-navigation').navigation();
      }
      
      
      });
      
      </script>
      <script type="text/javascript" src="js/prettify.js"> </script>
      <script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script>
      
      <link type="text/css" rel="stylesheet" href="css/overrides.css"></head>
   <body class="en-us sap-default centered navigation-default enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;">
      <div id="d4h5-main-container" class="container_12" role="application">
         <ul id="page-links" class="hidden">
            <li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li>
            <li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li>
            <li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li>
         </ul>
         
         
         <div id="d4h5-section-container" class="grid_12" style="padding-top: 0;">
            
            
            
            <div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;">
               <section>
                  <div id="content-toolbar" class="toolbar hide-for-small"></div>
                  <div class="page concept  - topic-topic concept-concept " id="loio5bb388fc289d44dca886c8fa25da466e">
                     
                     <h1 class="title topictitle1" hidden>Request Fails Due to Same-Origin Policy (Cross-Origin Resource Sharing (CORS))</h1>
                     
                     <div class="body conbody">
                        		
                        <p class="p">If you use a remote URL in your code, for example a remote OData service, such as the publicly available Northwind OData service,
                           the browser may refuse to connect to a remote URL. Due to the same-origin policy, browsers deny AJAX requests to service endpoints
                           if the domain/subdomain, protocol, or port differ from the app&#x2019;s domain/subdomain, protocol, or port.
                        </p>
                        
                        		
                        <div class="section" id="loio5bb388fc289d44dca886c8fa25da466e__section_a3s_mvw_p1b">
                           <section class="section" type="Preview">
                              <h2 class="section_title" style="font-size: 1.15em;">Preview</h2>
                              			
                              			
                              <div xmlns="http://www.w3.org/1999/xhtml" class="fig fignone" id="loio5bb388fc289d44dca886c8fa25da466e__fig_jyf_f1k_c5">
                                 <div class="figbody">
                                    				
                                    				<img xmlns="" class="inline  " id="loio5bb388fc289d44dca886c8fa25da466e__image_lmw_d1k_c5" src="loio2c36d72282e34903a97197783fe92122_HiRes.png">
                                    			
                                 </div><span class="figcap">Violations of the same-origin policy in Google Chrome</span></div>
                              
                              		
                           </section>
                        </div>
                        
                        		
                        <div class="section" id="loio5bb388fc289d44dca886c8fa25da466e__section_q5w_mvw_p1b">
                           <section class="section" type="Root Cause">
                              <h2 class="section_title" style="font-size: 1.15em;">Root Cause</h2>
                              			
                              			
                              <p class="p">Normally, the remote system would be configured to send the cross-origin resource sharing (CORS) headers to make the browser
                                 also allow direct access to remote URLs. However, if you, for example, use a Northwind OData service, you cannot modify the
                                 publicly available service. Then when you try to execute XHR requests (<samp class="ph codeph">XMLHttpRequest</samp>) the browser prevents the call due to the same-origin policy.
                              </p>
                              
                              		
                           </section>
                        </div>
                        
                        		
                        <div class="section" id="loio5bb388fc289d44dca886c8fa25da466e__section_v4n_mvw_p1b">
                           <section class="section" type="Resolution">
                              <h2 class="section_title" style="font-size: 1.15em;">Resolution</h2>
                              <div class="p">To solve the issue, you have the following options:
                                 <ul class="ul" id="loio5bb388fc289d44dca886c8fa25da466e__ul_hgq_4dk_c5">
                                    <li class="li">
                                       <p class="p">Deploy the app on the same server or domain as the service that you want to call, so that both
                                          							resources are in the same origin (if possible)
                                       </p>
                                       
                                    </li>
                                    
                                    <li class="li">
                                       <p class="p">Set the CORS-relevant response headers on the remote system (if possible)</p>
                                       
                                    </li>
                                    
                                    <li class="li">
                                       <p class="p">Disable the same-origin policy in the browser for local testing</p>
                                       
                                       <p class="p">In Google Chrome, you can easily disable the same-origin policy of Chrome by running Chrome with
                                          							the following command:
                                          								<samp class="ph codeph">[your-path-to-chrome-installation-dir]\chrome.exe
                                             								--disable-web-security --user-data-dir</samp>. Make sure that all
                                          							instances of Chrome are closed before you run the command. This allows
                                          							all web sites to break out of the same-origin policy and connect to the
                                          							remote service directly. 
                                       </p>
                                       
                                       <aside class="note caution insertion"><span class="title">Caution</span> 
                                          <p class="p"><span class="ph emphasis emphasis">This approach is not recommended for productive apps. Running Chrome this way for surfing on the internet poses a security
                                                risk.</span> However, it allows you to avoid the need of setting up a proxy at development time or for testing purposes.
                                          </p>
                                          
                                       </aside>
                                       
                                    </li>
                                    
                                    <li class="li">
                                       <p class="p">Use a helper service from the same domain of your app as a proxy to call the real remote service as described below</p>
                                       
                                    </li>
                                    
                                 </ul>
                                 
                              </div>
                              
                              <div xmlns="http://www.w3.org/1999/xhtml" class="sectiondiv subsection">
                                 <p xmlns="" class="p subsectiontitle">Using a Helper Service as a Proxy</p>
                                 
                                 <p xmlns="" class="p">A proxy is simply a service end point on the same domain of your app to overcome the restrictions. It receives requests from
                                    the app, forwards them to another server, and finally returns the corresponding response from the remote service.
                                 </p>
                                 
                                 <p xmlns="" class="p"><span class="ph pname">SAP Web IDE</span> and the <span class="ph pname">SAP Cloud Platform</span> offer destinations that allow you to easily connect to remote systems. The destination to the Northwind OData service is
                                    an internet proxy made available inside the app at <span class="ph filepath">&lt;protocol&gt;://&lt;domain&gt;/destinations/northwind/*</span>. Any request that is sent to this location is forwarded to <span class="ph filepath">http://services.odata.org</span> automatically. 
                                 </p>
                                 
                                 
                                 <div xmlns="" class="table-wrapper tablenoborder">
                                    <table summary="" id="loio5bb388fc289d44dca886c8fa25da466e__table_dfw_f2k_c5" class="table" frame="border" border="1" rules="all">
                                       
                                       <colgroup>
                                          <col width="50%">
                                          <col width="50%">
                                       </colgroup>
                                       
                                       <thead class="thead" align="left">
                                          <tr class="row">
                                             <th class="entry" valign="top" width="50%" id="d295821e91">
                                                <p class="p">Requested URL</p>
                                                
                                             </th>
                                             
                                             <th class="entry" valign="top" width="50%" id="d295821e94">
                                                <p class="p">Forwarded To</p>
                                                
                                             </th>
                                             
                                          </tr>
                                          
                                       </thead>
                                       
                                       <tbody class="tbody">
                                          <tr class="row">
                                             <td class="entry" valign="top" width="50%" headers="d295821e91 ">
                                                <p class="p"><span class="ph filepath"> /destinations/northwind/V2/Northwind/Northwind.svc/$metadata</span></p>
                                                
                                             </td>
                                             
                                             <td class="entry" valign="top" width="50%" headers="d295821e94 ">
                                                <p class="p"><span class="ph filepath"> http://services.odata.org/V2/Northwind/Northwind.svc/$metadata</span></p>
                                                
                                             </td>
                                             
                                          </tr>
                                          
                                          <tr class="row">
                                             <td class="entry" valign="top" width="50%" headers="d295821e91 ">
                                                <p class="p"><span class="ph filepath"> /destinations/northwind/V2/Northwind/Northwind.svc/Invoices</span></p>
                                                
                                             </td>
                                             
                                             <td class="entry" valign="top" width="50%" headers="d295821e94 ">
                                                <p class="p"><span class="ph filepath"> http://services.odata.org/V2/Northwind/Northwind.svc/Invoices</span></p>
                                                
                                             </td>
                                             
                                          </tr>
                                          
                                       </tbody>
                                       
                                    </table>
                                    
                                 </div>
                                 
                                 <p xmlns="" class="p">The destination itself is configured inside the <span class="ph pname">SAP Cloud Platform</span> Cockpit. For more information, see <a class="xref" href="../../#/topic/3a16c7a2f1e944deb000db49e5ece6be.html" title="Configure a destination in the SAP Cloud Platform Cockpit in order to bypass the same-origin policy of the browser." target="_top">Create a Northwind Destination</a>. 
                                 </p>
                                 
                                 <p xmlns="" class="p">We describe the setup for the <span class="ph pname">SAP Web IDE</span> in the following sections. If you are using a different development environment, you can either create a simple proxy service
                                    by yourself or use an existing one.
                                 </p>
                                 
                                 <p xmlns="" class="p">For <span class="ph pname">SAP Web IDE</span>, a <span class="ph filepath">neo-app.json</span> file is needed to make sure that the destination and resource mapping are available in the app. It has to be located in the
                                    root folder (<span class="ph filepath">webapp</span>), on the same level as the <span class="ph filepath">user.project.json</span> file that is automatically created. 
                                 </p>
                                 
                                 <p xmlns="" class="p">If it does not exist yet, create a <span class="ph filepath">neo-app.json</span> file and reference the Northwind destination there. Just copy the content of the code into that file and try to run the app
                                    again.
                                 </p>
                                 <pre xmlns="" class="pre codeblock prettyprint lang-js"><span class="ph emphasis emphasis">{
  &quot;routes&quot;: [
    {
      &quot;path&quot;: &quot;/destinations/northwind&quot;,
      &quot;target&quot;: {
        &quot;type&quot;: &quot;destination&quot;,
        &quot;name&quot;: &quot;northwind&quot;
      },
      &quot;description&quot;: &quot;Northwind OData Service&quot;
    }
  ]
}</span></pre>
                                 <aside xmlns="" class="note note  insertion"><span class="title">Note</span> 
                                    <p class="p">If the file already exists, for example, because you already created it to map the <span class="ph"><span class="ph pname">OpenUI5</span></span> resources, just append the destination to the existing <samp class="ph codeph">route</samp> definitions.
                                    </p>
                                    
                                 </aside>
                                 
                                 <p xmlns="" class="p">In the <span class="ph filepath">manifest.json</span> descriptor file of your app, you can now change the data source to use the remote destination, for example:
                                 </p>
                                 <pre xmlns="" class="pre codeblock prettyprint lang-js">{
  &quot;_version&quot;: &quot;1.8.0&quot;,
  &quot;sap.app&quot;: {
	...
	&quot;dataSources&quot;: {
	  &quot;invoiceRemote&quot;: {

		&quot;uri&quot;: &quot;<span class="ph emphasis emphasis">/destinations/northwind/</span>V2/Northwind/Northwind.svc/&quot;,
		&quot;type&quot;: &quot;OData&quot;,
		&quot;settings&quot;: {
		  &quot;odataVersion&quot;: &quot;2.0&quot;
		}
	  }
	}
  },
  &quot;sap.ui&quot;: {
	...
  },
  &quot;sap.ui5&quot;: {
	...
  }
}</pre>
                                 <p xmlns="" class="p">After this change, you can run the app in <span class="ph pname">SAP Web IDE</span> without disabling the same-origin policy of your browser. The destination now manages the connection to the remote service.
                                 </p>
                                 
                              </div>
                           </section>
                        </div>
                        
                        	
                     </div>
                     
                  </div>
                  
               </section>
               <div class="clear"></div>
               
            </div>
            <div class="clearfix"></div>
         </div>
      </div>
      <div class="clearfix"></div>
      <div id="footer-container" class="grid_12">
         <footer>
            	
            <div id="custom-footerSpacer"></div>
            	
            
         </footer>
         
         
      </div>
   </body>
</html>