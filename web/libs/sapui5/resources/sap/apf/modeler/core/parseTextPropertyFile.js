jQuery.sap.declare("sap.apf.modeler.core.parseTextPropertyFile");jQuery.sap.require("sap.ui.core.format.DateFormat");jQuery.sap.require("sap.apf.core.constants");(function(){'use strict';sap.apf.modeler.core.parseTextPropertyFile=function(t,a){function c(v,w){var x=m.createMessageObject({code:v,aParameters:[w]});s.Messages.push(x);}function b(v){c(11013,v);}function d(v){c(11011,v);}function e(v,w){var x=sap.apf.utils.isValidGuid(v);if(!x){c(11012,w);return false;}else{return true;}}function f(v){c(11015,v);}function g(v){c(11012,v);}var m=a.instance.messageHandler;var D=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy/MM/dd HH:mm:ss"});var o;var l=t.split(/\r?\n/);var h=l.length;var i;var j=-1;var k=-1;var n;var p,q,r;var A=false;var s={Application:undefined,TextElements:[],Messages:[]};for(i=0;i<h;i++){if(!A){var u=/^\#\s*ApfApplicationId=[0-9A-F]+\s*$/.exec(l[i]);if(u!==null){s.Application=l[i].split('=')[1];if(!sap.apf.utils.isValidGuid(s.Application)){s.Application="";b(i);}A=true;continue;}}if(l[i]===""){continue;}if(k===i&&/^\#\s*LastChangeDate/.exec(l[i])){r=l[i].split('=');if(r.length===2){o=D.parse(r[1]);if(!o){f(i);n.LastChangeUTCDateTime="";}else{n.LastChangeUTCDateTime='/Date('+o.getTime()+')/';}s.TextElements.push(n);}else{f(i);}n=null;continue;}if(j===i){r=l[i].split('=');if(r.length===2){if(e(r[0],i)){n.TextElement=r[0];n.TextElementDescription=r[1];}else{g(i);}}else{d(i);}continue;}p=/^\#(X|Y)[A-Z]{3},[0-9]+:/.exec(l[i]);if(p){if(j===i){d(i);}n={};n.Language=sap.apf.core.constants.developmentLanguage;n.Application=s.Application;n.TextElementType=l[i].match(/(X|Y)[A-Z]{3}/)[0];n.MaximumLength=l[i].match(/,[0-9]+/);n.MaximumLength=parseInt(n.MaximumLength[0].substring(1),10);n.TranslationHint=l[i].match(/:\s*[0-9a-zA-Z\s]+$/);n.TranslationHint=n.TranslationHint[0].substring(1);j=i+1;k=i+2;}else{q=/^\#(X|Y)[A-Z]{3},[0-9]+/.exec(l[i]);if(q){if(j===i){d(i);}n={};n.Language=sap.apf.core.constants.developmentLanguage;n.Application=s.Application;n.TextElementType=l[i].match(/(X|Y)[A-Z]{3}/)[0];n.MaximumLength=l[i].match(/,[0-9]+/);n.MaximumLength=parseInt(n.MaximumLength[0].substring(1),10);n.TranslationHint="";j=i+1;k=i+2;}}}if(!A){c(11010,0);}return s;};}());
