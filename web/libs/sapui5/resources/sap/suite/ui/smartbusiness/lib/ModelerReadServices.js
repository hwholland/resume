/*!
* SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP SE. All rights reserved
* @deprecated since SAPUI 5 version 1.28.0
*/
jQuery.sap.declare("sap.suite.ui.smartbusiness.lib.ModelerReadServices");jQuery.sap.require("sap.suite.ui.smartbusiness.lib.Util");sap.suite.ui.smartbusiness.lib.ModelerReadServices=(function(){return{_encodeURL:function(u){return jQuery.sap.encodeURL(u);},getDesigntimeServiceUrl:function(){return"/sap/hba/r/sb/core/odata/modeler/SMART_BUSINESS.xsodata";},getAllKPIs:function(o){var t=this;var u=this.getDesigntimeServiceUrl();var m=o.model||new sap.ui.model.odata.ODataModel(u,true);var e="";var f="";var a=null;var b=o.success||function(d,s,x){a=(d&&d.results)?d.results:d;};var c=o.error||function(d,s,x){jQuery.sap.log.error(d);jQuery.sap.log.error(s);jQuery.sap.log.error(x);};var g=o.entity||"/INDICATORS_MODELER";g=(g.indexOf("/")==0)?g:("/"+g);if(o.tags){e+=(e)?",":"";e+="TAGS";}if(o.properties){e+=(e)?",":"";e+="PROPERTIES";}if(o.texts){e+=(e)?",":"";e+="TEXTS";}if(o.evaluations){e+=(e)?",":"";e+="EVALUATIONS";}if(o.associations){e+=(e)?",":"";e+="ASSOCIATION_SOURCE";e+="ASSOCIATION_TARGET";}if(o.filter){f=o.filter;}o.async=(o.async)?true:false;m.read(g,null,(f||null),o.async,b,c);return a;},getKPIMasterDetailsById:function(o){var t=this;if(!(o.ID&&o.IS_ACTIVE!==null&&o.IS_ACTIVE!==undefined)&&!(o.context)){throw new Error("Failed to get Indicator Id or Status for data fetch");return null;}var c=null;var a=o.context||null;var u=this.getDesigntimeServiceUrl();var m=o.model||new sap.ui.model.odata.ODataModel(u,true);var d={};if(o.context){c=o.context.sPath;if(o.context.getObject()){o.ID=o.context.getObject().ID;o.IS_ACTIVE=o.context.getObject().IS_ACTIVE;}else{o.ID=c.split("(")[1].split(",")[0].split("=")[1].replace(/'/g,'');o.IS_ACTIVE=((c.indexOf("IS_ACTIVE=0")!=-1)||(c.indexOf("IS_ACTIVE=1")!=-1))?((c.indexOf("IS_ACTIVE=0")!=-1)?0:1):null;}}else if(o.ID&&o.IS_ACTIVE!==null&&o.IS_ACTIVE!==undefined){o.ENTITY=o.ENTITY||"/INDICATORS_MODELER";o.ENTITY=(o.ENTITY.indexOf("/")!=0)?("/"+o.ENTITY):o.ENTITY;c=o.ENTITY+"(ID='"+o.ID+"',IS_ACTIVE="+o.IS_ACTIVE+")";a=new sap.ui.model.Context(m,c);}var s=o.success;var e=o.error;var b=[];var r=[];if(!(o.noIndicator)){if(a&&a.getObject()&&Object.keys(a.getObject())&&Object.keys(a)){d.INDICATOR=a.getObject();}else{b.push(m.createBatchOperation(c,"GET"));r.push("INDICATOR");}}if(o.tags){b.push(m.createBatchOperation(c+"/TAGS","GET"));r.push("TAGS");}if(o.properties){b.push(m.createBatchOperation(c+"/PROPERTIES","GET"));r.push("PROPERTIES");}if(o.texts){b.push(m.createBatchOperation(c+"/TEXTS","GET"));r.push("TEXTS");}if(o.evaluations){b.push(m.createBatchOperation(c+"/EVALUATIONS","GET"));r.push("EVALUATIONS");}if(o.associations&&o.associationProperties){b.push(m.createBatchOperation("/ASSOCIATIONS_MODELER?$filter="+t._encodeURL("SOURCE_INDICATOR eq '"+o.ID+"' or TARGET_INDICATOR eq '"+o.ID+"'")+"&$expand=PROPERTIES","GET"));r.push("ASSOCIATIONS");}else if(o.associations){b.push(m.createBatchOperation(c+"/ASSOCIATION_SOURCE","GET"));b.push(m.createBatchOperation(c+"/ASSOCIATION_TARGET","GET"));r.push("ASSOCIATION_SOURCE");r.push("ASSOCIATION_TARGET");}o.async=(o.async)?true:false;m.addBatchReadOperations(b);m.submitBatch(function(f,g){var A=f.__batchResponses;for(var i=0,l=A.length;i<l;i++){jQuery.sap.log.info(r[i]+" : "+JSON.stringify(A[i]));d[r[i]]=(A[i].data.results)?A[i].data.results:A[i].data;}if(s){s(d);}},function(f){if(e){e(f);}throw new Error("Failed to fetch Indicator details");},o.async);if(o.associations&&o.associationProperties){for(var i=0,l=d.ASSOCIATIONS.length;i<l;i++){if(d.ASSOCIATIONS[i].PROPERTIES){if(d.ASSOCIATIONS[i].PROPERTIES.results&&d.ASSOCIATIONS[i].PROPERTIES.results.length){d.ASSOCIATIONS[i].PROPERTIES=d.ASSOCIATIONS[i].PROPERTIES.results;}else{d.ASSOCIATIONS[i].PROPERTIES=[];}}else{d.ASSOCIATIONS[i].PROPERTIES=[];}}}else{d.ASSOCIATIONS=[].concat(d.ASSOCIATION_SOURCE).concat(d.ASSOCIATION_TARGET);}return d;},getEvaluationMasterDetailsById:function(o){var t=this;if(!(o.ID&&o.IS_ACTIVE!==null&&o.IS_ACTIVE!==undefined)&&!(o.context)){throw new Error("Failed to get Evaluation Id or Status for data fetch");return null;}var c=null;var a=o.context||null;var u=this.getDesigntimeServiceUrl();var m=o.model||new sap.ui.model.odata.ODataModel(u,true);var d={};if(o.context){c=o.context.sPath;if(o.context.getObject()){o.ID=o.context.getObject().ID;o.IS_ACTIVE=o.context.getObject().IS_ACTIVE;}else{o.ID=c.split("(")[1].split(",")[0].split("=")[1].replace(/'/g,'');o.IS_ACTIVE=((c.indexOf("IS_ACTIVE=0")!=-1)||(c.indexOf("IS_ACTIVE=1")!=-1))?((c.indexOf("IS_ACTIVE=0")!=-1)?0:1):null;}}else if(o.ID&&o.IS_ACTIVE!==null&&o.IS_ACTIVE!==undefined){o.ENTITY=o.ENTITY||"/EVALUATIONS_MODELER";o.ENTITY=(o.ENTITY.indexOf("/")!=0)?("/"+o.ENTITY):o.ENTITY;c=o.ENTITY+"(ID='"+o.ID+"',IS_ACTIVE="+o.IS_ACTIVE+")";a=new sap.ui.model.Context(m,c);}var s=o.success;var e=o.error;var b=[];var r=[];if(!(o.noEvaluation)){if(a&&a.getObject()&&Object.keys(a.getObject())&&Object.keys(a)){d.EVALUATION=a.getObject();}else{b.push(m.createBatchOperation(c,"GET"));r.push("EVALUATION");}}if(o.tags){b.push(m.createBatchOperation(c+"/TAGS","GET"));r.push("TAGS");}if(o.properties){b.push(m.createBatchOperation(c+"/PROPERTIES","GET"));r.push("PROPERTIES");}if(o.texts){b.push(m.createBatchOperation(c+"/TEXTS","GET"));r.push("TEXTS");}if(o.filters){b.push(m.createBatchOperation(c+"/FILTERS","GET"));r.push("FILTERS");}if(o.values){b.push(m.createBatchOperation(c+"/VALUES","GET"));r.push("VALUES");}if(o.chips){b.push(m.createBatchOperation(c+"/CHIPS","GET"));r.push("CHIPS");}if(o.dda_configurations){b.push(m.createBatchOperation(c+"/DDA_CONFIGURATIONS","GET"));r.push("DDA_CONFIGURATIONS");}if(o.dda_header_tiles){b.push(m.createBatchOperation(c+"/DDA_HEADER_TILES","GET"));r.push("DDA_HEADER_TILES");}o.async=(o.async)?true:false;m.addBatchReadOperations(b);m.submitBatch(function(f,g){var A=f.__batchResponses;for(var i=0,l=A.length;i<l;i++){jQuery.sap.log.info(r[i]+" : "+JSON.stringify(A[i]));d[r[i]]=(A[i].data.results)?A[i].data.results:A[i].data;}if(s){s(d);}},function(f){if(e){e(f);}throw new Error("Failed to fetch Evaluation details");},o.async);return d;},getChipMasterDetailsById:function(o){var t=this;if(!(o.id&&o.isActive!==null&&o.isActive!==undefined)&&!(o.context)){throw new Error("Failed to get Chip Id or Status for data fetch");return null;}var c=null;var a=o.context||null;var u=this.getDesigntimeServiceUrl();var m=o.model||new sap.ui.model.odata.ODataModel(u,true);var d={};if(o.context){c=o.context.sPath;if(o.context.getObject()){o.id=o.context.getObject().id;o.isActive=o.context.getObject().isActive;}else{o.id=c.split("(")[1].split(",")[0].split("=")[1].replace(/'/g,'');o.isActive=((c.indexOf("isActive=0")!=-1)||(c.indexOf("isActive=1")!=-1))?((c.indexOf("isActive=0")!=-1)?0:1):null;}}else if(o.id&&o.isActive!==null&&o.isActive!==undefined){o.ENTITY=o.ENTITY||"/CHIPS_MODELER";o.ENTITY=(o.ENTITY.indexOf("/")!=0)?("/"+o.ENTITY):o.ENTITY;c=o.ENTITY+"(id='"+o.ID+"',isActive="+o.isActive+")";a=new sap.ui.model.Context(m,c);}var s=o.success;var e=o.error;var b=[];var r=[];if(!(o.noChip)){if(a&&a.getObject()&&Object.keys(a.getObject())&&Object.keys(a)){d.CHIP=a.getObject();}else{b.push(m.createBatchOperation(c,"GET"));r.push("CHIP");}}if(o.evaluation){b.push(m.createBatchOperation(c+"/EVALUATION_INFO","GET"));r.push("EVALUATION_INFO");}if(o.texts){b.push(m.createBatchOperation(c+"/TEXTS","GET"));r.push("TEXTS");}if(o.dda_configurations){b.push(m.createBatchOperation(c+"/DDA_CONFIGURATIONS","GET"));r.push("DDA_CONFIGURATIONS");}o.async=(o.async)?true:false;m.addBatchReadOperations(b);m.submitBatch(function(f,g){var A=f.__batchResponses;for(var i=0,l=A.length;i<l;i++){jQuery.sap.log.info(r[i]+" : "+JSON.stringify(A[i]));d[r[i]]=(A[i].data.results)?A[i].data.results:A[i].data;}if(s){s(d);}},function(f){if(e){e(f);}throw new Error("Failed to fetch Chip details");},o.async);return d;}};})();
