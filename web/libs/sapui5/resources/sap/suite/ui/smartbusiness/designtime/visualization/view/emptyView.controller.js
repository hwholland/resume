/*
 * Copyright (C) 2009-2013 SAP AG or an SAP affiliate company. All rights reserved
 * @deprecated since SAPUI 5 version 1.28.0
 */
jQuery.sap.require("sap.ca.scfld.md.controller.BaseDetailController");jQuery.sap.require("sap.m.MessageBox");jQuery.sap.require("sap.ca.ui.images.images");jQuery.sap.includeStyleSheet(jQuery.sap.getModulePath("/")+"/sap/ca/scfld/md/css/flower.css");sap.ca.scfld.md.controller.BaseDetailController.extend("sap.suite.ui.smartbusiness.designtime.visualization.view.emptyView",{onInit:function(){var i=this.byId("flower");if(i){i.setSrc(sap.ca.ui.images.images.Flower);}this.getView().addEventDelegate(this,this);this.getView().addEventDelegate({onBeforeShow:jQuery.proxy(function(e){if(e.data&&(e.data.viewTitle||e.data.languageKey||e.data.infoText)){this.setTitleAndMessage(e.data.viewTitle,e.data.languageKey,e.data.infoText);}},this)});var v=this.getView();var t=this;if(this.oApplicationFacade.navigatingWithinDrilldown){this.navigatingWithinDrilldown=true;this.oApplicationFacade.navigatingWithinDrilldown=undefined;}else{this.navigatingWithinDrilldown=false;}this.busyDialog=new sap.m.BusyDialog();this.oRouter.attachRouteMatched(function(e){if(e.getParameter("name")==="noDataView"){this.evalContext=new sap.ui.model.Context(v.getModel(),'/'+e.getParameter("arguments").contextPath);var a=e.getParameter("arguments");this.setTitleAndMessage(a.viewTitle,a.languageKey);this.metadataRef=sap.suite.ui.smartbusiness.Adapter.getService("ModelerServices");this.confRef=sap.suite.ui.smartbusiness.Configuration;this.constantsRef=this.confRef.Constants;this.tileTypeConst=this.constantsRef.TileType;this.PLATFORM=this.metadataRef.getPlatform();this.env=0;this.utilsRef=sap.suite.ui.smartbusiness.lib.Util.utils;if(this.PLATFORM==this.constantsRef.Platform.ABAP){this.isPlatformABAP=true;}else{this.isPlatformABAP=false;}this.oHeaderFooterOptions={bSuppressBookmarkButton:{},oEditBtn:{sI18nBtnTxt:t.oApplicationFacade.getResourceBundle().getText("FULLSCREEN_TITLE"),onBtnPressed:function(d){if(t.navigatingWithinDrilldown){t.oApplicationFacade.navigatingWithinDrilldown=true;}else{t.oApplicationFacade.navigatingWithinDrilldown=undefined;}if(t.isPlatformABAP){sap.suite.ui.smartbusiness.lib.Util.utils.replaceHash({action:"configureSBKPITile",route:"addTileModelS",context:t.evalContext.sPath.substr(1)});}else{sap.suite.ui.smartbusiness.lib.Util.utils.replaceHash({action:"configureSBKPITile",route:"addTile",context:t.evalContext.sPath.substr(1)});}},bEnabled:false,}};if(t.isPlatformABAP){this.oHeaderFooterOptions.buttonList=[{sI18nBtnTxt:t.oApplicationFacade.getResourceBundle().getText("DELETE_EVALUATION"),onBtnPressed:function(d){t.handleEvalDelete();}}];this.oHeaderFooterOptions.additionalShareButtonList=[];}function b(d){t.env=d;};function c(d,s,x){sap.suite.ui.smartbusiness.lib.Util.utils.showErrorMessage(t.oApplicationFacade.getResourceBundle().getText("YMSG_ERROR_RETRIEVING_SYS_INFO"),d.response.body);};this.metadataRef.getSystemInfo({async:false,success:b,error:c,model:this.oDataModel});}},this);},handleEvalDelete:function(){var t=this;var m={EVALUATION:t.evalContext.getObject()};sap.m.MessageBox.show(t.oApplicationFacade.getResourceBundle().getText("WARNING_EVALUATION_DELETE"),"sap-icon://hint",t.oApplicationFacade.getResourceBundle().getText("DELETE"),[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],function(e){if(e=="OK"){function a(){t.busyDialog.close();sap.m.MessageToast.show(t.oApplicationFacade.getResourceBundle().getText("EVALUATION_DEL_SUCCESS"));t.refreshMasterList();sap.suite.ui.smartbusiness.lib.Util.utils.replaceHash({hash:window.location.hash.substr(0,window.location.hash.indexOf("&/"))},true);};function b(){t.busyDialog.close();sap.suite.ui.smartbusiness.lib.Util.utils.showErrorMessage(t.oApplicationFacade.getResourceBundle().getText("ERR_EVALUATION_DEL"));};var p={ID:m.EVALUATION.ID,IS_ACTIVE:m.EVALUATION.IS_ACTIVE};t.busyDialog.open();t.metadataRef.remove("EVALUATION",p,a,b);}if(e=="CANCEL"){}});},getHeaderFooterOptions:function(){return this.oHeaderFooterOptions;},setTitleAndMessage:function(v,l,i){var p=this.byId("sap.ca.scfld.md.view.empty");var t=this.oApplicationFacade.oApplicationImplementation.getResourceBundle().getText(v);if(!t||t===v){if(!i){t=this.oApplicationFacade.oApplicationImplementation.getUiLibResourceBundle().getText(this.oApplicationFacade.oApplicationImplementation.oConfiguration.getDefaultEmptyMessageKey());}else{t=i;}};p.setTitle(t);var L=this.byId("emptyLabel");if(!i){var m=this.oApplicationFacade.oApplicationImplementation.getUiLibResourceBundle().getText(l);if(!m||m===l){m=this.oApplicationFacade.oApplicationImplementation.getUiLibResourceBundle().getText(this.oApplicationFacade.oApplicationImplementation.oConfiguration.getDefaultEmptyMessageKey());};L.setText(m);}else{L.setText(i);}},refreshMasterList:function(){var t=this;t.utilsRef.refreshMasterList(t,false);}});
