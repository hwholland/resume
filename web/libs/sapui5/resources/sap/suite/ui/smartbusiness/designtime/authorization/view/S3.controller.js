/*!
* SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2013 SAP SE. All rights reserved
* @deprecated since SAPUI 5 version 1.28.0
*/
jQuery.sap.require("sap.ca.scfld.md.controller.BaseDetailController");sap.ca.scfld.md.controller.BaseDetailController.extend("sap.suite.ui.smartbusiness.designtime.authorization.view.S3",{onInit:function(){var t=this;this.utilsRef=sap.suite.ui.smartbusiness.lib.Util.utils;var v=this.getView();this.settingModel=sap.ui.getCore().getModel("SB_APP_SETTING")||new sap.ui.model.json.JSONModel();sap.ui.getCore().setModel(this.settingModel,"SB_APP_SETTING");this.getView().setModel(sap.ui.getCore().getModel("SB_APP_SETTING"),"SB_APP_SETTING");this.oRouter.attachRouteMatched(function(e){if(e.getParameter("name")==="detail"){var c=new sap.ui.model.Context(v.getModel(),'/'+e.getParameter("arguments").contextPath);var a=e.getParameter("arguments").contextPath;v.setBindingContext(c);t.getUsersAndRoles(v.getBindingContext().getProperty("ID")||a.split("(")[1].split(",")[0].split("=")[1].replace(/'/g,''));}},this);var t=this;this.oHeaderFooterOptions={bSuppressBookmarkButton:{},oEditBtn:{sI18nBtnTxt:"S3_EDIT",onBtnPressed:function(e){sap.suite.ui.smartbusiness.lib.Util.utils.replaceHash({action:"authorizeSBEvaluation",route:"subDetail",context:v.getBindingContext().getPath().split("/")[1]});},bEnabled:false,},};},getUsersAndRoles:function(i){var t=this;this.byId("users").getBinding("content").filter([new sap.ui.model.Filter("ID","EQ",i),new sap.ui.model.Filter("TYPE","EQ","USER")]);this.byId("roles").getBinding("content").filter([new sap.ui.model.Filter("ID","EQ",i),new sap.ui.model.Filter("TYPE","EQ","ROLE")]);this.byId("users").getBinding("content").attachDataReceived(function(d){t.byId("usersTab").setCount(d.getSource().getLength());t.byId("usersTitle").setText(t.oApplicationFacade.getResourceBundle().getText("AUTH_USERS")+" ("+d.getSource().getLength()+")");t.byId("usersTitle").rerender();});this.byId("roles").getBinding("content").attachDataReceived(function(d){t.byId("rolesTab").setCount(d.getSource().getLength());t.byId("rolesTitle").setText(t.oApplicationFacade.getResourceBundle().getText("ROLES")+" ("+d.getSource().getLength()+")");});},formatId:function(i){return this.oApplicationFacade.getResourceBundle().getText("ID")+" : "+i;},formatOwner:function(o){return sap.suite.ui.smartbusiness.lib.formatters.getBundleText(undefined,"OWNER",o);},getHeaderFooterOptions:function(){return this.oHeaderFooterOptions;},formatProperties:function(n,v){return((this.getView().byId("properties").getItems().length>1)?(', '+n+' : '+v):(n+' : '+v));},formatFavoriteMark:function(f){return((f)?true:false);},refreshMasterList:function(){var t=this;t.utilsRef.refreshMasterList(t,false);}});
