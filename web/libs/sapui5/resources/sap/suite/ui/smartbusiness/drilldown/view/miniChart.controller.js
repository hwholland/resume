jQuery.sap.require("sap.ca.scfld.md.controller.BaseFullscreenController");jQuery.sap.require("sap.m.MessageBox");sap.ca.scfld.md.controller.BaseFullscreenController.extend("sap.suite.ui.smartbusiness.drilldown.view.miniChart",{_getEvaluationId:function(){try{var s=this.oConnectionManager.getComponent().oComponentData.startupParameters;return s["evaluationId"][0];}catch(e){return sap.suite.ui.smartbusiness.drilldown.lib.Hash.getStartupParameters().evaluationId[0];}},_detachHashChangeListener:function(){try{this._proxyHashChangeListener=null;this.hashChangerAttached=true;}catch(e){jQuery.sap.log.error("Error Detaching hashChanged Event");}},onInit:function(){var t=this;var o={onBack:function(){window.history.back();},additionalShareButtonList:[],sFullscreenTitle:"",};this.setHeaderFooterOptions(o);this.getPage().getCustomHeader().getContentMiddle()[0].setText("");this.SAP_SYSTEM="HANA";this._requestTimeLog={};var E=this._getEvaluationId();var a=E;this._EVALUATION_ID=E;var s=new Date().getTime();var c=function(d){this.DDA_CONFIG_ODATA_CALL_REF=d;};sap.suite.ui.smartbusiness.drilldown.lib.Configuration.loadConfiguration({evaluationId:a,cache:true,success:function(b){var e=new Date().getTime();this._requestTimeLog["DDA_CONFIG_FETCH"]={title:"Configuration",time:e-s};this.CONFIGURATION=sap.suite.ui.smartbusiness.drilldown.lib.Configuration.parse(a,b);t.displayMiniCharts();if(this.CONFIGURATION.getAllViews().length==0){jQuery.sap.log.error("drilldown not configured");return;}var d=new Date().getTime();},error:function(){jQuery.sap.log.error("Drilldown Configuration Fetching Failed");},context:this,sapSystem:this.SAP_SYSTEM},c);},getUrlFilters:function(){var p=sap.suite.ui.smartbusiness.drilldown.lib.Hash.getApplicationParameters(["viewId"]);var u=[];for(var k in p){var f=p[k];if(f&&f.length){f.forEach(function(F){var O={};O["NAME"]=k;O["OPERATOR"]="EQ";O["VALUE_1"]=F;O["VALUE_2"]="";O["TYPE"]="FI";u.push(O);});}}return u;},renderKpiHeaders:function(h){var s=this;var m=this.byId("mobileGrid");m.removeAllContent();this.miniChartManager=sap.suite.ui.smartbusiness.drilldown.lib.MiniChartManager.renderHeaders({allTiles:h,headerContainer:m,sapSystem:this.SAP_SYSTEM,urlFilters:this.getUrlFilters(),onNavigation:function(){s._detachHashChangeListener();}});},displayMiniCharts:function(){var h=this.CONFIGURATION.getHeaders();if(!(h&&h.length)){}else{this.renderKpiHeaders(h);}$(window).trigger('resize');},});
