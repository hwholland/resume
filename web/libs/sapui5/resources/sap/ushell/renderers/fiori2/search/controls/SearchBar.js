(function(){"use strict";jQuery.sap.require('sap.m.Bar');jQuery.sap.require('sap.m.Label');jQuery.sap.require('sap.m.Button');jQuery.sap.require('sap.m.ButtonType');jQuery.sap.require('sap.m.ToggleButton');sap.m.Bar.extend('sap.ushell.renderers.fiori2.search.controls.SearchBar',{metadata:{properties:{filterButtonVisible:{type:"boolean",defaultValue:true},filterButtonPressed:{type:"boolean",defaultValue:false}}},constructor:function(o,i){var t=this;t.sMarginPropValueSmall="0.5rem";t.sMarginPropValueBigNormalMode="12.5rem";t.sMarginPropValueBigCompactMode="13.5rem";t.sMarginPropValueBig=t.sMarginPropValueBigNormalMode;if(jQuery("html").attr("dir")==='rtl'){t.sMarginPropName="margin-right";}else{t.sMarginPropName="margin-left";}t.filterButtonPressed=o.filterButtonPressed;t.filterBtn=new sap.m.ToggleButton({icon:sap.ui.core.IconPool.getIconURI("filter"),tooltip:t.filterButtonPressed?sap.ushell.resources.i18n.getText("hideFacetBtn_tooltip"):sap.ushell.resources.i18n.getText("showFacetBtn_tooltip"),pressed:t.filterButtonPressed,press:function(){if(this.getPressed()){t.getModel().setFacetVisibility(true);t._animateFilterBtn(this.getPressed(),400,function(){jQuery(this).attr("title",sap.ushell.resources.i18n.getText("hideFacetBtn_tooltip"));});}else{t.getModel().setFacetVisibility(false);t._animateFilterBtn(this.getPressed(),400,function(){jQuery(this).attr("title",sap.ushell.resources.i18n.getText("showFacetBtn_tooltip"));});}}});t.filterBtn.addStyleClass('searchBarFilterButton');t.filterBtn.addEventDelegate({onAfterRendering:function(){if(jQuery(t.getDomRef()).parents(".sapUiSizeCompact").length>0){t.sMarginPropValueBig=t.sMarginPropValueBigCompactMode;}t._animateFilterBtn(t.filterBtn.getPressed(),0);}});o=jQuery.extend({},{contentLeft:[new sap.m.Button({type:sap.m.ButtonType.Back,press:function(e){window.history.back(1);},tooltip:"{i18n>backBtn_tooltip}"})]},o);if(!sap.ui.Device.system.phone){o.contentLeft.push(this.filterBtn);}sap.m.Bar.prototype.constructor.apply(this,[o],i);this.addStyleClass('searchBar');},getFilterButtonVisible:function(){this.filterBtn.getVisible();},setFilterButtonVisible:function(i){this.filterBtn.setVisible(i);this.setProperty("filterButtonVisible",i);},getFilterButtonPressed:function(){this.filterBtn.getPressed();},setFilterButtonPressed:function(i){this.filterBtn.setPressed(i);this.setProperty("filterButtonPressed",i);this._animateFilterBtn(i);},_animateFilterBtn:function(p,n,c){var t=this;var m={};if(p){m[t.sMarginPropName]=t.sMarginPropValueBig;}else{m[t.sMarginPropName]=t.sMarginPropValueSmall;}jQuery(t.filterBtn.getDomRef()).animate(m,{duration:n,complete:c});},renderer:'sap.m.BarRenderer'});})();
