// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";jQuery.sap.require("sap.ushell.ui.launchpad.GroupListItem");jQuery.sap.require("sap.ui.core.IconPool");sap.ui.jsview("sap.ushell.renderers.fiori2.launchpad.group_list.GroupList",{createContent:function(c){this.oModel=sap.ui.getCore().byId("shell").getModel();var t=this,o=this._getOpenCatalogItem(c),g=this._getGroupListItemTemplate(c);this.bAnimate=sap.ui.Device.system.desktop;this.isTouch=!sap.ui.Device.system.desktop;this.oGroupList=new sap.m.List("groupListItems",{items:{path:"/groups",template:g}}).addStyleClass("sapUshellGroupItemList");jQuery.extend(this.oGroupList,{onsapskipforward:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.goToTileContainer();},onsapskipback:function(){}});this.oGroupList.onAfterRendering=function(){this.data("sap-ui-fastnavgroup","false",false);jQuery("#groupListFooter").attr("data-sap-ui-fastnavgroup","false");t.oController.handleScroll();};this.oGroupList.updateItems=sap.ushell.override.updateAggregatesFactory("items");var l=new sap.m.Button("lastHiddenSidebarTabFocusHelper");l.addEventDelegate({onfocusin:function(E){try{E.preventDefault();if(!sap.ushell.renderers.fiori2.AccessKeysHandler.goToTileContainer()){sap.ui.getCore().byId('actionsBtn').focus();}}catch(e){}}});var f=new sap.m.Button("firstHiddenSidebarTabFocusHelper");f.addEventDelegate({onfocusin:function(){try{var d=sap.ui.getCore().byId('actionsBtn');d.focus();}catch(e){}}});if(sap.ui.getCore().byId("shell")&&sap.ui.getCore().byId("shell").getModel()&&sap.ui.getCore().byId("shell").getModel().getProperty("/personalization")){this.oActionList=new sap.m.List({items:[o]});jQuery.extend(this.oActionList,{onsapskipforward:function(){},onsapskipback:function(){}});this.oActionList._navToTabChain=function(){};var a=this.oActionList.onAfterRendering;this.oActionList.onAfterRendering=function(e){a.call(this,e);this.data("sap-ui-fastnavgroup","false",false);};var b=new sap.m.Bar({id:"groupListFooter",contentMiddle:[this.oActionList,l]});b.addStyleClass("sapUshellPersonalizationOn");this.groupListPage=new sap.m.Page({id:"groupListPage",showHeader:false,showFooter:true,content:[f,this.oGroupList],footer:b});this.groupListPage.addStyleClass("sapUshellPersonalizationOn");}else{this.groupListPage=new sap.m.Page({id:"groupListPage",showHeader:false,showFooter:false,content:[f,this.oGroupList]});}this.addStyleClass("sapUshellGroupList");return[this.groupListPage];},_getOpenCatalogItem:function(){var o=function(){sap.ushell.renderers.fiori2.Navigation.openCatalogByHash();},O=new sap.m.ActionListItem("openCatalogActionItem",{text:"{i18n>open_catalog}",tooltip:"{i18n>openCatalog_tooltip}",press:o});if(this.oModel.getProperty("/enableHelp")){O.addStyleClass('help-id-openCatalogActionItem');}return O;},_getGroupListItemTemplate:function(c){var o=function(e){var x=this.getModel()&&this.getModel().getProperty('/enableHelp');if(this.getDefaultGroup()){this.addStyleClass("sapUshellDefaultGroupItem");if(x){this.addStyleClass("help-id-homeGroupListItem");}}else{this.addStyleClass("sapUshellGroupListItem");if(x){this.addStyleClass("help-id-groupListItem");}}jQuery(this.getDomRef()).attr("tabindex","0");};return new sap.ushell.ui.launchpad.GroupListItem({index:"{index}",title:"{title}",tooltip:"{title}",defaultGroup:"{isDefaultGroup}",groupId:"{groupId}",numberOfTiles:"{tiles/length}",afterRendering:o,isGroupVisible:"{isGroupVisible}",press:[function(e){this._handleGroupListItemPress(e);},c],visible:{parts:["/tileActionModeActive","isGroupVisible","/personalization","isGroupLocked","tiles/length","isDefaultGroup"],formatter:function(t,i,p,a,n,b){if(!this.groupHasVisibleTiles()&&(!p||(a&&!t)||(b&&!t))){return false;}return i||t;}}});},getControllerName:function(){return"sap.ushell.renderers.fiori2.launchpad.group_list.GroupList";}});}());
