// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";sap.ui.jsview("sap.ushell.components.flp.launchpad.appfinder.HierarchyFolders",{createContent:function(c){var t=this;this.translationBundle=sap.ushell.resources.i18n;this.treePath="";this.systemSelectorText=new sap.m.Text({text:{path:"easyAccessSystemsModel>/systemSelected",formatter:c.systemSelectorTextFormatter.bind(c)}});this.oItemTemplate=new sap.m.StandardListItem({title:"{easyAccess>text}",type:"Navigation",press:function(){var p=this.getBindingContextPath();t.getViewData().navigateHierarchy(p,true);}});this.oList=new sap.m.List({items:{path:"easyAccess>"+this.treePath+"/folders",template:this.oItemTemplate},updateFinished:function(){t.finishEasyAccessAnimation(true);},noDataText:{path:"easyAccessSystemsModel>/systemSelected",formatter:function(s){if(s){return t.translationBundle.getText("easyAccessFolderWithNoItems");}}}});this.pageMenu=new sap.m.Page({title:"{easyAccess>/text}",showNavButton:false,enableScrolling:true,subHeader:new sap.m.Toolbar({design:"Info",height:"2rem",active:{path:"easyAccessSystemsModel>/systemsList",formatter:function(s){return s.length>1;}},content:[this.systemSelectorText,new sap.m.ToolbarSpacer(),new sap.ui.core.Icon({width:"2rem",src:"sap-icon://edit"})],press:[c.onSystemSelectionPress,c]}),content:this.oList});this.pageMenu.attachNavButtonPress(function(){var p=this.treePath.split("/");var n=p.slice(0,p.length-2);this.getViewData().navigateHierarchy(n.join("/"),false);}.bind(this));return this.pageMenu;},getControllerName:function(){return"sap.ushell.components.flp.launchpad.appfinder.HierarchyFolders";},finishEasyAccessAnimation:function(){if(!this.jqFolderClone){return;}if(this.forwardAnimation){this.pageMenu.$().addClass("forwardToViewAnimation");this.jqFolderClone.addClass("forwardOutOfViewAnimation");}else{this.pageMenu.$().addClass("backToViewAnimation");this.jqFolderClone.addClass("backOutOfViewAnimation");}this.jqFolderClone.on("animationend",function(){this.pageMenu.$().removeClass("forwardToViewAnimation backToViewAnimation");var b=this.pageMenu.$().find(".sapMBarLeft button");if(b.length){b.focus();}else{setTimeout(function(){this.pageMenu.$().find("header + header").focus();}.bind(this));}if(this.jqFolderClone){this.jqFolderClone.remove();}}.bind(this));},prepareEasyAccessAnimation:function(f){this.forwardAnimation=f;this.jqFolderClone=this.pageMenu.$().clone().removeAttr("data-sap-ui").css("z-index","1");this.jqFolderClone.find("*").removeAttr("id");this.pageMenu.$().parent().append(this.jqFolderClone);},updatePageBindings:function(p,f){var s=p.split("/").length>2;this.treePath=p;this.pageMenu.setShowNavButton(s);this.pageMenu.setShowSubHeader(!s);this.prepareEasyAccessAnimation(f);this.pageMenu.bindProperty("title","easyAccess>"+p+"/text");this.oList.bindItems("easyAccess>"+p+"/folders",this.oItemTemplate);}});}());
