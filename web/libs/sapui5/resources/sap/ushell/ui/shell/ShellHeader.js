/*!
 * ${copyright}
 */
sap.ui.define(['jquery.sap.global','sap/ushell/library','./ShellHeadItem','./ShellHeadUserItem','./ShellTitle','./ShellAppTitle'],function(q,S,a,b){"use strict";var c=sap.ui.core.Control.extend("sap.ushell.ui.shell.ShellHeader",{metadata:{properties:{logo:{type:"sap.ui.core.URI",defaultValue:""},showLogo:{type:"boolean",defaultValue:true},searchVisible:{type:"boolean",defaultValue:true},ariaLabel:{type:"string",defaultValue:undefined},showSeparators:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{headItems:{type:"sap.ushell.ui.shell.ShellHeadItem",multiple:true},headEndItems:{type:"sap.ushell.ui.shell.ShellHeadItem",multiple:true},search:{type:"sap.ui.core.Control",multiple:false},user:{type:"sap.ushell.ui.shell.ShellHeadUserItem",multiple:false},title:{type:"sap.ushell.ui.shell.ShellTitle",multiple:false},appTitle:{type:"sap.ushell.ui.shell.ShellAppTitle",multiple:false}}},renderer:{render:function(r,h){var i=h.getId();r.write("<div");r.writeControlData(h);if(h.getAriaLabel()){r.writeAccessibilityState({label:h.getAriaLabel(),role:"banner"});}r.writeAttribute("class","sapUshellShellHeader");r.write(">");r.write("<div id='",i,"-hdr-begin' class='sapUshellShellHeadBegin'>");this.renderHeaderItems(r,h,true);r.write("</div>");r.write("<div id='",i,"-hdr-center' class='sapUshellShellHeadCenter' >");this.renderSearch(r,h);this.renderTitle(r,h);if(h.getAppTitle()){this.renderAppTitle(r,h);}r.write("</div>");r.write("<div id='",i,"-hdr-end' class='sapUshellShellHeadEnd'>");this.renderHeaderItems(r,h,false);r.write("</div>");r.write("</div>");},renderSearch:function(r,h){var s=h.getSearch();r.write("<div id='",h.getId(),"-hdr-search'");r.writeAttribute("class","sapUshellShellSearch"+(h.getSearchVisible()?"":" sapUshellShellHidden"));r.write(">");if(s){r.renderControl(s);}r.write("</div>");},renderTitle:function(r,h){var C="sapUshellShellHeadTitle";if(h.getAppTitle()){C="sapUshellShellHeadSubtitle";}r.write("<div id='",h.getId(),"-hdr-title' class='"+C+"'>");r.renderControl(h.getTitle());r.write("</div>");},renderAppTitle:function(r,h){r.write("<div id='",h.getId(),"-hdr-appTitle' class='sapUshellShellHeadTitle'>");r.renderControl(h.getAppTitle());r.write("</div>");},renderHeaderItems:function(r,h,d){r.write("<div class='sapUshellShellHeadContainer'>");var t,u,U,I=d?h.getHeadItems():h.getHeadEndItems(),i;for(i=0;i<I.length;i++){I[i]._headerHideSeperators=!h.getShowSeparators();r.renderControl(I[i]);}u=h.getUser();if(!d&&u){r.write("<a tabindex='0'");r.writeElementData(u);r.addClass("sapUshellShellHeadAction sapUshellShellHeadSeparator");r.writeClasses();t=u.getTooltip_AsString();if(t){r.writeAttributeEscaped("title",t);}if(u.getAriaLabel()){r.writeAccessibilityState({label:u.getAriaLabel(),haspopup:"true",role:"button"});}r.write("><span id='",u.getId(),"-img' class='sapUshellShellHeadActionImg'></span>");r.write("<span id='"+u.getId()+"-name' class='sapUshellShellHeadActionName'");r.write(">");U=u.getUsername()||"";r.writeEscaped(U);r.write("</span><span class='sapUshellShellHeadActionExp'></span></a>");}r.write("</div>");if(d){this._renderLogo(r,h);}},_renderLogo:function(r,h){var l=sap.ushell.resources.i18n.getText("SHELL_LOGO_TOOLTIP"),i=h._getLogo(),C="";if(!h.getShowLogo()){C+="sapUshellShellHideIco";}else{C+="sapUshellShellIco";}r.write("<div class='"+C+"'");r.writeAttributeEscaped("aria-label",l);r.writeAttributeEscaped("tabindex","0");r.write(">");r.write("<img id='",h.getId(),"-icon'");r.writeAttributeEscaped("title",l);r.writeAttributeEscaped("alt",l);r.writeAttributeEscaped("aria-hidden","true");r.write("src='");r.writeEscaped(i);r.write("' style='",i?"":"display:none;","'></img>");r.write("</div>");}}});c.prototype.init=function(){var t=this;this._rtl=sap.ui.getCore().getConfiguration().getRTL();this._handleMediaChange=function(p){if(!t.getDomRef()){return;}t._refresh();};sap.ui.Device.media.attachHandler(this._handleMediaChange,this,sap.ui.Device.media.RANGESETS.SAP_STANDARD);this._handleResizeChange=function(){if(!t.getDomRef()||!t.getUser()){return;}var C,u=this.getUser();C=u._checkAndAdaptWidth(!t.$("hdr-search").hasClass("sapUshellShellHidden")&&!!t.getSearch());if(C){t._refresh();}};sap.ui.Device.resize.attachHandler(this._handleResizeChange,this);this.data("sap-ui-fastnavgroup","true",true);this.oTitle=null;};c.prototype.exit=function(){sap.ui.Device.media.detachHandler(this._handleMediaChange,this,sap.ui.Device.media.RANGESETS.SAP_STANDARD);delete this._handleMediaChange;sap.ui.Device.resize.detachHandler(this._handleResizeChange,this);delete this._handleResizeChange;if(this.oTitle){this.oTitle.destroy();}};c.prototype.onAfterRendering=function(){this._refresh();this.$("hdr-center").toggleClass("sapUshellShellAnim",this.getParent().getShowAnimation());};c.prototype.onThemeChanged=function(){if(this.getDomRef()){this.invalidate();}};c.prototype._getLogo=function(){var i=this.getLogo();if(!i){q.sap.require("sap.ui.core.theming.Parameters");i=sap.ui.core.theming.Parameters._getThemeImage(null,true);}return i;};c.prototype._refresh=function(){var u=this.getUser(),i=q("html").hasClass("sapUiMedia-Std-Phone"),s=sap.ui.getCore().byId("sf"),d=s?!s.getVisible():false,$=this.$("icon");if(u){u._refreshImage();u._checkAndAdaptWidth(!!this.getSearch());}$.parent().toggleClass("sapUshellShellHidden",i&&d&&!!this.getSearch());var w=this.$("hdr-end").outerWidth(),e=this.$("hdr-begin").outerWidth(),f=e+"px",g=w+"px";this.$("hdr-center").css({"left":this._rtl?g:f,"right":this._rtl?f:g});if(this.getAppTitle()){this.$("hdr-title").css({"left":"1rem","position":"absolute"});}};c.prototype.setTitleControl=function(t,i){this.oTitle=this.oTitle||sap.ui.getCore().byId("shellTitle");if(this.oTitle){this.oTitle.destroy();}this.oTitle=new sap.ushell.ui.shell.ShellTitle("shellTitle",{text:t,icon:sap.ui.core.IconPool.getIconURI("overflow")});this.oTitle.setInnerControl(i);this.setTitle(this.oTitle);};c.prototype.removeHeadItem=function(i){if(typeof i==='number'){i=this.getHeadItems()[i];}i.setVisible(false);this.removeAggregation('headItems',i,true);};c.prototype.addHeadItem=function(i){if(!i.getDomRef()){this.addAggregation('headItems',i);i.setVisible(true);}else{this.addAggregation('headItems',i,true);i.setVisible(true);}};return c;},true);
