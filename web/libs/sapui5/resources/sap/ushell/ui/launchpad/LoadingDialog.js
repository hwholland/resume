/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
jQuery.sap.declare("sap.ushell.ui.launchpad.LoadingDialog");jQuery.sap.require("sap.ushell.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.ushell.ui.launchpad.LoadingDialog",{metadata:{library:"sap.ushell",properties:{"iconUri":{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},"text":{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},"loadAnimationWithInterval":{type:"boolean",group:"Appearance",defaultValue:true}}}});(function(){"use strict";jQuery.sap.require("sap.ui.core.Icon");jQuery.sap.require("sap.ui.core.Popup");jQuery.sap.require("sap.m.Label");jQuery.sap.require('sap.ushell.ui.launchpad.AccessibilityCustomData');sap.ushell.ui.launchpad.LoadingDialog.prototype.init=function(){this._oPopup=new sap.ui.core.Popup();this._oPopup.restoreFocus=false;this._oPopup.setShadow(false);this._oPopup.setModal(true,"sapUshellLoadingDialog");this.oIcon=new sap.ui.core.Icon();this._sLabelId=this.getId()+'loadingLabel';this._oLabel=new sap.m.Label(this._sLabelId);};sap.ushell.ui.launchpad.LoadingDialog.prototype.exit=function(){this._oPopup.close();this._oPopup.destroy();this.oIcon.destroy();this._oLabel.destroy();};sap.ushell.ui.launchpad.LoadingDialog.prototype.isOpen=function(){return this._oPopup.isOpen();};sap.ushell.ui.launchpad.LoadingDialog.prototype.openLoadingScreen=function(){if(this.getLoadAnimationWithInterval()){this.toggleStyleClass('sapUshellVisibilityHidden',true);this._iTimeoutId=setTimeout(function(){this.toggleStyleClass('sapUshellVisibilityHidden',false);}.bind(this),3000);}else{this.toggleStyleClass('sapUshellVisibilityHidden',false);}if(!this.getVisible()){this.setProperty('visible',true,true);this.$().show();}if(!this.isOpen()){if(!this._oPopup.getContent()){this._oPopup.setContent(this);}this._oPopup.setPosition("center center","center center",document,"0 0","fit");this._oPopup.open();}};sap.ushell.ui.launchpad.LoadingDialog.prototype.setLoadAnimationWithInterval=function(s){this.setProperty('loadAnimationWithInterval',s,true);};sap.ushell.ui.launchpad.LoadingDialog.prototype.showAppInfo=function(a,i,A){this.setProperty('text',a,true);this.setProperty('iconUri',i,true);this.oIcon.setSrc(i);this._oLabel.setText(a);};sap.ushell.ui.launchpad.LoadingDialog.prototype.closeLoadingScreen=function(){if(this._iTimeoutId){clearTimeout(this._iTimeoutId);}this._oLabel.setText("");if(this.getVisible()){this.setProperty('visible',false,true);this.$().hide();this._oPopup.close();}};sap.ushell.ui.launchpad.LoadingDialog.prototype.onAfterRendering=function(){this.$().css("width","20rem");setTimeout(function(){this._oPopup.setContent(this.getDomRef());}.bind(this),0);};sap.ushell.ui.launchpad.LoadingDialog.prototype.setText=function(t){this.setProperty("text",t,true);var j=jQuery("#"+this._sLabelId);if(j&&j[0]){j[0].textContent=t;}};}());
