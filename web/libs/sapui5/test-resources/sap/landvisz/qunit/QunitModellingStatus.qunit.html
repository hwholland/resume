<!DOCTYPE HTML>
<!-- 
  Tested control/class: sap.landvisz.LandscapeEntity
  Author: SAP
-->

<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>Qunit for Landscape Entity Control</title>
	<script id="sap-ui-bootstrap" 
		type="text/javascript"
		src="../../../../resources/sap-ui-core.js"
		data-sap-ui-theme="sap_goldreflection"
		data-sap-ui-language="en-US"
		data-sap-ui-noConflict="true"
		data-sap-ui-libs="sap.ui.commons,sap.ui.ux3,sap.landvisz"
		data-sap-ui-preload="false">
	</script>
	<link rel="stylesheet" href="../../../../resources/sap/ui/thirdparty/qunit.css" type="text/css" media="screen" />
	<script type="text/javascript" src="../../../../resources/sap/ui/thirdparty/qunit.js"></script>
	<script type="text/javascript" src="../../../../resources/sap/ui/qunit/qunit-junit.js"></script>
	<script type="text/javascript" src="../../../../resources/sap/ui/qunit/QUnitUtils.js"></script>
	<!-- Control initialization -->

<script language="javascript">

 

var myModel = {
		name : "J01",
		//tooltip : "Am a Overall tooltip",
		type : "TechnicalSystem",
		qualifierText : "ABAP",
		qualifierTooltip : "ABAP Server System",
		qualifierType : "Abap",
		id : "aminId",
		renderingSize : "Regular",
		defaultState : "NotSelected",
		description : "Am in Description",
	
	myHeaders: [ { header :"OverView",selected: false, properties:[{ label :"OS",value:"Windows"},
	         	                                  { label :"DB",value:"DB2"}
	         	]},

	    	 { header :"Product",selected: false,properties:  [{ label :"SAP ERP", value:"",iconType:"p",iconTitle:"Product"}]
	    	 },
	    	 { header :"ProductVersion",selected: true,properties:  [{ label :"SAP ERP 6.0",value:"",iconType:"pv",iconTitle:"ProductVersion"}]
	    	 }
	    	 
	    ],
	  actions: [{action: "Relations",icon: "http://upload.wikimedia.org/wikipedia/commons/5/59/SAP_2011_logo.svg"},{ action:"copy"},{ action: "paste", icon:"http://upload.wikimedia.org/wikipedia/commons/5/59/SAP_2011_logo.svg"}] ,
	};

var oLandEntity = new sap.landvisz.LandscapeEntity({

   systemName : "{/name}",
	//tooltip : "{/tooltip}",
	type : sap.landvisz.LandscapeObject.TechnicalSystem,
	qualifierText : "{/qualifierText}",
	qualifierTooltip : "{/qualifierTooltip}",
	qualifierType : sap.landvisz.TechnicalSystemType.ABAP,
	id : "aminId",
	renderingSize : sap.landvisz.EntityCSSSize.Medium,
	enabled : true,
	visible : true,
	defaultState : "{/defaultState}",
	description : "{/description}",
	systemStatus : sap.landvisz.ModelingStatus.WARNING,
	showCustomActions: true,
	showEntityActions: true

});
var oModel = new sap.ui.model.json.JSONModel();
oModel.setData(myModel);
oLandEntity.setModel(oModel);

var oDataContainer = new sap.landvisz.internal.DataContainer({ header : "{header}",selected:"{selected}" });
var oRowField = new sap.landvisz.internal.LinearRowField({ label:"{label}",value:"{value}",iconTitle:"{iconTitle}",iconType:"{iconType}"});
oDataContainer.bindAggregation("properties","properties",oRowField);
oLandEntity.bindAggregation("dataContainers","/myHeaders",oDataContainer);
var oActionBar =  new sap.landvisz.internal.ActionBar({actionLabel: "{action}", iconSrc:"{icon}"});
oLandEntity.bindAggregation("actionBar","/actions",oActionBar);



    oLandEntity.placeAt("content");
		    
		  //Tests Starts
						
		module("ModellingStatusCreation");
			test("ModellingStatusCreationOk", function() {
				var oDomRef = jQuery.sap.domById("aminId-CLVEntityModelingStatus");
	    		ok(oDomRef, "Modelling status icon exist in the page");
	    		equals(false, (oLandEntity.getSystemStatus() === sap.landvisz.ModelingStatus.NORMAL), "errors or warnings reported");
	    		equals(false, (oLandEntity.getSystemStatus() === sap.landvisz.ModelingStatus.ERROR), "System is erroneous");
	    		equals(true, (oLandEntity.getSystemStatus() === sap.landvisz.ModelingStatus.WARNING), "Warning icon is not rendered");
	    		
				
	    					
			});	
			

</script>	

</head>
 <body class="sapUiBody">
       	<h1 id="qunit-header">QUnit Page for CLV UI5 Custom Actions Control</h1>
		<h2 id="qunit-banner"></h2>
		<h2 id="qunit-userAgent"></h2>
		<ol id="qunit-tests"></ol>
		<div id="qunit-fixture">test markup, will be hidden</div>
		<div id="content">
       </div>
       </body>
</html>