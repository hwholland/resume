<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />

		<title>QUnit: Annotation Helper</title>

		<base href="../../../../../../../../">
		<!--[if lte IE 9]><script type="text/javascript">
		(function() {
			var baseTag = document.getElementsByTagName('base')[0];
			baseTag.href = baseTag.href;
		})();
		</script><![endif]-->

		<script id="sap-ui-bootstrap"
			type="text/javascript"
			src="resources/sap-ui-core.js"
			data-sap-ui-theme="sap_bluecrystal"
			data-sap-ui-noConflict="true"
		></script>

		<link rel="stylesheet" href="resources/sap/ui/thirdparty/qunit.css" type="text/css" media="screen" />
		<script type="text/javascript" src="resources/sap/ui/thirdparty/qunit.js"></script>
		<script type="text/javascript" src="resources/sap/ui/qunit/qunit-junit.js"></script>
		<script type="text/javascript" src="resources/sap/ui/qunit/QUnitUtils.js"></script>

		<script type="text/javascript">
		sap.ui.require([


						"sap/suite/ui/generic/template/js/AnnotationHelper",
		        		"sap/suite/ui/generic/template/lib/TemplateComponent",
		        		"sap/ui/core/util/MockServer",
		        		"sap/ui/base/Interface",
		        		"sap/ui/thirdparty/sinon",
		        		"sap/ui/thirdparty/sinon-qunit"

		   ],function(){
			module("Basic checks: AnnotationHelper", {

				setup: function() {
					this.oAnnotationHelper = sap.suite.ui.generic.template.js.AnnotationHelper;
					this.oTemplate = new sap.suite.ui.generic.template.lib.TemplateComponent();
					//var Interface_test = sinon.createStubInstance("sap.ui.base");
					var Interface_test = sap.ui.base.Interface;


				},

				teardown: function() {
					this.oAnnotationHelper = null;
				},

				getMockModel: function() {

					var oModel, oMockServer;
					// the mockservice to get a suitable MetadataModel

					oMockServer = new sap.ui.core.util.MockServer({
						rootUri: "/sap/opu/odata/sap/SEPMRA_PROD_MAN/"
					});
					// take the mock meta data file from the demokit product application
					oMockServer.simulate("test-resources/sap/suite/ui/generic/template/demokit/sample.manage.products/webapp/localService/metadata.xml", {
						sMockdataBaseUrl: "test-resources/sap/suite/ui/generic/template/demokit/sample.manage.products/webapp/localService/",
						bGenerateMissingMockData: true
					});
					oMockServer.start();

					// setting up model
					oModel = new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/sap/SEPMRA_PROD_MAN/", {
						// both anntoations files are needed to have a suitabel meta model
						annotationURI: [
							"test-resources/sap/suite/ui/generic/template/demokit/sample.manage.products/webapp/localService/annotations.xml",
							"test-resources/sap/suite/ui/generic/template/demokit/sample.manage.products/webapp/annotations/annotations.xml"
						]
					});

					oModel.setSizeLimit(10);
					return oModel;
				}

			});

			// You can have any number of calls to the 'test' function, one for each unit test you want to run
			// setup gets run before any test, and teardown gets run after all of the tests have finished

			QUnit.test("instance AnnotationHelper available", function() {
				ok(this.oAnnotationHelper);
			});

			QUnit.test("has method validation: isSelf", function() {
				equal(typeof this.oAnnotationHelper.isSelf, "function", "isSelf function availability");
				equal(typeof this.oAnnotationHelper.number, "function", "number function availability");
				equal(typeof this.oAnnotationHelper.formatColor, "function", "formatColor function availability");
				equal(typeof this.oAnnotationHelper.createP13N, "function", "createP13N function availability");
				equal(typeof this.oAnnotationHelper.hasActions, "function", "hasActions function availability");
			});
			QUnit.test("executes function: isSelf", function() {
				bBool = this.oAnnotationHelper.isSelf();
				assert.ok(bBool, "isSelf executed with undefined path");
				bBool = this.oAnnotationHelper.isSelf("@com.sap.vocabularies.UI.v1.Identification");
				assert.ok(bBool, "isSelf executed with @ at beginning");
				bBool = this.oAnnotationHelper.isSelf("abc@sap.com");
				assert.ok(!bBool, "isSelf executed with @ in the middle");
			});

			/* New Qunit test cases */
			/* Test cases for number function*/
			 //module('number function');

			QUnit.test("executes function: number", function() {
				bBool = this.oAnnotationHelper.number("3423ads");
				assert.ok(!bBool, "number executed with number and character");

				bBool = this.oAnnotationHelper.number("");
				assert.ok(!bBool, "number executed with empty values");

				bBool = this.oAnnotationHelper.number("23423");
				assert.equal(!bBool,true, "number executed with number and character");

				bBool = this.oAnnotationHelper.number("23423.23423");
				assert.equal(!bBool , true , "number with decimel values");
			});

			[
				{result: "true"},
				{result: "2015-03-24"},
				{result: "2015-03-24T14:03:27Z"},
				{result: "-123456789012345678901234567890.1234567890"},
				{result: "-7.4503e-36"},
				{result: "0050568D-393C-1ED4-9D97-E65F0F3FCC23"},
				{result: "9007199254740992"},
				{result: "13:57:06"}
			].forEach(function (oFixture) {

				QUnit.test("Inputs for number function:" + oFixture.result, function () {
					//expect(0);
					bBool = this.oAnnotationHelper.number(oFixture.result);
					assert.notEqual(bBool,true,"Not Equal : "+oFixture.result);
				});
			});

			[
				{typeName: "Decimal", result: {Decimal: "12345666.1231232"}},

			].forEach(function (oFixture) {
				QUnit.test("Constant Parameters Equal:" + oFixture.result, function () {
					result = {Decimal: "12345666.1231232"};
					bBool = this.oAnnotationHelper.number(oFixture.result);
					assert.equal(bBool,"12345666.1231232","Equal : "+result);
				});
			});

			[
				{typeName: "path", result: {Path: "12345666.1231232"}}

			].forEach(function (oFixture) {
				QUnit.test("Deep Equal:" + oFixture.result, function () {
					result = {Path: "12345666.1231232"};
					bBool = this.oAnnotationHelper.number(oFixture.result);
					assert.deepEqual(bBool,"{12345666.1231232}","Deep Equal : "+result);
				});
			});


			QUnit.test("has method validation: formatColor", function() {
				//This funciton is not used in the demokit app. but just basic test
				var Result = this.oAnnotationHelper.formatColor("3423");
				assert.equal(Result,undefined,"Function should returned undefined value");
			});


			QUnit.test("has method validation: strictEqual", function() {
				expect(1);
				var Par;
				var i = 0;
				Par = [{RecordType: "com.sap.vocabularies.UI.v1.DataFieldForAction"}];
				actions = this.oAnnotationHelper.hasActions(Par);
				strictEqual(actions, true, "hasActions function working with RecordType");
			});

			QUnit.test("has method validation 1: strictEqual", function() {
				expect(1);
				var Par;
				var i = 0;
				Par = [{RecordType: "com.sap.vocabularies.UI.v1.DataFieldForAction"},
				       {RecordType: "com.sap.vocabularies.UI.v1.DataFieldForAction"}];
				actions = this.oAnnotationHelper.hasActions(Par);
				strictEqual(actions, true, "hasActions function working with RecordType");
			});

			/*QUnit.test("createP13N Function", function() {
				var oContextSet, oContextProp, oDataField;
				oContextSet = {
						name : "SalesOrder",
						entityType : "COLLE.SalesOrderType",
						extensions : {
							name: "searchable",
							namespace : "http://www.sap.com/Protocols/SAPData",
							value : "true"
						},
						"Org.OData.Capabilities.V1.SortRestrictions": {
							"NonSortableProperties": {PropertyPath: "ActiveSalesOrderID",
						PropertyPath: "SalesOrderDraftUUID",PropertyPath: "ApprovalComment"},
						},
				        entityType : "COLLE.SalesOrderType"

					};
				oContextProp = {
						name: "ActiveSalesOrderID", type: "Edm.String", nullable: "false", maxLength: "10",
						entityType: "COLLE.SalesOrderType",
						"Org.OData.Core.V1.Computed":{Bool: "true"},
						"com.sap.vocabularies.Common.v1.Label": {
							String: "Sales Order ID (Active Document)"
						},
				        entityType: "COLLE.SalesOrderType",
				        extensions: {
							name: "label",
							namespace: "http://www.sap.com/Protocols/SAPData",
							value: "Sales Order ID (Active Document)"
						},

					};
				oDataField = {
						EdmType: "Edm.String", RecordType: "com.sap.vocabularies.UI.v1.DataField",
						Value: {
							Path: "ActiveSalesOrderID"
						},
						"com.sap.vocabularies.UI.v1.Importance" :{
							EnumMember: "com.sap.vocabularies.UI.v1.ImportanceType/High"
						}
				};
				var oTestMetaModel = sinon.createStubInstance(sap.ui.model.odata.ODataMetaModel);
				var oTestModel = sinon.createStubInstance(sap.ui.model.odata.ODataModel);
				//oTestModel.getMetaModel.returns(oTestMetaModel);
				this.oTemplate.setModel(oTestModel);
				//var spy = sinon.spy(sap.suite.ui.generic.template.js.AnnotationHelper, "createP13N");
				this.oAnnotationHelper.createP13N(oContextSet, oContextProp, oDataField);
				ExpectedValue ="\\{\"columnKey\":\"ActiveSalesOrderID\", \"leadingProperty\":\"ActiveSalesOrderID\", \"sortProperty\":\"ActiveSalesOrderID\", \"filterProperty\":\"ActiveSalesOrderID\" \\}";
				assert.equal(this.oAnnotationHelper.createP13N(oContextSet, oContextProp, oDataField),ExpectedValue, "should return Expected Value:"+ExpectedValue);

				//add apply in the oDatafield to run else part
				oDataField = {EdmType: "Edm.String",
						Value: {
							Path: "",
							Apply:{Name:"odata.concat", Parameters:[{Type:"Path", Value:"DraftAdministrativeData/SiblingEntity"},{Type:"Path", Value:"DraftAdministrativeData/SiblingEntity"}]}
						}
						};
				ExpectedValue ="\\{\"columnKey\":\"DraftAdministrativeData/SiblingEntity\", \"leadingProperty\":\"DraftAdministrativeData/SiblingEntity\", \"additionalProperty\":\"DraftAdministrativeData/SiblingEntity\", \"sortProperty\":\"ActiveSalesOrderID\", \"filterProperty\":\"ActiveSalesOrderID\" \\}";
				assert.equal(this.oAnnotationHelper.createP13N(oContextSet, oContextProp, oDataField),ExpectedValue, "should return Expected Value:"+ExpectedValue);
				//Mock the oContextProp values

				oContextProp = {"com.sap.vocabularies.Common.v1.Text":{Path:"ActiveSalesOrderID"}};
				var oResult = this.oAnnotationHelper.createP13N(oContextSet, oContextProp, oDataField);
				ExpectedValue = "\\{\"columnKey\":\"DraftAdministrativeData/SiblingEntity\", \"leadingProperty\":\"DraftAdministrativeData/SiblingEntity\", \"additionalProperty\":\"DraftAdministrativeData/SiblingEntity,ActiveSalesOrderID\", \"sortProperty\":\"undefined\", \"filterProperty\":\"undefined\" \\}";
				assert.equal(oResult,ExpectedValue,"should return Expected Value:"+ExpectedValue);

				//Different Mock oDataField values
				oDataField = {
						RecordType: "com.sap.vocabularies.UI.v1.DataFieldWithUrl",
						Url:{Apply:{Name:"odata.concat", Parameters:[{Type:"LabeledElement", Value:"DraftAdministrativeData/SiblingEntity"},{Type:"Path", Value:"DraftAdministrativeData/SiblingEntity"}]}},
						Value: {
							Path: "ActiveSalesOrderID"
						},
						"com.sap.vocabularies.UI.v1.Importance" :{
							EnumMember: "com.sap.vocabularies.UI.v1.ImportanceType/High"
						}
				};
				oResult = this.oAnnotationHelper.createP13N(oContextSet, oContextProp, oDataField);
				ExpectedValue = "\\{\"columnKey\":\"ActiveSalesOrderID\", \"leadingProperty\":\"ActiveSalesOrderID\", \"additionalProperty\":\"ActiveSalesOrderID,undefined\", \"sortProperty\":\"undefined\", \"filterProperty\":\"undefined\" \\}";
				assert.equal(oResult,ExpectedValue,"should return Expected Value:"+ExpectedValue);
			});*/

				QUnit.test("check method formatWithExpandSimple with Mock data", function() {

				var oDataField = {EdmType: "Edm.String",Path: "Depth"};

				var done = assert.async();
				var oModel = this.getMockModel();
				assert.ok(oModel, "oModel Initiated");
				var oAnnotationHelper = this.oAnnotationHelper;

				if (oModel) {
					oModel.getMetaModel().loaded().then(function() {
						var oMetaModel = oModel.getMetaModel();
						var oInterface = {

									getModel: function () { return oMetaModel; },
									getPath: function(){return "/dataServices/schema/0/entityType/16/com.sap.vocabularies.UI.v1.DataPoint#ProductCategory/Value"; },
									getSetting: function(){return"";}
									};
						var oEntitySet = oMetaModel.getODataEntitySet("SEPMRA_C_PD_Product");
						var sResolvedPath = "/dataServices/schema/0/entityType/16/com.sap.vocabularies.UI.v1.Facets/1/Target";
						var sResultEntitySet = "{Depth}";
						//var sResultEntitySet = "{path:'Depth',type:'sap.ui.model.odata.type.Decimal',constraints:{'precision':'13','scale':'3'}}";


						var oMetaContext = oMetaModel.getContext(sResolvedPath);
						assert.ok(oMetaContext,"Metadata is correct");
						var sResult = oAnnotationHelper.formatWithExpandSimple(oMetaContext,oDataField);
						assert.equal(sResult, sResultEntitySet,"Input parameter Depth is a decimal value");

						//var binding_ex = oModel.bindList("/SEPMRA_I_ProductSalesData");
						//var binding_path = binding_ex.getPath();
						//var binding_length = oModel.bindContext(binding_path);

						//oDataField path value for Currency
						oDataField = {EdmType: "Edm.String",Path: "Currency"};
						sResult = oAnnotationHelper.formatWithExpandSimple(oMetaContext,oDataField);
						var ExpectedValue = "{Currency}";
						//var ExpectedValue = "{path:'Currency',type:'sap.ui.model.odata.type.String',constraints:{'maxLength':'5','nullable':'false'}}";
						assert.equal(sResult,ExpectedValue ,"Input parameter Currency is a decimal value");


						oDataField = {EdmType: "Edm.String",
								Apply:{Name:"odata.concat", Parameters:[{Type:"Path", Value:"DraftAdministrativeData/SiblingEntity"},{Type:"Path", Value:"DraftAdministrativeData/SiblingEntity"}]}};
						sResult = oAnnotationHelper.formatWithExpandSimple(oInterface,oDataField);
						//var ExpectedValue = "{Currency}";
						ExpectedValue = "{DraftAdministrativeData/SiblingEntity}{DraftAdministrativeData/SiblingEntity}";
						assert.equal(sResult,ExpectedValue ,"Input parameter Currency is a decimal value");

						done();

					});
				}
			});

			QUnit.test("check method _getNavigationPrefix with Mock data", function() {
				var oDataField = {EdmType: "Edm.String",Path: "Depth"};
				var done = assert.async();
				var oModel = this.getMockModel();
				assert.ok(oModel, "oModel Initiated");
				var oAnnotationHelper = this.oAnnotationHelper;
				if (oModel) {
					oModel.getMetaModel().loaded().then(function() {
						var oMetaModel = oModel.getMetaModel();
						assert.ok(oMetaModel,"Metamodel is ok ");
						//var oEntitySet = oMetaModel.getODataEntitySet("SEPMRA_C_PD_Product");
						var oEntityType = oMetaModel.getODataEntityType("SEPMRA_PROD_MAN.SEPMRA_C_PD_ProductType");
						var sProperty = "Product/ActiveProduct";
						// function call with oMetaModel, oEntityType, sProperty

						var sResult = oAnnotationHelper._getNavigationPrefix(oMetaModel,oEntityType,sProperty);
						assert.equal(sResult,"","Function returned null value");

						//mock different value for sProperty..
						sProperty = "DraftAdministrativeData";

						sResult = oAnnotationHelper._getNavigationPrefix(oMetaModel,oEntityType,sProperty);
						assert.equal(sResult,"","Function should return the null value for single property");

						sProperty = "DraftAdministrativeData/SiblingEntity";
						sResult = oAnnotationHelper._getNavigationPrefix(oMetaModel,oEntityType,sProperty);
						assert.equal(sResult,"DraftAdministrativeData","Function should return expected value: DraftAdministrativeData");
						done();

					});
				}
			});

			QUnit.test("check method getStableIdPartFromDataField with Mock data", function() {
				var oDataField = {
						EdmType: "Edm.String", RecordType: "com.sap.vocabularies.UI.v1.DataField",
						Value: {
							Path: "ActiveSalesOrderID"
						},
						"com.sap.vocabularies.UI.v1.Importance" :{
							EnumMember: "com.sap.vocabularies.UI.v1.ImportanceType/High"
						}
					};

						var sResult = this.oAnnotationHelper.getStableIdPartFromDataField(oDataField);
						assert.equal(sResult,"ActiveSalesOrderID","Function returned ActiveSalesOrderID value");
				//Mock oDatafield values with different values...
				oDataField = {
						Action:{String: "SEPMRA_PROD_MAN.SEPMRA_PROD_MAN_Entities/SEPMRA_C_PD_ProductCopy"},
						Label:{String: "Copy"},
						RecordType: "com.sap.vocabularies.UI.v1.DataFieldForAction",
						"com.sap.vocabularies.UI.v1.Importance":{EnumMember: "com.sap.vocabularies.UI.v1.ImportanceType/High"}
					};

				var expectedValue = "SEPMRA_PROD_MAN.SEPMRA_PROD_MAN_Entities::SEPMRA_C_PD_ProductCopy";
				sResult = this.oAnnotationHelper.getStableIdPartFromDataField(oDataField);
				assert.equal(sResult,expectedValue,"Function should return the expected value");

				//Mock record type and path as empty value
				oDataField = {
						Action:{String: "SEPMRA_PROD_MAN.SEPMRA_PROD_MAN_Entities/SEPMRA_C_PD_ProductCopy"},
						Label:{String: "Copy"},
						RecordType: "",
						"com.sap.vocabularies.UI.v1.Importance":{EnumMember: "com.sap.vocabularies.UI.v1.ImportanceType/High"}
					};
				//Mock Jquery error log
				var oErrorSpy = sinon.stub(jQuery.sap.log,"error");
		 		oErrorSpy.returns("test error msg");
				sResult = this.oAnnotationHelper.getStableIdPartFromDataField(oDataField);
				assert.equal(sResult,undefined,"Function should return undefined");
				// Test Jquery error is called
				assert.ok(oErrorSpy.calledOnce,"Function should call Jquery error log function");
				oErrorSpy.restore();

				//Mock SemanticObject
				oDataField = {
						SemanticObject:{String: "Copy",},
						RecordType: "com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation",

					};
				sResult = this.oAnnotationHelper.getStableIdPartFromDataField(oDataField);
				assert.equal(sResult,"Copy","Function should return the expected value");

				//Mock SemanticObject-path
				oDataField = {
						SemanticObject:{Path: "ActiveSalesOrderID",},
						RecordType: "com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation",

					};
				sResult = this.oAnnotationHelper.getStableIdPartFromDataField(oDataField);
				assert.equal(sResult,"ActiveSalesOrderID","Function should return the expected value");

				//Mock SemanticObject
				oDataField = {
						SemanticObject:{String: ""},
						Action:{String:"SEPMRA_PROD_MAN.SEPMRA_PROD_MAN_Entities/SEPMRA_C_PD_ProductCopy"},
						RecordType: "com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation",

					};
				expectedValue = "::SEPMRA_PROD_MAN.SEPMRA_PROD_MAN_Entities::SEPMRA_C_PD_ProductCopy";
				sResult = this.oAnnotationHelper.getStableIdPartFromDataField(oDataField);
				assert.equal(sResult,expectedValue,"Function should return the expected value");


				//Mock SemanticObject
				oDataField = {
						SemanticObject:{String: ""},
						Action:{Path: "ActiveSalesOrderID"},
						RecordType: "com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation",

					};
				expectedValue = "::ActiveSalesOrderID";
				sResult = this.oAnnotationHelper.getStableIdPartFromDataField(oDataField);
				assert.equal(sResult,expectedValue,"Function should return the expected value");
				oDataField = {EdmType: "Edm.String",
						Value: {
							Path: "",
							Apply:{Name:"odata.concat", Parameters:[{Type:"Path", Value:"DraftAdministrativeData/SiblingEntity"},{Type:"Path", Value:"DraftAdministrativeData/SiblingEntity"}]}
						},
						RecordType: "",

						};
				sResult = this.oAnnotationHelper.getStableIdPartFromDataField(oDataField);
				expectedValue = "DraftAdministrativeData::SiblingEntity::DraftAdministrativeData::SiblingEntity";
				assert.equal(sResult,expectedValue,"Function should return the expected value");

			});

			QUnit.test("check method getStableIdPartFromDataPoint with Mock data", function() {
				//oData Field for Products..
				var oDataField = {
						Description: {
							String: "EPM: Product Unit Price"
						}, LongDescription: {String: ""},
						Title: {String: "Price"},
						Value: {
							EdmType: "Edm.Decimal",
							Path: "Price"
						}};

						var sResult = this.oAnnotationHelper.getStableIdPartFromDataPoint(oDataField);
						assert.equal(sResult,"Price","Function returned Price value for Products");
					//Mock value as empty to test jquery log error
						oDataField = {
								Description: {
									String: "EPM: Product Unit Price"
								}, LongDescription: {String: ""},
								Title: {String: "Price"},
								Value: {
									EdmType: "Edm.Decimal",
									Path: ""
								}};
					var oErrorSpy = sinon.stub(jQuery.sap.log,"error");
			 		oErrorSpy.returns("test error msg");
					sResult = this.oAnnotationHelper.getStableIdPartFromDataPoint(oDataField);
					assert.equal(sResult,undefined,"Function should return undefined");
					// Test Jquery error is called
					assert.ok(oErrorSpy.calledOnce,"Function should call Jquery error log function");
					oErrorSpy.restore();
					//Mock oDataField values
					oDataField = {EdmType: "Edm.String",Value: {Path: "",
								Apply:{Name:"odata.concat", Parameters:[{Type:"Path", Value:"DraftAdministrativeData/SiblingEntity"},{Type:"Path", Value:"DraftAdministrativeData/SiblingEntity"}]}
							},	RecordType: ""};
					sResult = this.oAnnotationHelper.getStableIdPartFromDataPoint(oDataField);
					var expectedvalue ="DraftAdministrativeData::SiblingEntity::DraftAdministrativeData::SiblingEntity";
					assert.equal(sResult,expectedvalue,"Function should return the expected value");

			});

			QUnit.test("check method getStableIdPartFromFacet with Mock data", function() {
				//oData Field for Products..
				var Facets = {Facets:[{Label: {String: "General Information"},
					RecordType: "com.sap.vocabularies.UI.v1.ReferenceFacet",
					Target:{AnnotationPath: "@com.sap.vocabularies.UI.v1.FieldGroup#GeneralInformation"}}],
					Label:{String: "General Information"},
					RecordType: "com.sap.vocabularies.UI.v1.CollectionFacet"};

				var oAnnotationHelper = this.oAnnotationHelper;

				var oErrorSpy = sinon.stub(jQuery.sap.log,"error");
		 		oErrorSpy.returns("test error msg");
				var sResult = this.oAnnotationHelper.getStableIdPartFromFacet(Facets);
		 		assert.ok(oErrorSpy.calledOnce, "Error: Jquery error log called");
				//assert.equal(sResult,"Price","Function returned Price value for Products");
		 		oErrorSpy.restore();
		 		//Mock the Facets value....
		 		Facets = {ID:{String: "GeneralInformation"},RecordType: "com.sap.vocabularies.UI.v1.CollectionFacet"};
		 		sResult = this.oAnnotationHelper.getStableIdPartFromFacet(Facets);
		 		assert.equal(sResult,"GeneralInformation","Function should return expected value");

		 		//Mock the Facets value....
				Facets = {ID:{String: "GeneralInformation"},RecordType: "com.sap.vocabularies.UI.v1.ReferenceFacet",
					Target:{AnnotationPath: "@com.sap.vocabularies.UI.v1.FieldGroup#GeneralInformation"}};
				sResult = this.oAnnotationHelper.getStableIdPartFromFacet(Facets);
				var expectedValue ="GeneralInformation";
				assert.equal(sResult,expectedValue,"Function should return expected value:"+sResult);
				Facets = {RecordType: "com.sap.vocabularies.UI.v1.ReferenceFacet",
					Target:{AnnotationPath: "@com.sap.vocabularies.UI.v1.FieldGroup#GeneralInformation"}};
				sResult = this.oAnnotationHelper.getStableIdPartFromFacet(Facets);
				var expectedValue ="com.sap.vocabularies.UI.v1.FieldGroup::GeneralInformation";
				assert.equal(sResult,expectedValue,"Function should return expected value:"+sResult);
				//Mock RecordType value is empty and check error log is called
		 		Facets = {RecordType: "",};
		 		sResult = this.oAnnotationHelper.getStableIdPartFromFacet(Facets);
		 		assert.ok(oErrorSpy.calledOnce, "Error: Jquery error log called");
		 		oErrorSpy.restore();
			});

		    QUnit.test("check method getStableIdPartForDatafieldActionButton with Mock data", function() {
		    	var oDataField = {
                        RecordType: "com.sap.vocabularies.UI.v1.DataFieldForAction", 
                        Label: {
                            String: "ActionButton"
                        },
                        Action: {
                            String: "ActionFunction"
                        },
                        Inline: {
                        	Bool: "true"
                        }
                };
                var oFacet = {
                        RecordType: "com.sap.vocabularies.UI.v1.ReferenceFacet", 
                        Label: {
                            String: "ObjectPageActionButton"
                        },
                        Target: {
                            AnnotationPath: "NavigationProperty/@com.sap.vocabularies.UI.v1.LineItem"
                        }
                };
                var sResult = this.oAnnotationHelper.getStableIdPartForDatafieldActionButton(oDataField);
                assert.equal(sResult, "action::ActionFunction", "Action button stable ID for list report is correct.");
                var sResult = this.oAnnotationHelper.getStableIdPartForDatafieldActionButton(oDataField, oFacet);
                assert.equal(sResult, "NavigationProperty::com.sap.vocabularies.UI.v1.LineItem::action::ActionFunction", "Action button stable ID for object page is correct.");
		    });

			QUnit.test("check method extensionPointBeforeFacetExists with Mock data", function() {
				//oData Field for Products..
				var Facets = {Facets:[{Label: {String: "General Information"},
					RecordType: "com.sap.vocabularies.UI.v1.ReferenceFacet",
					Target:{AnnotationPath: "@com.sap.vocabularies.UI.v1.FieldGroup#GeneralInformation"}}],
					Label:{String: "General Information"},
					RecordType: "com.sap.vocabularies.UI.v1.CollectionFacet"};
					//var oEntitySet = oMetaModel.getODataEntitySet("SEPMRA_C_PD_Product");
					var oEntitySet = "SEPMRA_C_PD_Product";
					var sExtensionPointId = "";
					var oManifestExtend =[{'sap.suite.ui.generic.template.ObjectPage.view.Details':sExtensionPointId}];
					var oErrorSpy = sinon.stub(jQuery.sap.log,"error");
			 		oErrorSpy.returns("test error msg");
			 		// For time being test call is commented as in demokit also getting the same issue..
					//var sResult = this.oAnnotationHelper.extensionPointBeforeFacetExists(oEntitySet,Facets,oManifestExtend);
					//assert.equal(sResult,"Price","Function returned Price value for Products");
					//assert.ok(oErrorSpy.calledOnce,"test is ok");
					assert.ok("okay");
					oErrorSpy.restore();

			});

			QUnit.test("check method extensionPointAfterFacetExists with Mock data", function() {
				//oData Field for Products..
				var Facets = {Facets:[{Label: {String: "General Information"},
					RecordType: "com.sap.vocabularies.UI.v1.ReferenceFacet",
					Target:{AnnotationPath: "@com.sap.vocabularies.UI.v1.FieldGroup#GeneralInformation"}}],
					Label:{String: "General Information"},
					RecordType: "com.sap.vocabularies.UI.v1.CollectionFacet"};
					//var oEntitySet = oMetaModel.getODataEntitySet("SEPMRA_C_PD_Product");
					var oEntitySet = "SEPMRA_C_PD_Product";
					var sExtensionPointId = "";
					var oManifestExtend =[{'sap.suite.ui.generic.template.ObjectPage.view.Details':sExtensionPointId}];
					var oErrorSpy = sinon.stub(jQuery.sap.log,"error");
			 		oErrorSpy.returns("test error msg");
			 		// For time being test call is commented as in demokit also getting the same issue..
					//var sResult = this.oAnnotationHelper.extensionPointAfterFacetExists(oEntitySet,Facets,oManifestExtend);
					//assert.equal(sResult,"Price","Function returned Price value for Products");
					//assert.ok(oErrorSpy.calledOnce,"test is ok");
					assert.ok("okay");
					oErrorSpy.restore();

			});

			QUnit.test("check method getExtensionPointBeforeFacetTitle with Mock data", function() {
				//oData Field for Products..
				var Facets = {Facets:[{Label: {String: "General Information"},
					RecordType: "com.sap.vocabularies.UI.v1.ReferenceFacet",
					Target:{AnnotationPath: "@com.sap.vocabularies.UI.v1.FieldGroup#GeneralInformation"}}],
					Label:{String: "General Information"},
					RecordType: "com.sap.vocabularies.UI.v1.CollectionFacet"};
					//var oEntitySet = oMetaModel.getODataEntitySet("SEPMRA_C_PD_Product");
					var oEntitySet = "SEPMRA_C_PD_Product";
					var sExtensionPointId = "";
					var oManifestExtend =[{'sap.suite.ui.generic.template.ObjectPage.view.Details':sExtensionPointId}];
					var oErrorSpy = sinon.stub(jQuery.sap.log,"error");
			 		oErrorSpy.returns("test error msg");
			 		// For time being test call is commented as in demokit also getting the same issue..
					//var sResult = this.oAnnotationHelper.getExtensionPointBeforeFacetTitle(oEntitySet,Facets,oManifestExtend);
					//assert.equal(sResult,"Price","Function returned Price value for Products");
					//assert.ok(oErrorSpy.calledOnce,"test is ok");
					assert.ok("okay");
					oErrorSpy.restore();

			});
			QUnit.test("check method getExtensionPointAfterFacetTitle with Mock data", function() {
				//oData Field for Products..
				var Facets = {Facets:[{Label: {String: "General Information"},
					RecordType: "com.sap.vocabularies.UI.v1.ReferenceFacet",
					Target:{AnnotationPath: "@com.sap.vocabularies.UI.v1.FieldGroup#GeneralInformation"}}],
					Label:{String: "General Information"},
					RecordType: "com.sap.vocabularies.UI.v1.CollectionFacet"};
					//var oEntitySet = oMetaModel.getODataEntitySet("SEPMRA_C_PD_Product");
					var oEntitySet = "SEPMRA_C_PD_Product";
					var sExtensionPointId = "";
					var oManifestExtend =[{'sap.suite.ui.generic.template.ObjectPage.view.Details':sExtensionPointId}];
					var oErrorSpy = sinon.stub(jQuery.sap.log,"error");
			 		oErrorSpy.returns("test error msg");
			 		// For time being test call is commented as in demokit also getting the same issue..
					//var sResult = this.oAnnotationHelper.getExtensionPointAfterFacetTitle(oEntitySet,Facets,oManifestExtend);
					//assert.equal(sResult,"Price","Function returned Price value for Products");
					//assert.ok(oErrorSpy.calledOnce,"test is ok");
					assert.ok("okay");
					oErrorSpy.restore();

			});

			QUnit.test("check method getRepeatIndex with Mock data", function() {
				// Mocking the variable value with path
				var oValue = {getInterface: function () {},
						getModel: function(){},
						getPath: function(){ return "/dataServices/schema/0/entityType/20/com.sap.vocabularies.UI.v1.SelectionFields/0";},
						getSetting: function(){}};

				var sResult = this.oAnnotationHelper.getRepeatIndex(oValue);
                assert.equal(sResult,"0000000010","Function should return the value 0000000010");

				// checking error assertion..
				oValue = {getInterface: function () {},
						getModel: function(){},
						getPath: function(){ return ""},
						getSetting: function(){}};
				var oErrorSpy = sinon.stub(jQuery.sap.log,"error");
		 		oErrorSpy.returns("test error msg");
				sResult = this.oAnnotationHelper.getRepeatIndex(oValue);
				assert.ok(oErrorSpy.calledOnce,"Jquery error should be called for failed test");
				oErrorSpy.restore();
			});

			QUnit.test("check method getRepeatIndex without Mock data", function() {
				// Mocking the variable value with path
				var oValue = {getInterface: function () {},
						getModel: function(){},
						getPath: function(){ },
						getSetting: function(){}};

				var oErrorSpy = sinon.stub(jQuery.sap.log,"error");
		 		oErrorSpy.returns("Annotation Helper: Unable to get index.");

				var sResult = this.oAnnotationHelper.getRepeatIndex(oValue);
				assert.equal(sResult,undefined,"Function returned value is undefined");

		 		assert.ok(oErrorSpy.calledOnce, "Error: Jquery error log called with wrong value");
		 		oErrorSpy.restore();

			});

			QUnit.test("check method getColumnListItemType with Mock data", function() {
				// Mocking the variable value with path
				var oListEntitySet = {name: "SEPMRA_C_PD_Product", entityType: "SEPMRA_PROD_MAN.SEPMRA_C_PD_ProductType"};
				var aSubPages = {
						component:{name: "sap.suite.ui.generic.template.ObjectPage"},
						entitySet: "SEPMRA_C_PD_Product",
						pages:[{"_comment_navigationProperty": "fsdfds",
						       component: { name: "sap.suite.ui.generic.template.ObjectPage"},
						       entitySet: "SEPMRA_C_PD_ProductText",
						       navigationProperty: "to_ProductText"}]
				};
			    var sResult = this.oAnnotationHelper.getColumnListItemType(oListEntitySet,aSubPages);
				assert.equal(sResult,"Inactive","Function returned value should be 'Inactive'");

			});

			QUnit.test("check method actionControlHeader with Mock data", function() {
				var sActionApplicablePath = "IsActiveEntity";
				var sEntityType = "SEPMRA_PROD_MAN.SEPMRA_C_PD_ProductType";
				var done = assert.async();
				var oModel = this.getMockModel();
				assert.ok(oModel, "oModel Initiated");
				var oAnnotationHelper = this.oAnnotationHelper;
				if (oModel) {
				oModel.getMetaModel().loaded().then(function() {
					var oMetaModel = oModel.getMetaModel();
					assert.ok(oMetaModel, "MetaModel is ok");
					var oInterface = {
							getInterface: function (){return{
								getModel: function () { return oMetaModel; },
								getPath: function(){return "/dataServices/schema/0/entityType/20/com.sap.vocabularies.UI.v1.SelectionFields/0"; },
								getSetting: function(){}}
								}};
				var sResult = oAnnotationHelper.actionControlHeader(oInterface, sActionApplicablePath, sEntityType);
				var ExpectedVal = "{= !${ui>/editable} && ${path: 'IsActiveEntity'} }";
				assert.equal(sResult,ExpectedVal,"Function returned the expected value");

				//Make empty value
				sActionApplicablePath = "";
				sResult = oAnnotationHelper.actionControlHeader(oInterface, sActionApplicablePath, sEntityType);
				ExpectedVal = "{= !${ui>/editable} }";
				assert.equal(sResult,ExpectedVal,"With the empty parameter");

				done();
					});
				}

			});


			QUnit.test("check method actionControlFooter with Mock data", function() {
				var sActionApplicablePath = "IsActiveEntity";
				var sEntityType = "SEPMRA_PROD_MAN.SEPMRA_C_PD_ProductType";
				var done = assert.async();
				var oModel = this.getMockModel();
				assert.ok(oModel, "oModel Initiated");
				var oAnnotationHelper = this.oAnnotationHelper;
				if (oModel) {
				oModel.getMetaModel().loaded().then(function() {
					var oMetaModel = oModel.getMetaModel();
					assert.ok(oMetaModel, "MetaModel is ok")
					var oInterface = {
							getInterface: function (){return{
								getModel: function () { return oMetaModel; },
								getPath: function(){return "/dataServices/schema/0/entityType/20/com.sap.vocabularies.UI.v1.SelectionFields/0"; },
								getSetting: function(){}}
								}};
				var sResult = oAnnotationHelper.actionControlFooter(oInterface, sActionApplicablePath, sEntityType);
				var ExpectedVal = "{path: 'IsActiveEntity'}";
				assert.equal(sResult,ExpectedVal,"Function returned the expected value");

				// make empty parameter
				sActionApplicablePath = "";
				sResult = oAnnotationHelper.actionControlFooter(oInterface, sActionApplicablePath, sEntityType);
				ExpectedVal = "true";
				assert.equal(sResult,ExpectedVal,"Function with the empty parameter");
				done();
					});
				}

			});



			QUnit.test("check method _actionControlExpand without the value sActionApplicablePath", function() {
				var sActionApplicablePath = "";
				var sEntityType = "SEPMRA_PROD_MAN.SEPMRA_C_PD_ProductType";
				var done = assert.async();
				var oModel = this.getMockModel();
				assert.ok(oModel, "oModel Initiated");
				var oAnnotationHelper = this.oAnnotationHelper;
				if (oModel) {
				oModel.getMetaModel().loaded().then(function() {
					var oMetaModel = oModel.getMetaModel();
					assert.ok(oMetaModel, "MetaModel is ok")
					var oInterface = {
							getInterface: function (){return{
								getModel: function () { return oMetaModel; },
								getPath: function(){return "/dataServices/schema/0/entityType/20/com.sap.vocabularies.UI.v1.SelectionFields/0"; },
								getSetting: function(){}}
								}};
				oAnnotationHelper._actionControlExpand(oInterface, sActionApplicablePath, sEntityType);
				assert.ok("Success");
				done();
					});
				}

			});

			QUnit.test("check method getEntityTypesForFormPersonalization with mock data", function() {
				var sActionApplicablePath = "";
				var sEntityType = "SEPMRA_PROD_MAN.SEPMRA_C_PD_ProductType";
				/*var Facets = {Facets:[{Label: {String: "Supplier"},
					RecordType: "com.sap.vocabularies.UI.v1.ReferenceFacet",
					Target:{AnnotationPath: "@com.sap.vocabularies.UI.v1.FieldGroup#GeneralInformation"}}],
					Label:{String: "General Information"},
					RecordType: "com.sap.vocabularies.UI.v1.CollectionFacet"};*/

				var done = assert.async();
				var oModel = this.getMockModel();
				assert.ok(oModel, "oModel Initiated");
				var oAnnotationHelper = this.oAnnotationHelper;
				if (oModel) {
				oModel.getMetaModel().loaded().then(function() {
					var Facets = {
							Target:{AnnotationPath: "to_Supplier/@com.sap.vocabularies.UI.v1.Identification"},
							Label:{String: "Supplier"},
							RecordType: "com.sap.vocabularies.UI.v1.ReferenceFacet"};
					var oMetaModel = oModel.getMetaModel();
					assert.ok(oMetaModel, "MetaModel is ok")
					var oEntitySet = oMetaModel.getODataEntitySet("SEPMRA_C_PD_Product");
					var oInterface = {
							getInterface: function (){return{
								getModel: function () { return oMetaModel; },
								getPath: function(){return "/dataServices/schema/0/entityType/20/com.sap.vocabularies.UI.v1.SelectionFields/0"; },
								getSetting: function(){}}
								}};
				var oResult = oAnnotationHelper.getEntityTypesForFormPersonalization(oInterface, Facets, oEntitySet);
				var ExpectedResult = "SEPMRA_C_PD_SupplierType";
				assert.equal(oResult,ExpectedResult,"Function should return single supplier entity set type");

				//mock more facet values from demokit application..
				 Facets ={"Facets":[{
						Target:{AnnotationPath: "to_Supplier/@com.sap.vocabularies.UI.v1.Identification"},
						Label:{String: "Supplier"},
						RecordType: "com.sap.vocabularies.UI.v1.ReferenceFacet"},
						{
							Target:{AnnotationPath: "@com.sap.vocabularies.UI.v1.FieldGroup#GeneralInformation"},
							Label:{String: "General Information"},
							RecordType: "com.sap.vocabularies.UI.v1.ReferenceFacet"},
							{
								Target:{AnnotationPath: "@com.sap.vocabularies.UI.v1.FieldGroup#TechnicalData"},
								Label:{String: "Technical Data"},
								RecordType: "com.sap.vocabularies.UI.v1.ReferenceFacet"}],
								"Label": {String: "General Information"},
								RecordType: "com.sap.vocabularies.UI.v1.CollectionFacet"
								};

				 ExpectedResult = "SEPMRA_C_PD_SupplierType, SEPMRA_C_PD_ProductType";
				 assert.ok(oEntitySet,"MetaConext is ok");
				 oResult = oAnnotationHelper.getEntityTypesForFormPersonalization(oInterface, Facets, oEntitySet);
				 assert.equal(oResult,ExpectedResult,"Function should return multiple values");
				 done();
					});
				}

			});

			QUnit.test("check method replaceSpecialCharsInId with mock data", function() {
				expect(3);
				sId = "SEPMRA_PROD_MAN.SEPMRA_PROD_MAN_Entities/SEPMRA_C_PD_ProductCopy";
				actions = this.oAnnotationHelper.replaceSpecialCharsInId(sId);
				var expectedValue = "SEPMRA_PROD_MAN.SEPMRA_PROD_MAN_Entities::SEPMRA_C_PD_ProductCopy";
				strictEqual(actions, expectedValue, "Function should return the expected value");

				// test with error mock data with space
				sId = " SEPMRA_PROD_MAN.SEPMRA_PROD_MAN_Entities/SEPMRA_C_PD_ProductCopy";
				var ErrorSpy = sinon.stub(jQuery.sap.log,"error");
		 		ErrorSpy.returns("Annotation Helper: Unable to get index.");
				var actionsNew = this.oAnnotationHelper.replaceSpecialCharsInId(sId);
				var expectedValueNew = " SEPMRA_PROD_MAN.SEPMRA_PROD_MAN_Entities::SEPMRA_C_PD_ProductCopy";
				strictEqual(actionsNew,expectedValueNew, "Function should return the expected value with space");
				// test the Jquery error log is called
				assert.ok(ErrorSpy.calledOnce, "Function should call the Jquery error function");
				ErrorSpy.restore();
			});

			QUnit.test("check method formatWithExpand and getNavigationPathWithExpand with mock data", function() {


				var done = assert.async();
				var oModel = this.getMockModel();
				assert.ok(oModel, "oModel Initiated");
				var oAnnotationHelper = this.oAnnotationHelper;
				if (oModel) {
				oModel.getMetaModel().loaded().then(function() {
					//Mock Odatafield value get from demokit app
					var oDataField = {
								EdmType: "Edm.Decimal",
								Path: "Price"
					};
				var oMetaModel = oModel.getMetaModel();
				assert.ok(oMetaModel,"MetaModel is ok");
				var oInterface = {
						getInterface: function (){return{
							getModel: function () { return oMetaModel; },
							getPath: function(){return "/dataServices/schema/0/entityType/16/com.sap.vocabularies.UI.v1.DataPoint#ProductCategory/Value"; },
							getSetting: function(){}}
							}};
				//Mock Entityset...
				var oEntitySet = oMetaModel.getODataEntitySet("SEPMRA_C_PD_Product");
				var Result = oAnnotationHelper.formatWithExpand(oInterface,oDataField,oEntitySet);
				//var expectedValue = "{path:'Price',type:'sap.ui.model.odata.type.Decimal',constraints:{'precision':'16','scale':'3'}}";
				var expectedValue = "{Price}";
				assert.equal(Result,expectedValue,"Function should return expected object values");

				//testing with function getNavigationPathWithExpand ...
				Result = oAnnotationHelper.getNavigationPathWithExpand(oInterface,oDataField,oEntitySet);
				var expectedValue = "{}";
				assert.equal(Result,expectedValue,"Function should return empty object values");

				//Mock the oDataField value
				oDataField = {
							EdmType: "Edm.Decimal",
							Path: "DraftAdministrativeData/SiblingEntity"
				};
				Result = oAnnotationHelper.getNavigationPathWithExpand(oInterface,oDataField,oEntitySet);
				//var expectedValue = "{DraftAdministrativeData}";
				var expectedValue = "{}";
				assert.equal(Result,expectedValue,"Without Expand, function should return the expected object");

				//Changing getPath value to navigate into more conditions...
				oInterface = {
						getInterface: function (){return{
							getModel: function () { return oMetaModel; },
							getPath: function(){return "/dataServices/schema/0/entityType/16/com.sap.vocabularies.UI.v1.Facets/0/Facets/2/Target"; },
							getSetting: function(){}}
							}};
				oDataField = {
						EdmType: "Edm.Decimal",
						AnnotationPath: "to_ProductCategory/@com.sap.vocabularies.UI.v1.Identification"
				};
				//expectedValue = "{to_ProductCategory}";
				expectedValue = "{}";
				Result = oAnnotationHelper.getNavigationPathWithExpand(oInterface,oDataField,oEntitySet);
				assert.equal(Result,expectedValue,"Without Expand, function should return the expected object");
				done();
				});
			    }

			});

			QUnit.test("check method extensionPointFragmentExists", function() {
				var oFacet = {
					"Label": {
						"String": "{@i18n>@ProductDescriptions}"
					},
					"RecordType": "com.sap.vocabularies.UI.v1.ReferenceFacet",
					"Target": {
						"AnnotationPath": "to_EntitySet/@com.sap.vocabularies.UI.v1.LineItem"
					}
				};
				var sFragmentId1 = "to_EntitySet::com.sap.vocabularies.UI.v1.LineItem";
				var sFragmentId2 = "to_EntitySetX::com.sap.vocabularies.UI.v1.LineItem";
				var oAnnotationHelper = this.oAnnotationHelper
				var result;
				result = oAnnotationHelper.extensionPointFragmentExists(oFacet, sFragmentId1);
				assert.equal(result, true);
				result = oAnnotationHelper.extensionPointFragmentExists(oFacet, sFragmentId2);
				assert.equal(result, false);
			});

			QUnit.test("check isComplexTable", function() {
				var oAnnotationHelper = this.oAnnotationHelper;
				var oRouteConfig_ListReport = {
						"component": {
							"settings": {
							}
						}
					};
				var oRouteConfig_ComplexTable = {
						"navigationProperty": "to_Item",
						"component": {
							"list": true,
							"settings": {
								"complexListId": "42"
							}
						}
					};
				var result;
				result = oAnnotationHelper.isComplexTable(oRouteConfig_ListReport);
				assert.equal(result, false);
				result = oAnnotationHelper.isComplexTable(oRouteConfig_ComplexTable);
				assert.equal(result, true);
			});

			QUnit.test("check getPersistencyKeyForSmartTable", function() {
				var oAnnotationHelper = this.oAnnotationHelper;
				var oRouteConfig_ListReport = {
						"component": {
							"settings": {
							}
						}
					};
				var oRouteConfig_ComplexTable = {
						"navigationProperty": "to_Item",
						"component": {
							"list": true,
							"settings": {
								"complexListId": "42"
							}
						}
					};
				var result;
				result = oAnnotationHelper.getPersistencyKeyForSmartTable(oRouteConfig_ListReport);
				assert.equal(result, "listReportFloorplanTable");
				result = oAnnotationHelper.getPersistencyKeyForSmartTable(oRouteConfig_ComplexTable);
				assert.equal(result, "42");
			});

			QUnit.test("check hasCustomActions for ListReport", function() {
				var oAnnotationHelper = this.oAnnotationHelper;
				var oRouteConfig = {
						"navigationProperty": "to_Item",
						"component": {
							"settings": {
								"complexListId": "42"
							}
						}
					};
				var sEntitySet = "SomeEntitySet";
				var sEntitySetBad = "SomeBadEntitySet";
				var oManifestExt = {
					"sap.suite.ui.generic.template.ListReport.view.ListReport": {
						"sap.ui.generic.app": {
							"SomeEntitySet": {
								"EntitySet": "SomeEntitySet",
									"Actions" : {
									"SomeAction" : {
										"id" : "SomeAction",
										"text" : "SomeAction",
										"press" : "onSomeAction"
									}
								}
							}
						}
					}
				};
				var oManifestExt_SelectionFalse = {
					"sap.suite.ui.generic.template.ListReport.view.ListReport": {
						"sap.ui.generic.app": {
							"SomeEntitySet": {
								"EntitySet": "SomeEntitySet",
								"Actions" : {
									"SomeAction" : {
										"id" : "SomeAction",
										"text" : "SomeAction",
										"press" : "onSomeAction",
										"requiresSelection" : false
									}
								}
							}
						}
					}
				};
				var result;
				result = oAnnotationHelper.hasCustomActions(oRouteConfig, sEntitySet, oManifestExt);
				assert.equal(result, true);
				result = oAnnotationHelper.hasCustomActions(oRouteConfig, sEntitySet, oManifestExt_SelectionFalse);
				assert.equal(result, false);
				result = oAnnotationHelper.hasCustomActions(oRouteConfig, sEntitySetBad, oManifestExt);
				assert.equal(result, false);
			});

			QUnit.test("check hasCustomActions for ComplexTable", function() {
				var oAnnotationHelper = this.oAnnotationHelper;
				var oRouteConfig = {
						"navigationProperty": "to_Item",
						"component": {
							"list": true,
							"settings": {
								"complexListId": "42"
							}
						}
					};
				var sEntitySet = "SomeEntitySet";
				var sEntitySetBad = "SomeBadEntitySet";
				var oManifestExt = {
					"sap.suite.ui.generic.template.ListReport.view.ComplexTable": {
						"sap.ui.generic.app": {
							"SomeEntitySet": {
								"EntitySet": "SomeEntitySet",
									"Actions" : {
									"SomeAction" : {
										"id" : "SomeAction",
										"text" : "SomeAction",
										"press" : "onSomeAction"
									}
								}
							}
						}
					}
				};
				var oManifestExt_SelectionFalse = {
					"sap.suite.ui.generic.template.ListReport.view.ComplexTable": {
						"sap.ui.generic.app": {
							"SomeEntitySet": {
								"EntitySet": "SomeEntitySet",
								"Actions" : {
									"SomeAction" : {
										"id" : "SomeAction",
										"text" : "SomeAction",
										"press" : "onSomeAction",
										"requiresSelection" : false
									}
								}
							}
						}
					}
				};
				var result;
				result = oAnnotationHelper.hasCustomActions(oRouteConfig, sEntitySet, oManifestExt);
				assert.equal(result, true);
				result = oAnnotationHelper.hasCustomActions(oRouteConfig, sEntitySet, oManifestExt_SelectionFalse);
				assert.equal(result, false);
				result = oAnnotationHelper.hasCustomActions(oRouteConfig, sEntitySetBad, oManifestExt);
				assert.equal(result, false);
			});

			QUnit.test("check hasCustomActions for fragment (Object Page table)", function() {
				var oAnnotationHelper = this.oAnnotationHelper;
				var oRouteConfig = {};
				var sEntitySet = "SomeEntitySet";
				var sEntitySetBad = "SomeBadEntitySet";
				var oManifestExt = {
						"SomeEntitySet": {
							"EntitySet": "SomeEntitySet",
							"Header" : {
								"Actions": {
									"SomeHeaderCustomAction" : {
										"id" : "SomeHeaderCustomAction",
										"text" : "Some header custom action",
										"press" : "onSomeHeaderCustomAction"
									}
								}
							},
							"Sections": {
								"to_EntitySet::com.sap.vocabularies.UI.v1.LineItem": {
									"id" : "to_EntitySet::com.sap.vocabularies.UI.v1.LineItem",
									"Actions" : {
										"SomeSectionCustomAction" : {
											"id" : "SomeSectionCustomAction",
											"text" : "Somes ection custom action",
											"press" : "onSomeSectionCustomAction"
										}
									}
								}
							}
						}
					};
				var oManifestExt_SelectionFalse = {
						"SomeEntitySet": {
							"EntitySet": "SomeEntitySet",
							"Header" : {
								"Actions": {
									"SomeHeaderCustomAction" : {
										"id" : "SomeHeaderCustomAction",
										"text" : "Some header custom action",
										"press" : "onSomeHeaderCustomAction"
									}
								}
							},
							"Sections": {
								"to_EntitySet::com.sap.vocabularies.UI.v1.LineItem": {
									"id" : "to_EntitySet::com.sap.vocabularies.UI.v1.LineItem",
									"Actions" : {
										"SomeSectionCustomAction" : {
											"id" : "SomeSectionCustomAction",
											"text" : "Somes ection custom action",
											"press" : "onSomeSectionCustomAction",
											"requiresSelection" : false
										}
									}
								}
							}
						}
					};
				var oFacet = {
						"Label": {
							"String": "{@i18n>@ProductDescriptions}"
						},
						"RecordType": "com.sap.vocabularies.UI.v1.ReferenceFacet",
						"Target": {
							"AnnotationPath": "to_EntitySet/@com.sap.vocabularies.UI.v1.LineItem"
						}
					};
				var oFacetBad = {
						"Label": {
							"String": "{@i18n>@ProductDescriptions}"
						},
						"RecordType": "com.sap.vocabularies.UI.v1.ReferenceFacet",
						"Target": {
							"AnnotationPath": "to_EntitySetBad/@com.sap.vocabularies.UI.v1.LineItem"
						}
					};
				result = oAnnotationHelper.hasCustomActions(oRouteConfig, sEntitySet, oManifestExt, oFacet);
				assert.equal(result, true);
				result = oAnnotationHelper.hasCustomActions(oRouteConfig, sEntitySet, oManifestExt_SelectionFalse, oFacet);
				assert.equal(result, false);
				result = oAnnotationHelper.hasCustomActions(oRouteConfig, sEntitySetBad, oManifestExt, oFacet);
				assert.equal(result, false);
				result = oAnnotationHelper.hasCustomActions(oRouteConfig, sEntitySet, oManifestExt, oFacetBad);
				assert.equal(result, false);
				result = oAnnotationHelper.hasCustomActions(oRouteConfig, sEntitySetBad, oManifestExt, oFacetBad);
				assert.equal(result, false);
			});

			QUnit.test("check: object page selection mode", function() {
				var oAnnotationHelper = this.oAnnotationHelper;
				var sRootEntitySet = "SomeEntitySet";
				var oEntitySet = {
						"name" : "SomeSubSet"
					};
				var sRootEntitySetBad = "SomeBadEntitySet";
				var oManifestExt_Single = {
						"SomeEntitySet": {
							"EntitySet": "SomeEntitySet",
							"Sections": {
								"to_EntitySet::com.sap.vocabularies.UI.v1.LineItem": {
									"id" : "to_EntitySet::com.sap.vocabularies.UI.v1.LineItem",
									"selectionMode" : "Single"
								}
							}
						}
					};
				var oManifestExt_Multi = {
					"SomeEntitySet": {
						"EntitySet": "SomeEntitySet",
						"Sections": {
							"to_EntitySet::com.sap.vocabularies.UI.v1.LineItem": {
								"id" : "to_EntitySet::com.sap.vocabularies.UI.v1.LineItem",
								"selectionMode" : "Multi"
							}
						}
					}
				};
				var oManifestExt_Action = {
					"SomeEntitySet": {
						"EntitySet": "SomeEntitySet",
						"Header" : {
							"Actions": {
								"SomeHeaderCustomAction" : {
									"id" : "SomeHeaderCustomAction",
									"text" : "Some header custom action",
									"press" : "onSomeHeaderCustomAction"
								}
							}
						},
						"Sections": {
							"to_EntitySet::com.sap.vocabularies.UI.v1.LineItem": {
								"id" : "to_EntitySet::com.sap.vocabularies.UI.v1.LineItem",
								"Actions" : {
									"SomeSectionCustomAction" : {
										"id" : "SomeSectionCustomAction",
										"text" : "Somes ection custom action",
										"press" : "onSomeSectionCustomAction"
									}
								}
							}
						}
					}
				};	
				var oManifestExt_SelectionFalse = {
					"SomeEntitySet": {
						"EntitySet": "SomeEntitySet",
						"Sections": {
							"to_EntitySet::com.sap.vocabularies.UI.v1.LineItem": {
								"id" : "to_EntitySet::com.sap.vocabularies.UI.v1.LineItem",
								"Actions" : {
									"SomeSectionCustomAction" : {
										"id" : "SomeSectionCustomAction",
										"text" : "Somes ection custom action",
										"press" : "onSomeSectionCustomAction",
										"requiresSelection" : false
									}
								}
							}
						}
					}
				};
				var oFacet = {
					"Label": {
						"String": "{@i18n>@ProductDescriptions}"
					},
					"RecordType": "com.sap.vocabularies.UI.v1.ReferenceFacet",
					"Target": {
						"AnnotationPath": "to_EntitySet/@com.sap.vocabularies.UI.v1.LineItem"
					}
				};
				var oFacetBad = {
					"Label": {
						"String": "{@i18n>@ProductDescriptions}"
					},
					"RecordType": "com.sap.vocabularies.UI.v1.ReferenceFacet",
					"Target": {
						"AnnotationPath": "to_EntitySetBad/@com.sap.vocabularies.UI.v1.LineItem"
					}
				};
				var oPagesComplexTableDetail = {
			            "entitySet": "SomeEntitySet",
			            "component": {
			                "name": "sap.suite.ui.generic.template.ListReport",
			                "list": true,
			                "settings" : {
			                    "gridTable" : false,
			                    "multiSelect" : true
			                }
			            },
			            "pages": [
			                {
			                    "entitySet": "SomeEntitySet",
			                    "component": {
			                        "name": "sap.suite.ui.generic.template.ObjectPage"
			                    },
			                    "pages": [
			                        {
			                            "navigationProperty": "to_EntitySet",
			                            "entitySet": "SomeSubSet",
			                            "component": {
			                                "name": "sap.suite.ui.generic.template.ObjectPage"
			                            }
			                        },
			                        {
			                            "navigationProperty": "to_EntitySet",
			                            "entitySet": "SomeSubSet",
			                            "component": {
			                                "name": "sap.suite.ui.generic.template.ListReport",
			                                "list": true,
			                                "settings" : {
			                                    "gridTable" : false,
			                                    "multiSelect" : true,
			                                    "complexListId" : "to_EntitySet::com.sap.vocabularies.UI.v1.LineItem"
			                                }
			                            },
			                            "pages": [
			                                {
			                                    "navigationProperty": "to_EntitySet",
			                                    "entitySet": "SomeSubSet",
			                                    "component": {
			                                        "name": "sap.suite.ui.generic.template.ObjectPage"
			                                    }
			                                }
			                            ]
			                        }
			                    ]
			                }
			            ]
			        };
				var oPagesDetailNoComplexTable = {
			            "entitySet": "SomeEntitySet",
			            "component": {
			                "name": "sap.suite.ui.generic.template.ListReport",
			                "list": true,
			                "settings" : {
			                    "gridTable" : false,
			                    "multiSelect" : true
			                }
			            },
			            "pages": [
			                {
			                    "entitySet": "SomeEntitySet",
			                    "component": {
			                        "name": "sap.suite.ui.generic.template.ObjectPage"
			                    },
			                    "pages": [
			                        {
			                            "navigationProperty": "to_EntitySet",
			                            "entitySet": "SomeSubSet",
			                            "component": {
			                                "name": "sap.suite.ui.generic.template.ObjectPage"
			                            }
			                        },
			                    ]
			                }
			            ]
			        };
				var oPagesComplexTableNoDetail = {
			        "pages": [
			                {
			                    "entitySet": "SomeEntitySet",
			                    "component": {
			                        "name": "sap.suite.ui.generic.template.ObjectPage"
			                    },
			                    "pages": [
			                        {
			                            "navigationProperty": "to_EntitySet",
			                            "entitySet": "SomeSubSet",
			                            "component": {
			                                "name": "sap.suite.ui.generic.template.ListReport",
			                                "list": true,
			                                "settings" : {
			                                    "gridTable" : false,
			                                    "multiSelect" : true,
			                                    "complexListId" : "to_EntitySet::com.sap.vocabularies.UI.v1.LineItem"
			                                }
			                            },
			                            "pages": [
			                                {
			                                    "navigationProperty": "to_EntitySet",
			                                    "entitySet": "SomeSubSet",
			                                    "component": {
			                                        "name": "sap.suite.ui.generic.template.ObjectPage"
			                                    }
			                                }
			                            ]
			                        }
			                    ]
			                }
			            ]
			        };
				var aEntities = []; //don't want to test hasActions here
				//getSelectionModeGridTable
				result = oAnnotationHelper.getSelectionModeGridTable(aEntities, sRootEntitySet, oManifestExt_Multi, oFacet, oEntitySet, oPagesComplexTableDetail);
				assert.equal(result, "Single");  //1.
				result = oAnnotationHelper.getSelectionModeGridTable(aEntities, sRootEntitySet, oManifestExt_Single, oFacet, oEntitySet, oPagesComplexTableDetail);
				assert.equal(result, "Single");  //2.
				result = oAnnotationHelper.getSelectionModeGridTable(aEntities, sRootEntitySet, oManifestExt_Action, oFacet, oEntitySet, oPagesComplexTableDetail);
				assert.equal(result, "Single");  //3.
				result = oAnnotationHelper.getSelectionModeGridTable(aEntities, sRootEntitySet, oManifestExt_SelectionFalse, oFacet, oEntitySet, oPagesComplexTableDetail);
				assert.equal(result, "Single");  //4.
				result = oAnnotationHelper.getSelectionModeGridTable(aEntities, sRootEntitySet, oManifestExt_Multi, oFacet, oEntitySet, oPagesDetailNoComplexTable);
				assert.equal(result, "Single");  //5.
				result = oAnnotationHelper.getSelectionModeGridTable(aEntities, sRootEntitySet, oManifestExt_Single, oFacet, oEntitySet, oPagesDetailNoComplexTable);
				assert.equal(result, "Single");  //6.
				result = oAnnotationHelper.getSelectionModeGridTable(aEntities, sRootEntitySet, oManifestExt_Action, oFacet, oEntitySet, oPagesDetailNoComplexTable);
				assert.equal(result, "Single");  //7.
				result = oAnnotationHelper.getSelectionModeGridTable(aEntities, sRootEntitySet, oManifestExt_SelectionFalse, oFacet, oEntitySet, oPagesDetailNoComplexTable);
				assert.equal(result, "Single");  //8.
				result = oAnnotationHelper.getSelectionModeGridTable(aEntities, sRootEntitySet, oManifestExt_Multi, oFacet, oEntitySet, oPagesComplexTableNoDetail);
				assert.equal(result, "None");  //9.
				result = oAnnotationHelper.getSelectionModeGridTable(aEntities, sRootEntitySet, oManifestExt_Single, oFacet, oEntitySet, oPagesComplexTableNoDetail);
				assert.equal(result, "None");  //10.
				result = oAnnotationHelper.getSelectionModeGridTable(aEntities, sRootEntitySet, oManifestExt_Action, oFacet, oEntitySet, oPagesComplexTableNoDetail);
				assert.equal(result, "None");  //11.
				result = oAnnotationHelper.getSelectionModeGridTable(aEntities, sRootEntitySet, oManifestExt_SelectionFalse, oFacet, oEntitySet, oPagesComplexTableNoDetail);
				assert.equal(result, "None");  //12.
				//getSelectionModeResponsiveTable
				result = oAnnotationHelper.getSelectionModeResponsiveTable(aEntities, sRootEntitySet, oManifestExt_Multi, oFacet, oEntitySet, oPagesComplexTableDetail);
				assert.equal(result, "None");  //13.
				result = oAnnotationHelper.getSelectionModeResponsiveTable(aEntities, sRootEntitySet, oManifestExt_Single, oFacet, oEntitySet, oPagesComplexTableDetail);
				assert.equal(result, "None");  //14.
				result = oAnnotationHelper.getSelectionModeResponsiveTable(aEntities, sRootEntitySet, oManifestExt_Action, oFacet, oEntitySet, oPagesComplexTableDetail);
				assert.equal(result, "None");  //15.
				result = oAnnotationHelper.getSelectionModeResponsiveTable(aEntities, sRootEntitySet, oManifestExt_SelectionFalse, oFacet, oEntitySet, oPagesComplexTableDetail);
				assert.equal(result, "None");  //16.
				result = oAnnotationHelper.getSelectionModeResponsiveTable(aEntities, sRootEntitySet, oManifestExt_Multi, oFacet, oEntitySet, oPagesDetailNoComplexTable);
				assert.equal(result, "None");  //17.
				result = oAnnotationHelper.getSelectionModeResponsiveTable(aEntities, sRootEntitySet, oManifestExt_Single, oFacet, oEntitySet, oPagesDetailNoComplexTable);
				assert.equal(result, "None");  //18.
				result = oAnnotationHelper.getSelectionModeResponsiveTable(aEntities, sRootEntitySet, oManifestExt_Action, oFacet, oEntitySet, oPagesDetailNoComplexTable);
				assert.equal(result, "SingleSelectLeft");  //19.
				result = oAnnotationHelper.getSelectionModeResponsiveTable(aEntities, sRootEntitySet, oManifestExt_SelectionFalse, oFacet, oEntitySet, oPagesDetailNoComplexTable);
				assert.equal(result, "None");  //20.
				result = oAnnotationHelper.getSelectionModeResponsiveTable(aEntities, sRootEntitySet, oManifestExt_Multi, oFacet, oEntitySet, oPagesComplexTableNoDetail);
				assert.equal(result, "None"); //21.
				result = oAnnotationHelper.getSelectionModeResponsiveTable(aEntities, sRootEntitySet, oManifestExt_Single, oFacet, oEntitySet, oPagesComplexTableNoDetail);
				assert.equal(result, "None");  //22.
				result = oAnnotationHelper.getSelectionModeResponsiveTable(aEntities, sRootEntitySet, oManifestExt_Action, oFacet, oEntitySet, oPagesComplexTableNoDetail);
				assert.equal(result, "None");  //23.
				result = oAnnotationHelper.getSelectionModeResponsiveTable(aEntities, sRootEntitySet, oManifestExt_SelectionFalse, oFacet, oEntitySet, oPagesComplexTableNoDetail);
				assert.equal(result, "None");  //24.
			});

			QUnit.test("check isOrHasComplexTable (ObjectPage)", function() {
				var oAnnotationHelper = this.oAnnotationHelper;
				var sEntitySet = "SomeEntitySet2";
				var oManifestPages = [
					{
						"entitySet": "SomeEntitySet1",
						"component": {
							"name": "sap.suite.ui.generic.template.ListReport",
							"list": true,
						},
						"pages": [
							{
								"entitySet": "SomeEntitySet1",
								"component": {
									"name": "sap.suite.ui.generic.template.ObjectPage"
								},
								"pages": [
									{
										"navigationProperty": "to_Item",
										"entitySet": "SomeEntitySet2",
										"component": {
											"name": "sap.suite.ui.generic.template.ObjectPage"
										}
									},
									{
										"navigationProperty": "to_Item",
										"entitySet": "SomeEntitySet2",
										"component": {
											"name": "sap.suite.ui.generic.template.ListReport",
											"list": true,
											"settings": {
												"complexListId" : "to_Item::com.sap.vocabularies.UI.v1.LineItem"
											}
										}
									}
								]
							}
						]
					}
				];
				var oRouteConfig = {
					"pages" : oManifestPages
					};
				var oFacetWithComplexTable = {
						"Label": {
							"String": "{@i18n>@ProductDescriptions}"
						},
						"RecordType": "com.sap.vocabularies.UI.v1.ReferenceFacet",
						"Target": {
							"AnnotationPath": "to_Item/@com.sap.vocabularies.UI.v1.LineItem"
						}
					};
				var oFacetWithoutComplexTable = {
						"Label": {
							"String": "{@i18n>@ProductDescriptions}"
						},
						"RecordType": "com.sap.vocabularies.UI.v1.ReferenceFacet",
						"Target": {
							"AnnotationPath": "to_OtherItem/@com.sap.vocabularies.UI.v1.LineItem"
						}
					};
				result = oAnnotationHelper.isOrHasComplexTable(sEntitySet, oRouteConfig, oFacetWithComplexTable);
				assert.equal(result, true);
				result = oAnnotationHelper.isOrHasComplexTable(sEntitySet, oRouteConfig, oFacetWithoutComplexTable);
				assert.equal(result, false);
			});

			QUnit.test("check showFullScreenButton (ObjectPage)", function() {
				var oAnnotationHelper = this.oAnnotationHelper;
				var oRouteConfig = {
						"entitySet": "SomeEntitySet1",
						"component": {
							"name": "sap.suite.ui.generic.template.ObjectPage",
							"settings": {
								"sections": {
									"to_Item::com.sap.vocabularies.UI.v1.LineItem": {
										"navigationProperty": "to_Item",
										"entitySet": "SomeEntitySet2",
										"tableMode": "FullScreenTable"
									},
									"to_OtherItem::com.sap.vocabularies.UI.v1.LineItem": {
										"navigationProperty": "to_OtherItem",
										"entitySet": "SomeEntitySet3",
										"tableMode": "ComplexTable"
									}
								}
							}
						}
					};
				var oFacetWithFullScreenTable = {
						"Label": {
							"String": "{@i18n>@ProductDescriptions}"
						},
						"RecordType": "com.sap.vocabularies.UI.v1.ReferenceFacet",
						"Target": {
							"AnnotationPath": "to_Item/@com.sap.vocabularies.UI.v1.LineItem"
						}
					};
				var oFacetWithComplexTable = {
						"Label": {
							"String": "{@i18n>@ProductDescriptions}"
						},
						"RecordType": "com.sap.vocabularies.UI.v1.ReferenceFacet",
						"Target": {
							"AnnotationPath": "to_OtherItem/@com.sap.vocabularies.UI.v1.LineItem"
						}
					};
				result = oAnnotationHelper.showFullScreenButton(oRouteConfig, oFacetWithFullScreenTable);
				assert.equal(result, true);
				result = oAnnotationHelper.showFullScreenButton(oRouteConfig, oFacetWithComplexTable);
				assert.equal(result, false);
			});

			QUnit.test("check isOrHasComplexTable (ListReport / Long Table)", function() {
				var oAnnotationHelper = this.oAnnotationHelper;
				var sEntitySet = "SomeEntitySet2";
				var oRouteConfig = {
						"component" : {
							"list" : true,
							"settings": {
								"complexListId" : "ID"
							}
						},
						"navigationProperty" : "to_Item",
						"pages" : []
					};
				var oRouteConfigNoList = {
						"component" : {
							"list" : false,
							"settings": {
								"complexListId" : "ID"
							}
						},
						"navigationProperty" : "to_Item",
						"pages" : []
					};
				result = oAnnotationHelper.isOrHasComplexTable(sEntitySet, oRouteConfig);
				assert.equal(result, true);
				result = oAnnotationHelper.isOrHasComplexTable(sEntitySet, oRouteConfigNoList);
				assert.equal(result, false);
			});
			
			QUnit.test("check method doesFieldGroupContainOnlyOneMultiLineDataField with 0 DataFields ", function() {
				var oAnnotationHelper = this.oAnnotationHelper;

				var oFieldGroupWith0DataField =  {
						"Data": []
					};				

				var oFieldGroupWith1DataField =  {
						"Data": [{
							"EdmType": "Edm.String",
							"RecordType": "com.sap.vocabularies.UI.v1.DataField",
							"Value": {"Path":"Description"}
						}]
					};				

				var oFieldGroupWith2DataField =  {
						"Data": [{
							"EdmType": "Edm.String",
							"RecordType": "com.sap.vocabularies.UI.v1.DataField",
							"Value": {"Path":"Description"}
						},
						{
							"EdmType": "Edm.String",
							"RecordType": "com.sap.vocabularies.UI.v1.DataField",
							"Value": {"Path":"Name"}
						}]
					};

				var oFieldGroupWith1NotDataField =  {
						"Data": [{
							"EdmType": "Edm.String",
							"RecordType": "com.sap.vocabularies.UI.v1.DataFieldNot",
							"Value": {"Path":"Description"}
						}]
					};

				var	oFirstDataFieldPropertiesMutilineDefined =  {
						"com.sap.vocabularies.UI.v1.MultiLineText": []
					};

				var oFirstDataFieldPropertiesMutilineNotDefined =  {
						"com.sap.vocabularies.UI.v1.MultiLineTextNot": []
					};

				result = oAnnotationHelper.doesFieldGroupContainOnlyOneMultiLineDataField(oFieldGroupWith1DataField, oFirstDataFieldPropertiesMutilineDefined);
				assert.equal(result, true, "1 DataField and MultilineText defined should return true");

				result = oAnnotationHelper.doesFieldGroupContainOnlyOneMultiLineDataField(oFieldGroupWith1DataField, oFirstDataFieldPropertiesMutilineNotDefined);
				assert.equal(result, false, "1 DataField and MultilineText NOT defined should return true");
				
				
				result = oAnnotationHelper.doesFieldGroupContainOnlyOneMultiLineDataField(oFieldGroupWith0DataField, oFirstDataFieldPropertiesMutilineDefined);
				assert.equal(result, false, "0 DataFields and MultilineText defined should return false");

				result = oAnnotationHelper.doesFieldGroupContainOnlyOneMultiLineDataField(oFieldGroupWith0DataField, oFirstDataFieldPropertiesMutilineNotDefined);
				assert.equal(result, false, "0 DataFields and MultilineText not defined should return false");

				result = oAnnotationHelper.doesFieldGroupContainOnlyOneMultiLineDataField(oFieldGroupWith1NotDataField, oFirstDataFieldPropertiesMutilineDefined);
				assert.equal(result, false, "1 DataFieldNot and MultilineText defined should return false");

				result = oAnnotationHelper.doesFieldGroupContainOnlyOneMultiLineDataField(oFieldGroupWith1NotDataField, oFirstDataFieldPropertiesMutilineNotDefined);
				assert.equal(result, false, "1 DataFieldNot and MultilineText NOT defined should return false");

				result = oAnnotationHelper.doesFieldGroupContainOnlyOneMultiLineDataField(oFieldGroupWith2DataField, oFirstDataFieldPropertiesMutilineDefined);
				assert.equal(result, false, "2 DataFields and MultilineText defined should return false");

				result = oAnnotationHelper.doesFieldGroupContainOnlyOneMultiLineDataField(oFieldGroupWith2DataField, oFirstDataFieldPropertiesMutilineNotDefined);
				assert.equal(result, false, "2 DataFields and MultilineText NOT defined should return false");
			});
			
	         QUnit.test("check method createP13NColumnForAction", function() {
	        	 var aLineItem = [
                                  {
                                      RecordType: "com.sap.vocabularies.UI.v1.DataFieldForAction", 
                                      Label: {
                                          String: "ToolbarAction1"
                                      },
                                      Action: {
                                          String: "ToolbarActionFunction1"
                                      },
                                      Inline: {
                                          Bool: "false"
                                      }
                                  },
                                  {
                                      RecordType: "com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation", 
                                      Label: {
                                          String: "ToolbarAction2"
                                      },
                                      Action: {
                                          String: "ToolbarActionFunction2"
                                      }
                                  },
                                  {
                                      EdmType: "Edm.String",
                                      RecordType: "com.sap.vocabularies.UI.v1.DataField", 
                                      Label: {
                                          String: "Column1"
                                      },
                                      Value: {
                                          Path: "ColumnPath1"
                                      },
                                      "com.sap.vocabularies.UI.v1.Importance" :{
                                          EnumMember: "com.sap.vocabularies.UI.v1.ImportanceType/High"
                                      }
                                  },
                                  {
                                      EdmType: "Edm.String",
                                      RecordType: "com.sap.vocabularies.UI.v1.DataField", 
                                      Label: {
                                          String: "Column2"
                                      },
                                      Value: {
                                          Path: "ColumnPath2"
                                      },
                                      "com.sap.vocabularies.UI.v1.Importance" :{
                                          EnumMember: "com.sap.vocabularies.UI.v1.ImportanceType/High"
                                      }
                                  },
                                  {
                                      EdmType: "Edm.String",
                                      RecordType: "com.sap.vocabularies.UI.v1.DataField", 
                                      Label: {
                                          String: "Column3"
                                      },
                                      Value: {
                                          Path: "ColumnPath3"
                                      },
                                      "com.sap.vocabularies.UI.v1.Importance" :{
                                          EnumMember: "com.sap.vocabularies.UI.v1.ImportanceType/High"
                                      }
                                  },
                                  {
                                      RecordType: "com.sap.vocabularies.UI.v1.DataFieldForAction", 
                                      Label: {
                                          String: "LineItemAction1"
                                      },
                                      Action: {
                                          String: "LineItemActionFunction1"
                                      },
                                      Inline: {
                                          Bool: "true"
                                      }
                                  },
                                  {
                                      RecordType: "com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation", 
                                      Label: {
                                          String: "LineItemAction2"
                                      },
                                      Action: {
                                          String: "LineItemActionFunction2"
                                      },
                                      Inline: {
                                          Bool: "true"
                                      }
                                  }
                                  ];
	        	 var iContext = {
	        			 oDataField: null,
	        			 getPath: function() {
	        				 that = this;
	        				 var aColumnIndex = jQuery.map(aLineItem, function(oColumn, iIndex) {
                                 if (oColumn.Label.String === that.oDataField.Label.String) {
                                	 return iIndex;
                                 }
                             });
	                         return (aColumnIndex[0] >= 0 ? "/dataServices/schema/0/entityType/1/com.sap.vocabularies.UI.v1.LineItem/" + aColumnIndex[0] : "");
	        			 },
	        			 getModel: function() {
	        				 return {
	                             getObject: function(sTerm) {
	                                 return aLineItem;
	                             }
	        				 };
	        			 }
	        	 }
	        	 var oDataFieldAction = {
	                     RecordType: "com.sap.vocabularies.UI.v1.DataFieldForAction", 
	                     Label: {
	                         String: "LineItemAction1"
	                     },
	                     Action: {
	                         String: "LineItemActionFunction1"
	                     },
	                     Inline: {
	                         Bool: "true"
	                     },
	                     "com.sap.vocabularies.UI.v1.Importance" :{
	                         EnumMember: "com.sap.vocabularies.UI.v1.ImportanceType/High"
	                     }
	             };
                 var oDataFieldNavigation = {
                         RecordType: "com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation", 
                         Label: {
                             String: "LineItemAction2"
                         },
                         Action: {
                             String: "LineItemActionFunction2"
                         },
                         Inline: {
                             Bool: "true"
                         },
                         "com.sap.vocabularies.UI.v1.Importance" :{
                             EnumMember: "com.sap.vocabularies.UI.v1.ImportanceType/High"
                         }
                 };
                 
                 iContext.oDataField = oDataFieldAction;
                 var sExpectedActionValue = '\\{"columnKey":"LineItemAction1", "columnIndex":"3", "actionButton":"true" \\}'
	        	 var sResult = this.oAnnotationHelper.createP13NColumnForAction(iContext, oDataFieldAction);
	        	 assert.equal(sResult, sExpectedActionValue, "P13N data for line item action created.");

                 iContext.oDataField = oDataFieldNavigation;
                 sExpectedActionValue = '\\{"columnKey":"LineItemAction2", "columnIndex":"4", "actionButton":"true" \\}'
                 sResult = this.oAnnotationHelper.createP13NColumnForAction(iContext, oDataFieldNavigation);
                 assert.equal(sResult, sExpectedActionValue, "P13N data for line item navigation action created.");
	         });
		});

	</script>
	</head>
	<body>
		<div id="qunit"></div>
		<div id="uiArea"></div>
	</body>
</html>