<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>MicroAreaChartPerformance - sap.suite.ui.commons</title>

<!-- UI5 Bootstrap -->
<script src="../../../../../../resources/sap-ui-core.js"
        type="text/javascript"
        id="sap-ui-bootstrap"
        data-sap-ui-libs="sap.suite.ui.commons,sap.m"
        data-sap-ui-theme="sap_bluecrystal"></script>

<script type="text/javascript">
	jQuery.sap.initMobile();
	
	var oConfMACData = {
   		width: "164px",
   		height: "74px",
   		chart: {
   			data: [
   				{day: 0, balance: 0},
   				{day: 30, balance: 20},
   				{day: 60, balance: 20},
   				{day: 100, balance: 80}
   			]
   		},
   		target: {
   			data: [
   				{day: 0, balance: 0},
   				{day: 30, balance: 30},
   				{day: 60, balance: 40},
   				{day: 100, balance: 90}
   			]
   		},
   		maxThreshold: {
   			color: "Good",
   			data: [
   				{day: 0, balance: 0},
   				{day: 30, balance: 40},
   				{day: 60, balance: 50},
   				{day: 100, balance: 100}
   			]
   		},
   		innerMaxThreshold: {
   			color: "Critical",
   			data: [
				{balance: 60}
   			]
   		},
   		innerMinThreshold: {
   			data: [
				{balance: 40}
   			]
   		},
   		minThreshold: {
   			color: "Error",
   			data: [
   				{day: 0, balance: 0},
   				{day: 30, balance: 20},
   				{day: 60, balance: 30},
   				{day: 100, balance: 70},
   			]
   		},
		minXValue: 0,
		maxXValue: 100,
		minYValue: 0,
		maxYValue: 100,
		firstXLabel: { label: "June 1", color: "Good"	},
		lastXLabel: { label: "June 30", color: "Critical" },
		firstYLabel: { label: "0M", color: "Good" },
		lastYLabel: { label: "80M", color: "Critical" },
		minLabel: { label: "0M", color: "Good" },
		maxLabel: { label: "100M", color: "Error" }
   	};

    var oConfModel = new sap.ui.model.json.JSONModel();
    oConfModel.setData(oConfMACData);
    sap.ui.getCore().setModel(oConfModel);

	var oMACDataTmpl = sap.suite.ui.commons.MicroAreaChartPoint({
        x: "{day}",
        y: "{balance}"

    });
	
	var buildChartItem = function(sName) {
		return new sap.suite.ui.commons.MicroAreaChartItem({
   			color: "{/"+sName+"/color}",
			points: {
	        	path: "/"+sName+"/data",
	        	template: oMACDataTmpl
	        }
   		});
	};

	var buildMACLabel = function(sName) {
		return new sap.suite.ui.commons.MicroAreaChartLabel({ 
			label: "{/"+sName+"/label}", 
			color: "{/"+sName+"/color}" 
		});
	};
	
    function querystring(key) {
   	   var re = new RegExp('(?:\\?|&)'+key+'=(.*?)(?=&|$)','gi');
   	   var r=[], m;
   	   while ((m=re.exec(document.location.search)) != null) r.push(m[1]);
   	   return r;
   	};
   	var iChartsNumber = querystring("sap-ui-charts-number");
   	 
	if (iChartsNumber == "") {
		iChartsNumber = 50;
	};

   var ar = [];
  
   for(var n = 1; n <= iChartsNumber; n++) {
		var oMicroChart = new sap.suite.ui.commons.MicroAreaChart({
	   		width: "{/width}",
	   		height: "{/height}",
	   		target: buildChartItem("target"),
	   		innerMinThreshold: buildChartItem("innerMinThreshold"),
	   		innerMaxThreshold: buildChartItem("innerMaxThreshold"),
	   		minThreshold: buildChartItem("minThreshold"),
	   		maxThreshold: buildChartItem("maxThreshold"),
	   		chart: buildChartItem("chart"),
			firstXLabel: buildMACLabel("firstXLabel"), 
			lastXLabel: buildMACLabel("lastXLabel"), 
			firstYLabel: buildMACLabel("firstYLabel"),
			lastYLabel: buildMACLabel("lastYLabel"),
			minLabel: buildMACLabel("minLabel"),
			maxLabel: buildMACLabel("maxLabel")
	   	}); 
	
	  ar.push(oMicroChart);
   }

    var oPage = new sap.m.Page("initial-page", {
       showHeader: false,
       content: ar
    });

    oPage.placeAt("content");
</script>
</head>

<body class="sapUiBody">
<h3>*To set the number of charts displayed on this page please add a sap-ui-charts-number= parameter to the page URL.</h3>
<div id="content" style="height:100%"></div>
</body>
</html>
