<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>NewsGenericTilePerformance - sap.suite.ui.commons</title>

<!-- UI5 Bootstrap -->
<script src="../../../../../../resources/sap-ui-core.js"
        type="text/javascript"
        id="sap-ui-bootstrap"
        data-sap-ui-libs="sap.suite.ui.commons,sap.m"
        data-sap-ui-theme="sap_bluecrystal"></script>

<script type="text/javascript">
    jQuery.sap.initMobile();

    function querystring(key) {
  	   var re = new RegExp('(?:\\?|&)'+key+'=(.*?)(?=&|$)','gi');
  	   var r=[], m;
  	   while ((m=re.exec(document.location.search)) != null) r.push(m[1]);
  	   return r;
  	};
  	var iTilesNumber = querystring("sap-ui-tiles-number");
  	 
	if (iTilesNumber == "") {
		iTilesNumber = 16
	};

   	var ar = [];
	var oDynamicContainerData = {
		displayTime: 5000,
		transitionTime: 500,
		jamTile: {
	    	headerImage: "../demokit/images/headerImg2.jpg",
			header: "Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat",
			frameType: "TwoByOne",
			size: "M",
			tileContent: [{
				contentText: "@@notify Great outcome of the Presentation today. The new functionality and the design was well received. Berlin, Tokyo, Rome, Budapest, New York, Munich, London",
				footer: "New Notifications",
				subheader: "about 1 minute ago in Computer Market",
				value: "9"
			}]
		},
		chartsTile: {
			frameType: "TwoByOne",
			size: "M",
			header: "Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat",
			footer: "Chart Footer",
			mac: {
		   		width: "100%",
		   		height: "100%",
		   		chart: {
		   			points: [
		   				{day: 0, balance: 0},
		   				{day: 30, balance: 20},
		   				{day: 60, balance: 20},
		   				{day: 100, balance: 80}
		   			]
		   		},
		   		target: {
		   			points: [
		   				{day: 0, balance: 0},
		   				{day: 30, balance: 30},
		   				{day: 60, balance: 40},
		   				{day: 100, balance: 90}
		   			]
		   		},
		   		maxThreshold: {
		   			color: "Good",
		   			points: [
		   				{day: 0, balance: 0},
		   				{day: 30, balance: 40},
		   				{day: 60, balance: 50},
		   				{day: 100, balance: 100}
		   			]
		   		},
		   		innerMaxThreshold: {
		   			color: "Good",
		   			points: [
		   			]
		   		},
		   		innerMinThreshold: {
		   			color: "Good",
		   			points: [
		   			]
		   		},
		   		minThreshold: {
		   			color: "Error",
		   			points: [
		   				{day: 0, balance: 0},
		   				{day: 30, balance: 20},
		   				{day: 60, balance: 30},
		   				{day: 100, balance: 70},
		   			]
		   		},
				minXValue: 0,
				maxXValue: 100,
				minYValue: 0,
				maxYValue: 100,
				firstXLabel: { label: "June 1", color: "Good"	},
				lastXLabel: { label: "June 30", color: "Critical" },
				firstYLabel: { label: "0M", color: "Good" },
				lastYLabel: { label: "80M", color: "Critical" }
			},
			bc: {
				size: "M",
	            scale: "M",
	            actual: { value: 120, color: sap.suite.ui.commons.InfoTileValueColor.Good},
	            forecastValue: 110,
	            targetValue: 100,
	            thresholds: [
	            	{ value: 0, color: sap.suite.ui.commons.InfoTileValueColor.Error },
	    			{ value: 50, color: sap.suite.ui.commons.InfoTileValueColor.Critical },
	    			{ value: 150, color: sap.suite.ui.commons.InfoTileValueColor.Critical },
	    			{ value: 200, color: sap.suite.ui.commons.InfoTileValueColor.Error }
	    		],
	    		showActualValue: true,
	    		showTargetValue: true
			}
		}
	};

    var oDynamicContainerModel = new sap.ui.model.json.JSONModel();
	oDynamicContainerModel.setData(oDynamicContainerData);
	
	var oJamTileContent = new sap.suite.ui.commons.TileContent({
		footer: "{footer}",
		content: new sap.suite.ui.commons.JamContent({
			contentText: "{contentText}",
			subheader: "{subheader}",
			value: "{value}"
		})
	});

	var oMacPoint = sap.suite.ui.commons.MicroAreaChartPoint({
        x: "{day}",
        y: "{balance}"
    });
	
    var oBCDataTmpl = new sap.suite.ui.commons.BulletChartData({
        value: "{value}",
        color: "{color}"
    });
    
   	for(var n = 1; n <= iTilesNumber; n++) {
   		var oJamGenericTile = new sap.suite.ui.commons.GenericTile({
   			frameType: "{frameType}",
   			header: "{header}",
   			size: "{size}",
   			state: "{state}",
   			backgroundImage: "{backgroundImage}",
   			tileContent: {
   				template: oJamTileContent,
   				path: "tileContent"
   			}
   		}).bindContext("/jamTile");
 
   		var oMacTileContent = new sap.suite.ui.commons.TileContent({
   			unit : "{unit}",
   			size :"{size}",
   			footer: "{footer}",
   			content: new sap.suite.ui.commons.MicroAreaChart({
   				height: "100%",
   				width: "100%",
   				chart: new sap.suite.ui.commons.MicroAreaChartItem({
   					points: {
   			        	path: "chart/points",
   			        	template: oMacPoint
   			        }
   				}),
   				target: new sap.suite.ui.commons.MicroAreaChartItem({
   					points: {
   			        	path: "target/points",
   			        	template: oMacPoint
   			        }
   				}),
   				maxThreshold: new sap.suite.ui.commons.MicroAreaChartItem({
   					color: "{maxThreshold/color}",
   					points: {
   			        	path: "maxThreshold/points",
   			        	template: oMacPoint
   			        }
   				}),
   				minThreshold: new sap.suite.ui.commons.MicroAreaChartItem({
   					color: "{minThreshold/color}",
   					points: {
   			        	path: "minThreshold/points",
   			        	template: oMacPoint
   			        }
   				})
   			}).bindContext("mac")
   		});
   		
   		var oBCTileContent = new sap.suite.ui.commons.TileContent({
   			unit : "{unit}",
   			size :"{size}",
   			footer: "{footer}",
   			content: new sap.suite.ui.commons.BulletChart({
   		        size: "{size}",
   		        scale: "{scale}",
   		        actual: {
   		            value: "{actual/value}",
   		            color: "{actual/color}"
   		        },
   		        targetValue: "{targetValue}",
   				thresholds: {
   		        	template: oBCDataTmpl,
   		        	path: "thresholds"
   		        },
   		        showActualValue: "{showActualValue}",
   		        showTargetValue: "{showTargetValue}" 
   		   	}).bindContext("bc")
   		});
   		
   		var oChartsTile = new sap.suite.ui.commons.GenericTile({
   			frameType: "{frameType}",
   			header: "{header}",
   			size: "{size}",
   			state: "{state}",
   			backgroundImage: "{backgroundImage}",
   			tileContent: [
   				oMacTileContent, oBCTileContent
   			]
   		}).bindContext("/chartsTile");
   		
		var oDynamicContainer = new sap.suite.ui.commons.DynamicContainer({
			displayTime: "{/displayTime}",
			transitionTime: "{/transitionTime}",
			tiles: [
				oJamGenericTile, oChartsTile
			]
		});
		ar.push(oDynamicContainer);
	}
	
	var oPage = new sap.m.Page("initial-page", {
	    showHeader: false,
	   	content: ar
	});
	
	oPage.setModel(oDynamicContainerModel);
	oPage.placeAt("content");
</script>
</head>

<body class="sapUiBody">
<h3>*To set the number of tiles displayed on this page please add a sap-ui-tiles-number= parameter to the page URL.</h3>
<div id="content" style="height:100%"></div>
</body>
</html>