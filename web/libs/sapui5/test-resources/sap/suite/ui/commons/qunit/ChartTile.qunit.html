<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Chart Tile QUnit page</title>

    <!-- UI5 Bootstrap -->
    <script src="../../../../../../resources/sap-ui-core.js"
            type="text/javascript"
            id="sap-ui-bootstrap"
            data-sap-ui-libs="sap.suite.ui.commons,sap.m"
            data-sap-ui-theme="sap_bluecrystal"></script>

    <!-- QUnit libraries -->
    <link rel="stylesheet"
          href="../../../../../../resources/sap/ui/thirdparty/qunit.css"
          type="text/css" media="screen" />
    <script src="../../../../../../resources/sap/ui/thirdparty/qunit.js"></script>
    <script type="text/javascript" src="../../../../../../resources/sap/ui/qunit/QUnitUtils.js"></script>

    <script>
    module("Test chart data calculation", {
        teardown: function() {
            this.oTile.destroy();
        }
    });

    asyncTest("Bullet chart content rendering", function() {
        this.oTile = new sap.suite.ui.commons.ChartTile("bullet-tile", {
        	size: sap.suite.ui.commons.InfoTileSize.L,
            unit: "EUR",
            title: "Cumulative Totals",
            description: "Expenses",
            state: sap.suite.ui.commons.LoadState.Loaded,
            content: new sap.suite.ui.commons.BulletChart("bc1", {
                scale: "M",
                actual: new sap.suite.ui.commons.BulletChartData({ value: 120, color: sap.suite.ui.commons.InfoTileValueColor.Good }),
                targetValue: 100,
                thresholds: [
                	new sap.suite.ui.commons.BulletChartData({ value: 0, color: sap.suite.ui.commons.InfoTileValueColor.Error }),
                	new sap.suite.ui.commons.BulletChartData({ value: 50, color: sap.suite.ui.commons.InfoTileValueColor.Critical }),
                	new sap.suite.ui.commons.BulletChartData({ value: 150, color: sap.suite.ui.commons.InfoTileValueColor.Critical }),
                	new sap.suite.ui.commons.BulletChartData({ value: 200, color: sap.suite.ui.commons.InfoTileValueColor.Error })
            	]
        	}),
        	footer: "Actual and Target"
    	});
        this.oTile.placeAt("contentArea");
    	setTimeout(function() {
            equal("Cumulative Totals", jQuery.sap.byId("bullet-tile-title").text(), "title rendered");
            equal("Expenses", jQuery.sap.byId("bullet-tile-description").text(), "description rendered");
            equal("(EUR)", jQuery.sap.byId("bullet-tile-unit").text(), "unit rendered");
            equal("Actual and Target", jQuery.sap.byId("bullet-tile-footer-text").text(), "footer rendered");
            equal("120M", jQuery.sap.byId("bc1-bc-item-value").text(), "actual value rendered");
            equal("100M", jQuery.sap.byId("bc1-bc-target-value").text(), "target value rendered");
	    	start();
		}, 1000);
    });

    asyncTest("Comparison chart content rendering", function() {
        this.oTile = new sap.suite.ui.commons.ChartTile("comparison-tile", {
	    	size: sap.suite.ui.commons.InfoTileSize.L,
		    unit: "EUR",
		    title: "Cumulative Totals",
		    description: "Expenses",
		    state: sap.suite.ui.commons.LoadState.Loaded,
		    content: new sap.suite.ui.commons.ComparisonChart("cc1", {
			    scale: "M",
		        data: [
					new sap.suite.ui.commons.ComparisonData({ title: "Americas", value: 10, color: sap.suite.ui.commons.InfoTileValueColor.Good }),
					new sap.suite.ui.commons.ComparisonData({ title: "EMEA", value: 50, color: sap.suite.ui.commons.InfoTileValueColor.Good }),
			        new sap.suite.ui.commons.ComparisonData({ title: "APAC", value: -20, color: sap.suite.ui.commons.InfoTileValueColor.Error })
		    ]})
		});
        this.oTile.placeAt("contentArea");
    	setTimeout(function() {
            equal("Cumulative Totals", jQuery.sap.byId("comparison-tile-title").text(), "title rendered");
            equal("Expenses", jQuery.sap.byId("comparison-tile-description").text(), "description rendered");
            equal("(EUR)", jQuery.sap.byId("comparison-tile-unit").text(), "unit rendered");
            
            equal("10M", jQuery.sap.byId("cc1-chart-item-0-value").text(), "value in bar 0 rendered");
            equal("50M", jQuery.sap.byId("cc1-chart-item-1-value").text(), "value in bar 1 rendered");
            equal("-20M", jQuery.sap.byId("cc1-chart-item-2-value").text(), "value in bar 2 rendered");
            equal("Americas", jQuery.sap.byId("cc1-chart-item-0-title").text(), "title in bar 0 rendered");
            equal("EMEA", jQuery.sap.byId("cc1-chart-item-1-title").text(), "title in bar 1 rendered");
            equal("APAC", jQuery.sap.byId("cc1-chart-item-2-title").text(), "title in bar 2 rendered");
	    	start();
		}, 1000);
    });
    
    </script>
</head>

<body>
    <div id="qunit"></div>
    <div id="contentArea" class="sapUiBody"></div>
</body>
</html>