<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>qUnit Page for sap.ui.comp.odata.FieldSelectorController</title>

<script id="sap-ui-bootstrap" type="text/javascript"
	src="../../../../../resources/sap-ui-core.js"
	data-sap-ui-theme="sap_bluecrystal" data-sap-ui-noConflict="true"
	data-sap-ui-libs="sap.ui.comp">

</script>

<link rel="stylesheet"
	href="../../../../../resources/sap/ui/thirdparty/qunit.css"
	type="text/css" media="screen" />
<script type="text/javascript"
	src="../../../../../resources/sap/ui/thirdparty/qunit.js"></script>
<script type="text/javascript"
	src="../../../../../resources/sap/ui/qunit/qunit-junit.js"></script>
<script type="text/javascript"
	src="../../../../../resources/sap/ui/qunit/QUnitUtils.js"></script>
<script type="text/javascript"
	src="../../../../../resources/sap/ui/thirdparty/sinon.js"></script>

<script type="text/javascript">
	(function() {
		jQuery.sap.require("sap.ui.comp.odata.FieldSelectorController");
		jQuery.sap.require("sap.ui.comp.odata.FieldSelectorModelConverter");

		var oMetadata = JSON
		.parse('{"version":"1.0","dataServices":{"dataServiceVersion":"2.0","schema":[{"namespace":"com.sap.GL.ZAF","entityType":[{"name":"GL_ACCOUNT","key":{"propertyRef":[{"name":"CompanyCode"},{"name":"GLAccount"}]},"property":[{"name":"CompanyCode","type":"Edm.String","nullable":"false","maxLength":"4","extensions":[{"name":"filter-restriction","value":"multi-value","namespace":"SAPData"},{"name":"required-in-filter","value":"true","namespace":"SAPData"},{"name":"label","value":"Company","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]},{"name":"GLAccount","type":"Edm.String","nullable":"false","maxLength":"10","extensions":[{"name":"label","value":"Account","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]},{"name":"ChartOfAccount","type":"Edm.String","nullable":"false","maxLength":"4","extensions":[{"name":"label","value":"Chart Of Account","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]},{"name":"Description","type":"Edm.String","nullable":"false","maxLength":"50","extensions":[{"name":"label","value":"Description","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]}],"navigationProperty":[{"name":"GL_ACCOUNT_BALANCE","relationship":"com.sap.GL.ZAF.ACCOUNT_ACCOUNT_BALANCE","fromRole":"FromRole_ACCOUNT_ACCOUNT_BALANCE","toRole":"ToRole_ACCOUNT_ACCOUNT_BALANCE"}],"extensions":[{"name":"label","value":"GL Account","namespace":"SAPData"},{"name":"content-version","value":"1","namespace":"SAPData"}]},{"name":"LINE_ITEM","key":{"propertyRef":[{"name":"Ledger"},{"name":"CompanyCode"},{"name":"LedgerFiscalYear"},{"name":"LedgerAccountingDocument"},{"name":"LedgerGLLineItem"}]},"property":[{"name":"GLAccount","type":"Edm.String","nullable":"false","maxLength":"10","extensions":[{"name":"label","value":"Account","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"}]},{"name":"Ledger","type":"Edm.String","nullable":"false","maxLength":"2","extensions":[{"name":"label","value":"Ledger","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"}]},{"name":"CompanyCode","type":"Edm.String","nullable":"false","maxLength":"4","extensions":[{"name":"label","value":"Company","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"}]},{"name":"LedgerFiscalYear","type":"Edm.String","nullable":"false","maxLength":"4","extensions":[{"name":"label","value":"Year","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"}]},{"name":"LedgerFiscalPeriod","type":"Edm.String","nullable":"false","maxLength":"3","extensions":[{"name":"label","value":"Period","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"filterable","value":"false","namespace":"SAPData"}]},{"name":"LedgerAccountingDocument","type":"Edm.String","nullable":"false","maxLength":"10","extensions":[{"name":"label","value":"Document","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"}]},{"name":"LedgerGLLineItem","type":"Edm.String","nullable":"false","maxLength":"6","extensions":[{"name":"label","value":"Item","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"}]},{"name":"PostingDate","type":"Edm.DateTime","nullable":"false","precision":"0","extensions":[{"name":"display-format","value":"Date","namespace":"SAPData"},{"name":"filter-restriction","value":"interval","namespace":"SAPData"},{"name":"label","value":"Posting Date","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"}]},{"name":"Amount","type":"Edm.Decimal","precision":"28","scale":"3","extensions":[{"name":"unit","value":"CurrencyCode","namespace":"SAPData"},{"name":"label","value":"Balance","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"filterable","value":"false","namespace":"SAPData"}]},{"name":"CurrencyCode","type":"Edm.String","nullable":"false","maxLength":"5","extensions":[{"name":"label","value":"Currency","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"filterable","value":"false","namespace":"SAPData"},{"name":"semantics","value":"currency-code","namespace":"SAPData"}]}],"extensions":[{"name":"label","value":"Line Item","namespace":"SAPData"},{"name":"content-version","value":"1","namespace":"SAPData"}]},{"name":"ACCOUNTING_DOCUMENT","key":{"propertyRef":[{"name":"CompanyCode"},{"name":"DocumentID"},{"name":"Year"},{"name":"ItemID"}]},"property":[{"name":"CompanyCode","type":"Edm.String","nullable":"false","maxLength":"4","extensions":[{"name":"label","value":"Company Code","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]},{"name":"DocumentID","type":"Edm.String","nullable":"false","maxLength":"10","extensions":[{"name":"label","value":"Document Number","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]},{"name":"Year","type":"Edm.String","nullable":"false","maxLength":"4","extensions":[{"name":"label","value":"Fiscal Year","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]},{"name":"ItemID","type":"Edm.String","nullable":"false","maxLength":"3","extensions":[{"name":"label","value":"Line item","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]},{"name":"RegionCode","type":"Edm.String","nullable":"false","maxLength":"3","extensions":[{"name":"label","value":"Region","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]},{"name":"Amount","type":"Edm.Decimal","nullable":"false","precision":"28","scale":"3","extensions":[{"name":"unit","value":"CurrencyCode","namespace":"SAPData"},{"name":"label","value":"Amount","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"},{"name":"filterable","value":"false","namespace":"SAPData"}]},{"name":"CurrencyCode","type":"Edm.String","nullable":"false","maxLength":"5","extensions":[{"name":"label","value":"Currency","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"},{"name":"filterable","value":"false","namespace":"SAPData"},{"name":"semantics","value":"currency-code","namespace":"SAPData"}]}],"extensions":[{"name":"label","value":"Accounting Document","namespace":"SAPData"},{"name":"content-version","value":"1","namespace":"SAPData"}]},{"name":"GEO_COORDINATES","key":{"propertyRef":[{"name":"CountryCode"},{"name":"RegionCode"}]},"property":[{"name":"CountryCode","type":"Edm.String","nullable":"false","maxLength":"3","extensions":[{"name":"filter-restriction","value":"single-value","namespace":"SAPData"},{"name":"label","value":"Country","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]},{"name":"RegionCode","type":"Edm.String","nullable":"false","maxLength":"3","extensions":[{"name":"label","value":"Region","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]},{"name":"Longitude","type":"Edm.Double","nullable":"false","extensions":[{"name":"label","value":"Longitude","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"},{"name":"filterable","value":"false","namespace":"SAPData"}]},{"name":"Latitude","type":"Edm.Double","nullable":"false","extensions":[{"name":"label","value":"Latitude","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"},{"name":"filterable","value":"false","namespace":"SAPData"}]}],"extensions":[{"name":"label","value":"Geo Coordinates","namespace":"SAPData"},{"name":"content-version","value":"1","namespace":"SAPData"}]},{"name":"COUNTRY","key":{"propertyRef":[{"name":"CountryCode"}]},"property":[{"name":"CountryCode","type":"Edm.String","nullable":"false","maxLength":"3","extensions":[{"name":"text","value":"Description","namespace":"SAPData"},{"name":"label","value":"Country","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]},{"name":"Description","type":"Edm.String","nullable":"false","maxLength":"50","extensions":[{"name":"label","value":"Long name","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]}],"extensions":[{"name":"label","value":"Country","namespace":"SAPData"},{"name":"content-version","value":"1","namespace":"SAPData"}]},{"name":"REGION","key":{"propertyRef":[{"name":"CountryCode"},{"name":"RegionCode"}]},"property":[{"name":"CountryCode","type":"Edm.String","nullable":"false","maxLength":"3","extensions":[{"name":"label","value":"Country","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]},{"name":"RegionCode","type":"Edm.String","nullable":"false","maxLength":"3","extensions":[{"name":"text","value":"Description","namespace":"SAPData"},{"name":"label","value":"Region","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]},{"name":"Description","type":"Edm.String","nullable":"false","maxLength":"20","extensions":[{"name":"label","value":"Description","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]}],"extensions":[{"name":"label","value":"Region","namespace":"SAPData"},{"name":"content-version","value":"1","namespace":"SAPData"}]},{"name":"GL_ACCOUNT_BALANCE","key":{"propertyRef":[{"name":"Ledger"},{"name":"LedgerFiscalYear"},{"name":"CompanyCode"},{"name":"GLAccount"}]},"property":[{"name":"AccmltdBalAmtInCoCodeCrcy","type":"Edm.Decimal","precision":"28","scale":"3","extensions":[{"name":"unit","value":"CurrencyCode","namespace":"SAPData"},{"name":"label","value":"Balance","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"},{"name":"filterable","value":"false","namespace":"SAPData"}]},{"name":"CurrencyCode","type":"Edm.String","nullable":"false","maxLength":"5","extensions":[{"name":"label","value":"Currency","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"},{"name":"filterable","value":"false","namespace":"SAPData"},{"name":"semantics","value":"currency-code","namespace":"SAPData"}]},{"name":"Ledger","type":"Edm.String","nullable":"false","maxLength":"2","extensions":[{"name":"label","value":"Ledger","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]},{"name":"LedgerFiscalYear","type":"Edm.String","nullable":"false","maxLength":"4","extensions":[{"name":"label","value":"Fiscal Year","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]},{"name":"CompanyCode","type":"Edm.String","nullable":"false","maxLength":"4","extensions":[{"name":"label","value":"Company","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]},{"name":"GLAccount","type":"Edm.String","nullable":"false","maxLength":"10","extensions":[{"name":"label","value":"Account","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"},{"name":"filterable","value":"false","namespace":"SAPData"}]}],"navigationProperty":[{"name":"GL_ACCOUNT","relationship":"com.sap.GL.ZAF.ACCOUNT_ACCOUNT_BALANCE","fromRole":"ToRole_ACCOUNT_ACCOUNT_BALANCE","toRole":"FromRole_ACCOUNT_ACCOUNT_BALANCE"}],"extensions":[{"name":"label","value":"GL Account Balance","namespace":"SAPData"},{"name":"content-version","value":"1","namespace":"SAPData"}]},{"name":"COMPANY","key":{"propertyRef":[{"name":"CompanyCode"}]},"property":[{"name":"CompanyCode","type":"Edm.String","nullable":"false","maxLength":"4","extensions":[{"name":"text","value":"CompanyName","namespace":"SAPData"},{"name":"label","value":"Company","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"}]},{"name":"CompanyName","type":"Edm.String","nullable":"false","maxLength":"25","extensions":[{"name":"label","value":"Name","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"}]},{"name":"City","type":"Edm.String","nullable":"false","maxLength":"25","extensions":[{"name":"label","value":"City","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"},{"name":"filterable","value":"false","namespace":"SAPData"}]},{"name":"CurrencyCode","type":"Edm.String","nullable":"false","maxLength":"5","extensions":[{"name":"label","value":"Currency","namespace":"SAPData"},{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"sortable","value":"false","namespace":"SAPData"},{"name":"semantics","value":"currency-code","namespace":"SAPData"}]}],"extensions":[{"name":"label","value":"Company","namespace":"SAPData"},{"name":"content-version","value":"1","namespace":"SAPData"}]}],"association":[{"name":"ACCOUNT_ACCOUNT_BALANCE","end":[{"type":"com.sap.GL.ZAF.GL_ACCOUNT","multiplicity":"1","role":"FromRole_ACCOUNT_ACCOUNT_BALANCE"},{"type":"com.sap.GL.ZAF.GL_ACCOUNT_BALANCE","multiplicity":"*","role":"ToRole_ACCOUNT_ACCOUNT_BALANCE"}],"referentialConstraint":{"principal":{"role":"FromRole_ACCOUNT_ACCOUNT_BALANCE","propertyRef":[{"name":"CompanyCode"},{"name":"GLAccount"}]},"dependent":{"role":"ToRole_ACCOUNT_ACCOUNT_BALANCE","propertyRef":[{"name":"CompanyCode"},{"name":"GLAccount"}]}},"extensions":[{"name":"content-version","value":"1","namespace":"SAPData"}]}],"entityContainer":[{"name":"com.sap.GL.ZAF_Entities","isDefaultEntityContainer":"true","entitySet":[{"name":"LINE_ITEMS","entityType":"com.sap.GL.ZAF.LINE_ITEM","extensions":[{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"deletable","value":"false","namespace":"SAPData"},{"name":"searchable","value":"true","namespace":"SAPData"},{"name":"pageable","value":"false","namespace":"SAPData"},{"name":"content-version","value":"1","namespace":"SAPData"}]},{"name":"ACCOUNTING_DOCUMENTSet","entityType":"com.sap.GL.ZAF.ACCOUNTING_DOCUMENT","extensions":[{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"deletable","value":"false","namespace":"SAPData"},{"name":"searchable","value":"true","namespace":"SAPData"},{"name":"pageable","value":"false","namespace":"SAPData"},{"name":"content-version","value":"1","namespace":"SAPData"}]},{"name":"GEO_COORDINATESSet","entityType":"com.sap.GL.ZAF.GEO_COORDINATES","extensions":[{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"deletable","value":"false","namespace":"SAPData"},{"name":"searchable","value":"true","namespace":"SAPData"},{"name":"pageable","value":"false","namespace":"SAPData"},{"name":"content-version","value":"1","namespace":"SAPData"}]},{"name":"COUNTRYSet","entityType":"com.sap.GL.ZAF.COUNTRY","extensions":[{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"deletable","value":"false","namespace":"SAPData"},{"name":"searchable","value":"true","namespace":"SAPData"},{"name":"pageable","value":"false","namespace":"SAPData"},{"name":"content-version","value":"1","namespace":"SAPData"}]},{"name":"REGIONSet","entityType":"com.sap.GL.ZAF.REGION","extensions":[{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"deletable","value":"false","namespace":"SAPData"},{"name":"searchable","value":"true","namespace":"SAPData"},{"name":"pageable","value":"false","namespace":"SAPData"},{"name":"content-version","value":"1","namespace":"SAPData"}]},{"name":"GL_ACCOUNT_BALANCE_SET","entityType":"com.sap.GL.ZAF.GL_ACCOUNT_BALANCE","extensions":[{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"deletable","value":"false","namespace":"SAPData"},{"name":"searchable","value":"true","namespace":"SAPData"},{"name":"pageable","value":"false","namespace":"SAPData"},{"name":"content-version","value":"1","namespace":"SAPData"}]},{"name":"COMPANIES","entityType":"com.sap.GL.ZAF.COMPANY","extensions":[{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"deletable","value":"false","namespace":"SAPData"},{"name":"searchable","value":"true","namespace":"SAPData"},{"name":"pageable","value":"false","namespace":"SAPData"},{"name":"content-version","value":"1","namespace":"SAPData"}]},{"name":"GL_ACCOUNT_SET","entityType":"com.sap.GL.ZAF.GL_ACCOUNT","extensions":[{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"deletable","value":"false","namespace":"SAPData"},{"name":"searchable","value":"true","namespace":"SAPData"},{"name":"pageable","value":"false","namespace":"SAPData"},{"name":"content-version","value":"1","namespace":"SAPData"}]}],"associationSet":[{"name":"ACCOUNT_ACCOUNT_BALANCESet","association":"com.sap.GL.ZAF.ACCOUNT_ACCOUNT_BALANCE","end":[{"entitySet":"GL_ACCOUNT_SET","role":"FromRole_ACCOUNT_ACCOUNT_BALANCE"},{"entitySet":"GL_ACCOUNT_BALANCE_SET","role":"ToRole_ACCOUNT_ACCOUNT_BALANCE"}],"extensions":[{"name":"creatable","value":"false","namespace":"SAPData"},{"name":"updatable","value":"false","namespace":"SAPData"},{"name":"deletable","value":"false","namespace":"SAPData"},{"name":"content-version","value":"1","namespace":"SAPData"}]}],"functionImport":[{"name":"SendForClarification","returnType":"com.sap.GL.ZAF.GL_ACCOUNT_BALANCE","entitySet":"GL_ACCOUNT_BALANCE_SET","httpMethod":"GET","parameter":[{"name":"Receiver","type":"Edm.String","mode":"In"}]}]}],"annotations":[{"target":"com.sap.GL.ZAF.GL_ACCOUNT_BALANCE/CompanyCode","annotation":[{"term":"com.sap.vocabularies.Common.v1.ValueList","record":{"propertyValue":[{"property":"CollectionPath","string":"COMPANIES"},{"property":"SearchSupported","bool":"true"},{"property":"Parameters","collection":{"record":[{"type":"com.sap.vocabularies.Common.v1.ValueListParameterInOut","propertyValue":[{"property":"LocalDataProperty","propertyPath":"CompanyCode"},{"property":"ValueListProperty","string":"CompanyCode"}]},{"type":"com.sap.vocabularies.Common.v1.ValueListParameterIn","propertyValue":[{"property":"LocalDataProperty","propertyPath":"CurrencyCode"},{"property":"ValueListProperty","string":"CurrencyCode"}]},{"type":"com.sap.vocabularies.Common.v1.ValueListParameterOut","propertyValue":[{"property":"LocalDataProperty","propertyPath":"CompanyName"},{"property":"ValueListProperty","string":"CompanyName"}]},{"type":"com.sap.vocabularies.Common.v1.ValueListParameterOut","propertyValue":[{"property":"LocalDataProperty","propertyPath":"CurrencyCode"},{"property":"ValueListProperty","string":"CurrencyCode"}]}]}}]}}]},{"target":"com.sap.GL.ZAF.GL_ACCOUNT/CompanyCode","annotation":[{"term":"com.sap.vocabularies.Common.v1.ValueList","record":{"propertyValue":[{"property":"CollectionPath","string":"COMPANIES"},{"property":"SearchSupported","bool":"true"},{"property":"Parameters","collection":{"record":[{"type":"com.sap.vocabularies.Common.v1.ValueListParameterInOut","propertyValue":[{"property":"LocalDataProperty","propertyPath":"CompanyCode"},{"property":"ValueListProperty","string":"CompanyCode"}]},{"type":"com.sap.vocabularies.Common.v1.ValueListParameterIn","propertyValue":[{"property":"LocalDataProperty","propertyPath":"CurrencyCode"},{"property":"ValueListProperty","string":"CurrencyCode"}]},{"type":"com.sap.vocabularies.Common.v1.ValueListParameterOut","propertyValue":[{"property":"LocalDataProperty","propertyPath":"CompanyName"},{"property":"ValueListProperty","string":"CompanyName"}]},{"type":"com.sap.vocabularies.Common.v1.ValueListParameterOut","propertyValue":[{"property":"LocalDataProperty","propertyPath":"CurrencyCode"},{"property":"ValueListProperty","string":"CurrencyCode"}]}]}}]}}]},{"target":"com.sap.GL.ZAF.GL_ACCOUNT/CurrencyCode","annotation":[{"term":"com.sap.vocabularies.Common.v1.ValueList","record":{"propertyValue":[{"property":"CollectionPath","string":"CURRENCYSet"},{"property":"CollectionRoot","string":"foo/ZAF_CURRENCY_SRV"},{"property":"Parameters","collection":{"record":[{"type":"com.sap.vocabularies.Common.v1.ValueListParameterInOut","propertyValue":[{"property":"LocalDataProperty","propertyPath":"CurrencyCode"},{"property":"ValueListProperty","string":"CurrencyCode"}]}]}}]}}]},{"target":"com.sap.GL.ZAF.COMPANY/CurrencyCode","annotation":[{"term":"com.sap.vocabularies.Common.v1.ValueList","record":{"propertyValue":[{"property":"CollectionPath","string":"CURRENCYSet"},{"property":"CollectionRoot","string":"foo/ZAF_CURRENCY_SRV"},{"property":"Parameters","collection":{"record":[{"type":"com.sap.vocabularies.Common.v1.ValueListParameterInOut","propertyValue":[{"property":"LocalDataProperty","propertyPath":"CurrencyCode"},{"property":"ValueListProperty","string":"CurrencyCode"}]}]}}]}}]},{"target":"com.sap.GL.ZAF.GEO_COORDINATES/CountryCode","annotation":[{"term":"com.sap.vocabularies.Common.v1.ValueList","record":{"propertyValue":[{"property":"CollectionPath","string":"COUNTRYSet"},{"property":"Parameters","collection":{"record":[{"type":"com.sap.vocabularies.Common.v1.ValueListParameterInOut","propertyValue":[{"property":"LocalDataProperty","propertyPath":"CountryCode"},{"property":"ValueListProperty","string":"CountryCode"}]}]}}]}}]},{"target":"com.sap.GL.ZAF.GEO_COORDINATES/RegionCode","annotation":[{"term":"com.sap.vocabularies.Common.v1.ValueList","record":{"propertyValue":[{"property":"CollectionPath","string":"REGIONSet"},{"property":"Parameters","collection":{"record":[{"type":"com.sap.vocabularies.Common.v1.ValueListParameterInOut","propertyValue":[{"property":"LocalDataProperty","propertyPath":"RegionCode"},{"property":"ValueListProperty","string":"RegionCode"}]},{"type":"com.sap.vocabularies.Common.v1.ValueListParameterInOut","propertyValue":[{"property":"LocalDataProperty","propertyPath":"CountryCode"},{"property":"ValueListProperty","string":"CountryCode"}]}]}}]}}]},{"target":"com.sap.GL.ZAF.REGION/CountryCode","annotation":[{"term":"com.sap.vocabularies.Common.v1.ValueList","record":{"propertyValue":[{"property":"CollectionPath","string":"COUNTRYSet"},{"property":"Parameters","collection":{"record":[{"type":"com.sap.vocabularies.Common.v1.ValueListParameterInOut","propertyValue":[{"property":"LocalDataProperty","propertyPath":"CountryCode"},{"property":"ValueListProperty","string":"CountryCode"}]}]}}]}}]}],"extensions":[{"name":"lang","value":"en","namespace":"http://www.w3.org/XML/1998/namespace"},{"name":"link","value":null,"attributes":[{"name":"rel","value":"self","namespace":null},{"name":"href","value":"foo/ZAF_GL_BALANCE_SRV/$metadata","namespace":null}],"children":[],"namespace":"http://www.w3.org/2005/Atom"},{"name":"link","value":null,"attributes":[{"name":"rel","value":"latest-version","namespace":null},{"name":"href","value":"foo/ZAF_GL_BALANCE_SRV/$metadata","namespace":null}],"children":[],"namespace":"http://www.w3.org/2005/Atom"}]}]},"extensions":[{"name":"Reference","value":null,"attributes":[{"name":"Uri","value":"/$value","namespace":null}],"children":[{"name":"Include","value":null,"attributes":[{"name":"Namespace","value":"Org.OData.Measures.V1","namespace":null}],"children":[],"namespace":"http://docs.oasis-open.org/odata/ns/edmx"}],"namespace":"http://docs.oasis-open.org/odata/ns/edmx"},{"name":"Reference","value":null,"attributes":[{"name":"Uri","value":"/$value","namespace":null}],"children":[{"name":"Include","value":null,"attributes":[{"name":"Namespace","value":"Org.OData.Core.V1","namespace":null}],"children":[],"namespace":"http://docs.oasis-open.org/odata/ns/edmx"}],"namespace":"http://docs.oasis-open.org/odata/ns/edmx"},{"name":"Reference","value":null,"attributes":[{"name":"Uri","value":"/$value","namespace":null}],"children":[{"name":"Include","value":null,"attributes":[{"name":"Namespace","value":"com.sap.vocabularies.Common.v1_1","namespace":null}],"children":[],"namespace":"http://docs.oasis-open.org/odata/ns/edmx"}],"namespace":"http://docs.oasis-open.org/odata/ns/edmx"}]}');
		var oModel = sinon.createStubInstance(sap.ui.model.odata.ODataModel);
		var oODataMetadata = sinon.createStubInstance(sap.ui.model.odata.ODataMetadata);
		oODataMetadata.isLoaded.returns(true);
		oODataMetadata.getServiceMetadata.returns(oMetadata);
//		The following line of code does not work with the latest version of sap.ui.model.odata.ODataMetaModel.
//		See jsdoc of sap.ui.model.odata.ODataMetaModel:
//		The constructor of sap.ui.model.odata.ODataMetaModel is privat and not allowed to use,
//		but rather use {@link sap.ui.model.odata.ODataModel#getMetaModel} instead!
//		Without the following line the last 4 tests do not work and therefore these were commented out.
//     	oModel.getMetaModel.returns(new sap.ui.model.odata.ODataMetaModel(oODataMetadata));


		QUnit.module("sap.ui.comp.odata.FieldSelectorController", {
			setup: function() {
			    this.oFieldSelectorController = null;
			},
			teardown: function() {
				this.oFieldSelectorController.destroy();
			}
		});

		QUnit.test("validate constructor",function(){
			//Act
			this.oFieldSelectorController = new sap.ui.comp.odata.FieldSelectorController();

			//Assert
			equal(this.oFieldSelectorController._oModelConverter, null);
			deepEqual(this.oFieldSelectorController._oFields, {});
		});

 		QUnit.test("init mandatory params filled", function(){
 			//Arrange
 			var oConvertedModelDummy = {};
 			var oModelConverterStubGetConvertedModelStub = sinon.stub(sap.ui.comp.odata.FieldSelectorModelConverter.prototype, "getConvertedModel").returns(oConvertedModelDummy);
 			var oFieldControllerSortStub = sinon.stub(sap.ui.comp.odata.FieldSelectorController.prototype,"_sortFields");
 			this.oFieldSelectorController = new sap.ui.comp.odata.FieldSelectorController();

 			//Act
 			this.oFieldSelectorController.init(oModel, "COMPANIES");

 			//Assert
 			ok(oModelConverterStubGetConvertedModelStub.called);
 			ok(oFieldControllerSortStub.calledWith(oConvertedModelDummy));


 			oModelConverterStubGetConvertedModelStub.restore();
 			oFieldControllerSortStub.restore();

 		});

		QUnit.test("init mandatory params not filled", function(){
			//Arrange
			var oConvertedModelDummy = {};
			var oErrorStub = sinon.stub(jQuery.sap.log, "error");
			var oModelConverterStubGetConvertedModelStub = sinon.stub(sap.ui.comp.odata.FieldSelectorModelConverter.prototype, "getConvertedModel").returns(oConvertedModelDummy);
			var oFieldControllerSortStub = sinon.stub(sap.ui.comp.odata.FieldSelectorController.prototype,"_sortFields");
			this.oFieldSelectorController = new sap.ui.comp.odata.FieldSelectorController();

			//Act
			this.oFieldSelectorController.init();

			//Assert
			ok(oErrorStub.calledOnce);
			ok(oModelConverterStubGetConvertedModelStub.called);
			ok(oFieldControllerSortStub.calledWith(oConvertedModelDummy));


			oModelConverterStubGetConvertedModelStub.restore();
			oFieldControllerSortStub.restore();

		});

		QUnit.test("init mandatory and optional params", function(){
			//Arrange
			var oConvertedModelDummy = {};
			var aListOfIgnoredFields = ["A", "B"];
			var mBindingPathToFieldListElement = {};
			var mIdToFieldListElement = {};
			var oModelConverterStubGetConvertedModelStub = sinon.stub(sap.ui.comp.odata.FieldSelectorModelConverter.prototype, "getConvertedModel").returns(oConvertedModelDummy);
			var oFieldControllerUpdateFieldLabelsAndDetermineFieldsNotBoundToODataServiceStub = sinon.stub(sap.ui.comp.odata.FieldSelectorController.prototype,"_updateFieldLabelsAndDetermineFieldsNotBoundToODataService");
			var oFieldControllerAddFieldsNotBoundToODataServiceStub = sinon.stub(sap.ui.comp.odata.FieldSelectorController.prototype,"_addFieldsNotBoundToODataService");
			var oFieldControllerSortStub = sinon.stub(sap.ui.comp.odata.FieldSelectorController.prototype,"_sortFields");
			this.oFieldSelectorController = new sap.ui.comp.odata.FieldSelectorController();

			//Act
			this.oFieldSelectorController.init(oModel, "COMPANIES", aListOfIgnoredFields, mBindingPathToFieldListElement, mIdToFieldListElement);

			//Assert
			ok(oModelConverterStubGetConvertedModelStub.called);
			ok(oModelConverterStubGetConvertedModelStub.calledWith("COMPANIES", aListOfIgnoredFields));
			ok(oFieldControllerUpdateFieldLabelsAndDetermineFieldsNotBoundToODataServiceStub.calledWith(oConvertedModelDummy, mBindingPathToFieldListElement, mIdToFieldListElement));
			ok(oFieldControllerAddFieldsNotBoundToODataServiceStub.called);
			ok(oFieldControllerSortStub.calledWith(oConvertedModelDummy));


			oModelConverterStubGetConvertedModelStub.restore();
			oFieldControllerUpdateFieldLabelsAndDetermineFieldsNotBoundToODataServiceStub.restore();
			oFieldControllerAddFieldsNotBoundToODataServiceStub.restore();
			oFieldControllerSortStub.restore();

		});

		QUnit.test("_updateFieldLabelsAndDetermineFieldsNotBoundToODataService and _addFieldsNotBoundToODataService", function(){
			//Arrange
			var oConvertedModel = {
				'Header': [
					{
						'id' : '0',
						'entityName': 'Header',
						'fieldLabel': 'Document Number',
						'name': 'AccountingDocument'
					},
					{
						'id' : '1',
						'entityName': 'Header',
						'fieldLabel': 'Company Code',
						'name': 'CompanyCode'
					},
					{
						'id' : '2',
						'entityName': 'Header',
						'fieldLabel': 'Document Date',
						'name': 'DocumentDate'
					},
					{
						'id' : '3',
						'entityName': 'Header',
						'fieldLabel': 'Fiscal Year',
						'name': 'FiscalYear'
					},
					{
						'id' : '4',
						'entityName': 'Header',
						'fieldLabel': 'Ledger Group',
						'name': 'LedgerGroup'
					},
					{
						'id' : '5',
						'entityName': 'Header',
						'fieldLabel': 'Posting Date',
						'name': 'PostingDate'
					}
				]
			};
			var mBindingPathToFieldListElement = {
				'Header/AccountingDocument': { 'id': '0', 'label': 'Document Number Renamed' },
				'Header/CompanyCode': { 'id': '1', 'label': 'Company Code' },
				'Header/DocumentDate': { 'id': '2', 'label': 'Document Date' },
				'Header/FiscalYear': { 'id': '3', 'label': 'Fiscal Year Renamed' },
				'Header/LedgerGroup': { 'id': '4', 'label': 'Ledger Group' },
				'Header/PostingDate': { 'id': '5', 'label': 'Posting Date' }
			};
			var mIdToFieldListElement = {
				'0': { 'id': '0', 'label': 'Document Number Renamed' },
				'1': { 'id': '1', 'label': 'Company Code' },
				'2': { 'id': '2', 'label': 'Document Date' },
				'3': { 'id': '3', 'label': 'Fiscal Year Renamed' },
				'4': { 'id': '4', 'label': 'Ledger Group' },
				'5': { 'id': '5', 'label': 'Posting Date' },
				'6': { 'id': '6', 'label': 'Lilie Renamed' }
			};
			var oModelConverterStubGetEntityTypesStub = sinon.stub(sap.ui.comp.odata.FieldSelectorModelConverter.prototype, "getEntityTypes").returns([{key : 'Header'}]);

			this.oFieldSelectorController = new sap.ui.comp.odata.FieldSelectorController();
			this.oFieldSelectorController._oModelConverter = new sap.ui.comp.odata.FieldSelectorModelConverter(oModel);

			//Act
			var aFieldsNotBoundToODataService = this.oFieldSelectorController._updateFieldLabelsAndDetermineFieldsNotBoundToODataService(oConvertedModel, mBindingPathToFieldListElement, mIdToFieldListElement);

			//Assert
			equal(aFieldsNotBoundToODataService.length, 1);

			//Act
			this.oFieldSelectorController._addFieldsNotBoundToODataService(oConvertedModel, aFieldsNotBoundToODataService);

			//Assert
			equal(oConvertedModel['Header'][0].fieldLabel, 'Document Number Renamed');
			equal(oConvertedModel['Header'][1].fieldLabel, 'Company Code');
			equal(oConvertedModel['Header'][2].fieldLabel, 'Document Date');
			equal(oConvertedModel['Header'][3].fieldLabel, 'Fiscal Year Renamed');
			equal(oConvertedModel['Header'][4].fieldLabel, 'Ledger Group');
			equal(oConvertedModel['Header'][5].fieldLabel, 'Posting Date');
			equal(oConvertedModel['Header'][6].fieldLabel, 'Lilie Renamed');

			oModelConverterStubGetEntityTypesStub.restore();
		});

		QUnit.test("check sorting function", function(){
			//Arrange
			this.oFieldSelectorController = new sap.ui.comp.odata.FieldSelectorController();
			var oConvertedModelBefore = {"B":[
				{"fieldLabel": "Z"},
				{"fieldLabel": "Y"},
				{"fieldLabel": "X"},
			]};

			var oConvertedModelAfter = {"B":[
				{"fieldLabel": "X"},
				{"fieldLabel": "Y"},
				{"fieldLabel": "Z"},
			]};

			//Act
			this.oFieldSelectorController._sortFields(oConvertedModelBefore);

			//Assert
			deepEqual(this.oFieldSelectorController._oFields, oConvertedModelAfter);

		});

		QUnit.test("check max entityset size detection", function(){
			//Arrange
			this.oFieldSelectorController = new sap.ui.comp.odata.FieldSelectorController();
			this.oFieldSelectorController._oFields = {"B":[
				{"fieldLabel": "X"},
				{"fieldLabel": "Y"},
				{"fieldLabel": "Z"}
			],
				"A":[{"fieldLabel":"D"},
					{"fieldLabel":"E"},
					{"fieldLabel":"F"},
					{"fieldLabel":"G"},
					{"fieldLabel":"H"},
					{"fieldLabel":"I"}
				]
			};
			//Act
			var result = this.oFieldSelectorController.getMaxEntitySetSize();

			//Assert
			equal(result, 6);
		});

		QUnit.test("ignores fields set to invisibe in the oData service - with simpleTypes", function(){

			this.oFieldSelectorController = new sap.ui.comp.odata.FieldSelectorController();
			var oModel = new sap.ui.model.json.JSONModel({});
			this.oFieldSelectorController.init(oModel);

			var oEmptyConvertedModel = {};
			var mFieldsToRemove = {
				"someEntityName": [{
					"name": "name1",
					"entityName": "someEntityName",
					"id": "id1",
					"isVisible": false
				}, {
					"name": "name3",
					"entityName": "someEntityName",
					"id": "id2",
					"isVisible": true
				}]
			};

			var firstElement = {};
			var thirdElement = {};

			var mIdToFieldListElement = {
				"id1": firstElement,
				"id3": thirdElement
			};

			var mBindingPathToFieldListElement = {
				"someEntityName/name1": {/* bindingInfo */},
				"someEntityName/name3": {/* bindingInfo */}
			};

			var aFieldNotBound = this.oFieldSelectorController._removeFieldsFromList(mIdToFieldListElement, mBindingPathToFieldListElement, mFieldsToRemove);

			equal(Object.keys(mIdToFieldListElement).length, 1, "detects one not bound field");
			equal(mIdToFieldListElement["id3"], thirdElement);
		});

		QUnit.test("ignores fields set to invisibe in the oData service - with complexTypes", function(){

			this.oFieldSelectorController = new sap.ui.comp.odata.FieldSelectorController();
			var oModel = new sap.ui.model.json.JSONModel({});
			this.oFieldSelectorController.init(oModel);

			this.oFieldSelectorController.getMetaDataAnalyzer = function () {
				return {
					_getNameOfPropertyUsingComplexType: function () {
						return "complexType";
					}
				};
			};

			var oEmptyConvertedModel = {};
			var mFieldsToRemove = {
				"someEntityName": [{
					"name": "name1",
					"entityName": "someEntityNameDifferentToFieldsToRemoveProperty",
					"id": "id1",
					"isVisible": false
				}, {
					"name": "name3",
					"entityName": "someEntityNameDifferentToFieldsToRemoveProperty",
					"id": "id2",
					"isVisible": true
				}]
			};

			var firstElement = {};
			var thirdElement = {};

			var mIdToFieldListElement = {
				"id1": firstElement,
				"id3": thirdElement
			};

			var mBindingPathToFieldListElement = {
				"someEntityName/complexType/name1": {/* bindingInfo */},
				"someEntityName/complexType/name3": {/* bindingInfo */}
			};

			var aFieldNotBound = this.oFieldSelectorController._removeFieldsFromList(mIdToFieldListElement, mBindingPathToFieldListElement, mFieldsToRemove);

			equal(Object.keys(mIdToFieldListElement).length, 1, "detects one not bound field");
			equal(mIdToFieldListElement["id3"], thirdElement);
		});

// 		QUnit.asyncTest("init with datamodel containing complex fields", function(){
// 			//Arrange
// 			var that = this;
// 			var oSampleODataModel = jQuery.sap.loadResource({
// 				url: "sampleModelWithComplexFields.json",
// 				dataType: 'text',
// 				failOnError: false,
// 				async: true
// 			}).then(function(sSampleMetadata){
// 				var oOSampleMetadata = JSON.parse(sSampleMetadata);
// 		    	oODataMetadata.getServiceMetadata.returns(oOSampleMetadata);
// 		    	oModel.getMetaModel.returns(new sap.ui.model.odata.ODataMetaModel(oODataMetadata, null, { annotationsLoadedPromise : Promise.resolve() }));

// 				that.oFieldSelectorController = new sap.ui.comp.odata.FieldSelectorController();
// 				that.oFieldSelectorController.init(oModel);

// 				var oResult = that.oFieldSelectorController.getFields();
// 				equal(oResult["FinsPostingPaymentHeader"].length, 2);
// 				equal(oResult["FinsPostingPaymentHeader"][0].entityName, "AcctgDocHdrBankCharges");
// 				equal(oResult["FinsPostingPaymentHeader"][0].name, "AmountInTransCrcy");
// 				equal(oResult["FinsPostingPaymentHeader"][1].name, "TransactionCurrency");

// 				QUnit.start();
// 			}, function(oError){
// 				ok(false, "Error occured when loading the sample odata metadata");
// 				QUnit.start();
// 			});

// 		});

// 		QUnit.asyncTest("validate ignore list of fields in complex type works with fully qualified name", function(){
// 			//Arrange
// 			var that = this;
// 			var oSampleODataModel = jQuery.sap.loadResource({
// 				url: "sampleModelWithComplexFields.json",
// 				dataType: 'text',
// 				failOnError: false,
// 				async: true
// 			}).then(function(sSampleMetadata){
// 				var oOSampleMetadata = JSON.parse(sSampleMetadata);
// 				oODataMetadata.getServiceMetadata.returns(oOSampleMetadata);
// 		    	oModel.getMetaModel.returns(new sap.ui.model.odata.ODataMetaModel(oODataMetadata, null, { annotationsLoadedPromise : Promise.resolve() }));
// 				var aIgnoredFields = ["AcctgDocHdrBankCharges.TransactionCurrency"];
// 				that.oFieldSelectorController = new sap.ui.comp.odata.FieldSelectorController();
// 				that.oFieldSelectorController.init(oModel, null, aIgnoredFields);

// 				var oResult = that.oFieldSelectorController.getFields();
// 				equal(oResult["FinsPostingPaymentHeader"].length, 1);
// 				equal(oResult["FinsPostingPaymentHeader"][0].entityName, "AcctgDocHdrBankCharges");
// 				equal(oResult["FinsPostingPaymentHeader"][0].name, "AmountInTransCrcy");

// 				QUnit.start();
// 			}, function(oError){
// 				ok(false, "Error occured when loading the sample odata metadata");
// 				QUnit.start();
// 			});

// 		});

// 		QUnit.asyncTest("validate ignore list of fields in complex type does not work without fully qualified name", function(){
// 			//Arrange
// 			var that = this;
// 			var oSampleODataModel = jQuery.sap.loadResource({
// 				url: "sampleModelWithComplexFields.json",
// 				dataType: 'text',
// 				failOnError: false,
// 				async: true
// 			}).then(function(sSampleMetadata){
// 				var oOSampleMetadata = JSON.parse(sSampleMetadata);
// 				oODataMetadata.getServiceMetadata.returns(oOSampleMetadata);
// 		    	oModel.getMetaModel.returns(new sap.ui.model.odata.ODataMetaModel(oODataMetadata, null, { annotationsLoadedPromise : Promise.resolve() }));
// 				var aIgnoredFields = ["TransactionCurrency"];
// 				that.oFieldSelectorController = new sap.ui.comp.odata.FieldSelectorController();
// 				that.oFieldSelectorController.init(oModel, null, aIgnoredFields);

// 				var oResult = that.oFieldSelectorController.getFields();
// 				equal(oResult["FinsPostingPaymentHeader"].length, 2);
// 				equal(oResult["FinsPostingPaymentHeader"][0].entityName, "AcctgDocHdrBankCharges");
// 				equal(oResult["FinsPostingPaymentHeader"][0].name, "AmountInTransCrcy");
// 				equal(oResult["FinsPostingPaymentHeader"][1].name, "TransactionCurrency");

// 				QUnit.start();
// 			}, function(oError){
// 				ok(false, "Error occured when loading the sample odata metadata");
// 				QUnit.start();
// 			});

// 		});

// 		QUnit.asyncTest("validate ignore list of a field using a complex type", function(){
// 			//Arrange
// 			var that = this;
// 			var oSampleODataModel = jQuery.sap.loadResource({
// 				url: "sampleModelWithComplexFields.json",
// 				dataType: 'text',
// 				failOnError: false,
// 				async: true
// 			}).then(function(sSampleMetadata){
// 				var oOSampleMetadata = JSON.parse(sSampleMetadata);
// 				oODataMetadata.getServiceMetadata.returns(oOSampleMetadata);
// 		    	oModel.getMetaModel.returns(new sap.ui.model.odata.ODataMetaModel(oODataMetadata, null, { annotationsLoadedPromise : Promise.resolve() }));
// 				var aIgnoredFields = ["BankCharges"];
// 				that.oFieldSelectorController = new sap.ui.comp.odata.FieldSelectorController();
// 				that.oFieldSelectorController.init(oModel, null, aIgnoredFields);

// 				var oResult = that.oFieldSelectorController.getFields();
// 				equal(oResult["FinsPostingPaymentHeader"].length, 0);

// 				QUnit.start();
// 			}, function(oError){
// 				ok(false, "Error occured when loading the sample odata metadata");
// 				QUnit.start();
// 			});

// 		});

	}());
</script>
</head>
<body id="body" class="sapUiBody">
	<h1 id="qunit-header">qUnit Page for
		sap.ui.comp.odata.FieldSelectorController</h1>
	<h2 id="qunit-banner"></h2>
	<h2 id="qunit-userAgent"></h2>
	<ol id="qunit-tests"></ol>
	<div id="content"></div>
</body>
</html>
