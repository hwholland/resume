{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "required": [
    "site",
    "catalogs",
    "applications",
    "groups",
    "systemAliases"
  ],
  "properties": {
    "_version": {
      "type": "string",
      "additionalProperties": false
    },
    "site": {
      "description": " Site information (group order, title of site, shell-home intent, config)",
      "$ref": "#/definitions/site"
    },
    "catalogs": {
      "type": "object",
      "patternProperties": {
        "^[A-Z0-9a-z\\-\\:\\.\\~\\/\\_]+$": {
          "$ref": "#/definitions/catalog"
        }
      }
    },
    "applications": {
      "type": "object",
      "patternProperties": {
        "^[A-Z0-9a-z\\-\\:\\.\\~\\/\\_]+$": {
          "$ref": "#/definitions/application"
        }
      }
    },
    "groups": {
      "type": "object",
      "patternProperties": {
        "^[A-Z0-9a-z\\-\\:\\.\\~\\/\\_]+$": {
          "$ref": "#/definitions/group"
         }
      }
    },
    "systemAliases": {
      "type": "object",
      "patternProperties": {
        "^[A-Z0-9a-z\\_]+$": {
          "$ref": "#/definitions/systemAlias"
        }
      }
    },
    "personalization": {
      "type": "object",
      "additionalProperties": true
    }
  },

  "definitions": {
    "application": {
      "type": "object",
      "required": ["sap.app", "sap.ui"],
      "properties": {
        "sap.app": {
            "$ref": "cdmruntime/subschema_sapapp.json"
        },
        "sap.flp": {
            "$ref": "cdmruntime/subschema_sapflp.json"
        },
        "sap.platform.runtime": {
           "$ref": "cdmruntime/subschema_sapplatformruntime.json"
        },
        "sap.ui": {
           "$ref": "cdmruntime/subschema_sapui.json"
        },
        "sap.ui5": {
           "$ref": "cdmruntime/subschema_sapui5.json"
        },
        "sap.wda": {
           "$ref": "cdmruntime/subschema_sapwda.json"
        },
        "sap.gui": {
           "$ref": "cdmruntime/subschema_sapgui.json"
        }
      }
    },
    "rootgroups": {
      "type": "object",
      "required": ["groups"],
      "properties": {
        "groups": {
          "type": "array",
          "items": {
              "type": "string"
          }
        }
      }
    },
    "site": {
      "type": "object",
      "required": ["identification", "payload"],
      "properties": {
        "identification": {
          "$ref": "#/definitions/identification"
        },
        "payload": {
          "type": "object",
          "required": ["groupsOrder"],
          "properties": {
            "homeApp": {
              "type": "object",
              "properties" : {
                "semanticObject" : { "type" : "string" },
                "action" : { "type" : "string" }
              }
            },
            "config": {
              "type": "object", 
              "properties" : {
                "ushellConfig" : {
                   "type" : "any" 
                }
              }
            },
             "groupsOrder": {
	          "type": "array",
	          "items": {
	              "type": "string"
	          }
            }
          }
        }
      }
    },
    "catalog": {
      "type": "object",
      "required": ["identification", "payload"],
      "properties": {
        "identification": {
          "$ref": "#/definitions/identification"
        },
        "payload": {
          "type": "object",
          "properties": {
            "appDescriptors": {
              "type": "array",
              "items": {
                "type": "object",
                "required": ["id"],
                "properties": {
                  "id": {
                    "type": "string",
                    "maxLength": 70
                  },
                  "namespace": {
                    "type": "string"
                  }
                }
              }
            },
            "catalogs": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/catalog"
              }
            },
            "scName": {
              "type": "string"
            }
          }
        }
      }
    },
    "group": {
      "type": "object",
      "required": ["identification", "payload"],
      "properties": {
        "identification": {
          "$ref": "#/definitions/identification"
        },
        "payload": {
          "type": "object",
          "properties": {
            "groups": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/group"
              }
            },
            "links": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/tile"
              }
            },
            "tiles": {
              "description" : "CHECKME",
              "type": "array",
              "items": {
                "$ref": "#/definitions/tile"
              }
            }
          }
        }
      }
    },

    "systemAlias": {
      "type": "object",
      "required": ["id", "http", "https", "rfc"],
      "properties": {
        "_version": {
          "$ref": "#/definitions/_version"
        },
        "id": {
          "type": "string",
          "maxLength": 70
        },
        "client": {
          "type": "string",
          "maxLength": 3
        },
        "language": {
          "type": "string",
          "maxLength": 2
        },
        "http": {
          "$ref": "#/definitions/prot_http"
        },
        "https": {
          "$ref": "#/definitions/prot_http"
        },
        "rfc": {
          "$ref": "#/definitions/prot_rfc"
        }
      }
    },

    "identification": {
      "type": "object",
      "properties": {
        "description": {
          "$ref": "#/definitions/translatedText"
        },
        "entityType": {
          "type": "string",
          "enumeration": ["group"]
        },
        "id": {
          "type": "string",
          "maxLength": 70
        },
        "namespace": {
          "type": "string"
        },
        "title": {
          "$ref": "#/definitions/translatedText"
        }
      }
    },

    "translatedText": {
      "type": "string"
    },
    "i18n_key": {
      "type": "string"
    },

    "tile": {
      "type": "object",
      "required": ["target"],
      "properties": {
        "description": {
          "$ref": "#/definitions/translatedText"
        },
        "id": {
          "type": "string",
          "maxLength": 70
        },
        "icon": {
          "type": "string"
        },
        "target": {
          "type": "object",
          "required": ["semanticObject", "action"],
          "properties": {
            "semanticObject": {
              "description": "Represents semantic object",
              "type": "string",
              "pattern": "^[\\w\\*]{0,30}$"

            },
            "action": {
              "description": "Represents action an the semantic object",
              "type": "string",
              "pattern": "^[\\w\\*]{0,60}$"
            },
            "parameters": {
              "type": "array",
              "items": {
                "description": "Name-Value Pairs",
                "type": "object",
                "required": ["name", "value"],
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "value": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "title": {
          "$ref": "#/definitions/translatedText"
        },
        "subTitle" : {
          "$ref": "#/definitions/translatedText"
        },
        "icon" : {
          "$ref": "#/definitions/translatedText"
        }
      }
    },

    "prot_http": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "maxLength": 70
        },
        "host": {
          "type": "string"
        },
        "port": {
          "type": "integer"
        },
        "pathPrefix": {
          "type": "string"
        },
        "__metadata": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string"
            }
          }
        }
      }
    },

    "prot_rfc": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "maxLength": 70
        },
        "systemId": {
          "type": "string"
        },
        "host": {
          "type": "string"
        },
        "service": {
          "type": "integer"
        },
        "loginGroup": {
          "type": "string"
        },
        "sncNameR3": {
          "type": "string"
        },
        "sncQoPR3": {
          "type": "string"
        },
        "__metadata": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string"
            }
          }
        }
      }
    },

    "_version": {
      "description": "Version of this schema. It is managed by namespace owner",
      "type": "string",
      "enum" :["1.1.0"]
    }

  }
}
