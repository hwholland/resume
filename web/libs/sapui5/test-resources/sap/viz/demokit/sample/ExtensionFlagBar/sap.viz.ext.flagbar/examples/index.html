<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Olympics Medal Chart</title>
        <script type="text/javascript" src="../../../libs/d3.v2.js"></script>
        <script type="text/javascript" src="../../../libs/jquery.js"></script>
        <script type="text/javascript" src="../../../libs/sap.viz.js"></script>
        <script type="text/javascript">
            // Create and initialize the extension in an requireJS manner
            
            // Config the baseUrl for requireJS to find the specific module or file
            requirejs.config({
                baseUrl: "../bundles/sap/viz/ext/flagbar"
            });
            // Create the extension chart in the callback of requiring the related modules
            // The bundle file should typically be required.
            require(['flagbar-bundle'], function () {
                var CrosstableDataset = sap.viz.api.data.CrosstableDataset;
                var vizcore = sap.viz.api.core;
                //set log level
                //chart option
                var chartOption = {
                    title : {
                        visible : true,
                        text : 'Olympics Medals'
                    }
                };
                //dataset used by the chart
                var ds = new CrosstableDataset();
                ds.data({
                    'analysisAxis': [{
                    'index' : 1,
                    'data' : [{
                        'name' : 'Medal Type',
                        'values' : ['Gold','Silver','Bronze']
                    }]},{
                    'index' : 2,
                    'data' : [{
                        'name' : 'Country',
                        'values' : ['USA', 'China','Russia']
                    }]
                }], 

                'measureValuesGroup':[{
                   'index': 1,
                   'data' :[{
                            'name' : 'Athens (2004)',
                            'values' : [[35, 39, 29], [32, 17, 14],[27, 27, 38]]
                    },{ 
                            'name' : 'Beijing (2008)',
                            'values' : [[36, 38, 36], [51, 21, 28],[23, 21, 29]]
                    }]
                }]});
                // load images
                sap.viz.api.env.Resource.path('sap.viz.ext.flagbar.ImgLoadPath', ['../bundles/sap/viz/ext/flagbar/sap_viz_ext_flag-src/resources/img/']);
                //create chart immediately
                var chart = vizcore.createViz({
                    type : 'sap.viz.ext.flagbar',
                    data : ds,
                    container : $('#chart'),
                    options : chartOption
                });
            });
        </script>
        <style type="text/css">
            .brush .extent {
                fill-opacity: .3;
                stroke: #fff;
                shape-rendering: crispEdges;
            }
            .axis line, .axis path {
                fill: none;
                stroke: #000;
                shape-rendering: crispEdges;
            }
            .axis text {
                text-shadow: 0 1px 0 #fff;
                cursor: move;
            }
       </style>
    </head>
    <body>
        <div id="chart" style="width: 800px; height: 600px;"></div>
    </body>
</html>