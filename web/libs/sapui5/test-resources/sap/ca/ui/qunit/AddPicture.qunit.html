<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

    <title>Fiori Wave 2: Test Page for AddPicture</title>

    <script src="../../../../../resources/sap-ui-core.js"
            id="sap-ui-bootstrap"
            data-sap-ui-libs="sap.m"
            data-sap-ui-theme="sap_bluecrystal"
            data-sap-ui-xx-bindingSyntax="complex"
            data-sap-ui-noConflict="true">
    </script>

    <link rel="stylesheet" href="../../../../../resources/sap/ui/thirdparty/qunit.css" type="text/css" media="screen"/>
    <script type="text/javascript" src="../../../../../resources/sap/ui/thirdparty/qunit.js"></script>
    <script type="text/javascript" src="../../../../../resources/sap/ui/qunit/qunit-junit.js"></script>
    <script type="text/javascript" src="../../../../../resources/sap/ui/qunit/QUnitUtils.js"></script>

    <script type="text/javascript" src="utils/qunithelper.js"></script>
    <script type="text/javascript" src="AddPictureTest.js"></script>

    <script type="text/javascript">
        QUnit.config.autostart = false;
        jQuery(document).ready(function () {
            QUnit.start();
        });

        // require dialog module
        jQuery.sap.require("sap.ca.ui.AddPicture");

        var self = this;

        // --------------------------------------------

        // Add button tab style enabled.
        var oAppPicture1 = new sap.ca.ui.AddPicture({id: ADD_PICTURE_ID});
        oAppPicture1.setButtonPageType(sap.ca.ui.AddPicture.BUTTON_PAGE_TYPE.TAB);

        var oModel1 = new sap.ui.model.json.JSONModel();
        oModel1.setData({ provider: [
            {
                id: 'PICTUREITEM1',
                base64content: image1
            },
            {
                id: 'PICTUREITEM2',
                base64content: image2
            }
        ]});
        var oPictureItemTemplate1 = new sap.ca.ui.PictureItem({ status: sap.ca.ui.PictureItem.STATUS.ADD });
        oPictureItemTemplate1.bindProperty("source", "base64content");
        oAppPicture1.setModel(oModel1);
        oAppPicture1.bindAggregation("pictures", {path: "/provider", template: oPictureItemTemplate1});
        oAppPicture1.attachShow(
                function () {
                    self.isShow = true;
                }
        );

        // --------------------------------------------

        // Add button tab style disabled (editable=false).
        var oAppPicture2 = new sap.ca.ui.AddPicture({id: ADD_PICTURE_ID + '2'});
        oAppPicture2.setButtonPageType(sap.ca.ui.AddPicture.BUTTON_PAGE_TYPE.TAB);
        oAppPicture2.setEditable(false);

        // --------------------------------------------

        // Add button form style enabled.
        var oAppPicture3 = new sap.ca.ui.AddPicture({id: ADD_PICTURE_ID + '3'});
        oAppPicture3.setButtonPageType(sap.ca.ui.AddPicture.BUTTON_PAGE_TYPE.FORM);
        var oModel3 = new sap.ui.model.json.JSONModel();
        oModel3.setData({ provider: [
            {
                id: 'PICTUREITEM3_1',
                base64content: image1
            },
            {
                id: 'PICTUREITEM3_2',
                base64content: image2
            }
        ]});
        var oPictureItemTemplate3 = new sap.ca.ui.PictureItem({ status: sap.ca.ui.PictureItem.STATUS.ADD });
        oPictureItemTemplate3.bindProperty("source", "base64content");
        oAppPicture3.setModel(oModel3);
        oAppPicture3.bindAggregation("pictures", {path: "/provider", template: oPictureItemTemplate3});

        // --------------------------------------------

        // Add button form style disabled by a max limit reached.
        var oAppPicture4 = new sap.ca.ui.AddPicture({id: ADD_PICTURE_ID + '4'});
        oAppPicture4.setButtonPageType(sap.ca.ui.AddPicture.BUTTON_PAGE_TYPE.FORM);

        // set a max picture value to fire the event that disable the button
        oAppPicture4.setMaxPictureNumber(2);

        // attach a flag to maxPictureLimitReached event
        oAppPicture4.attachMaxPictureLimitReached(
                function () {
                    self.isLimitReached2 = true;
                }
        );

        var oPictureItemTemplate4 = new sap.ca.ui.PictureItem({ status: sap.ca.ui.PictureItem.STATUS.ADD });
        oPictureItemTemplate4.bindProperty("source", "base64content");
        var oModel4 = new sap.ui.model.json.JSONModel();
        oModel4.setData({ provider: [
            {
                id: 'PICTUREITEM_4_1',
                base64content: image1
            },
            {
                id: 'PICTUREITEM_4_2',
                base64content: image2
            }
        ]});
        oAppPicture4.setModel(oModel4);
        oAppPicture4.bindAggregation("pictures", {path: "/provider", template: oPictureItemTemplate4});

        // --------------------------------------------

        // Add button text and width properties methods.
        var oAppPicture5 = new sap.ca.ui.AddPicture({id: ADD_PICTURE_ID + '5'});
        oAppPicture5.setText(customButtonText);
        oAppPicture5.setWidth(customWidth);

        // attach a flag to pictureAdded event
        oAppPicture5.attachPictureAdded(
                function () {
                    self.pictureAdded = true;
                }
        );
        // --------------------------------------------

        // Add button text and width properties methods in constructor.
        var oAppPicture6 = new sap.ca.ui.AddPicture({id: ADD_PICTURE_ID + '6', text: customButtonText, width: customWidth});

        // attach a flag to pictureAdded event
        oAppPicture6.attachPictureAdded(
                function () {
                    self.pictureAdded2 = true;
                }
        );


        // --------------------------------------------

        var oHtml = new sap.ui.core.HTML({
            content: '<h1 id="qunit-header">Fiori Wave 2: Test Page for AddPicture</h1>' +
                    '<h2 id="qunit-banner"></h2><h2 id="qunit-userAgent"></h2>' +
                    '<ol id="qunit-tests"></ol>' +
                    '<h4>Control embedded in a Tab - Button without border</h4>' +
                    '<h5>Enabled with pictures</h5>' +
                    '<div id="contentHolder1"></div> ' +
                    '<h5>Disabled with pictures (editable=false)</h5>' +
                    '<div id="contentHolder2"></div>' +
                    '<h4>Control embedded in a Form - Button without border </h4>' +
                    '<h5>Enabled</h5>' +
                    '<div id="contentHolder3"></div>' +
                    '<h5>Disabled (will raise a max picture limit reached)</h5>' +
                    '<div id="contentHolder4"></div>' +
                    '<h5>Text and width properties</h5>' +
                    '<div id="contentHolder5"></div>' +
                    '<h5>Text and width properties (constructor)</h5>' +
                    '<div id="contentHolder6"></div>',
            afterRendering: function () {
                oAppPicture1.placeAt("contentHolder1");
                oAppPicture2.placeAt("contentHolder2");
                oAppPicture3.placeAt("contentHolder3");
                oAppPicture4.placeAt("contentHolder4");
                oAppPicture5.placeAt("contentHolder5");
                oAppPicture6.placeAt("contentHolder6");
            }
        });

        var app = new sap.m.App("myApp", {
            initPage: "myFirstPage"
        });

        var page = new sap.m.Page("myFirstPage", {
            title: "Fiori - AddPicture Test",
            showNavButton: true,
            enableScrolling: true,
            content: oHtml
        });
        app.addPage(page).placeAt("content");


    </script>

</head>
<body id="body" class="sapUiBody">
<div id="qunit"></div>
<div id="qunit-testresult"></div>
<div id="content"></div>
</body>
</html>