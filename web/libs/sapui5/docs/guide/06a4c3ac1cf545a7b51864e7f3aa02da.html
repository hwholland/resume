<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="abstract" content="The sap.ui.comp.smartvariants.SmartVariantManagement control provides an interface to enable a simple integration of the VariantManagement control and access to the layered repository of the SAPUI5 flexibility services for easy communication."/>
<meta name="description" content="The sap.ui.comp.smartvariants.SmartVariantManagement control provides an interface to enable a simple integration of the VariantManagement control and access to the layered repository of the SAPUI5 flexibility services for easy communication."/>

<link rel="stylesheet" type="text/css" href="css/prettify.css?x=6651369752829744"/>
<link rel="stylesheet" type="text/css" href="css/documentation.css?x=6651369752829744"/>
<title>Smart Variant Management</title>
  <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/themes/base/highlight-query-terms.css" />
    <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/js/google-code-prettify/prettify.css" />
    <script src="../../resources/sap/ui/demokit/js/sdk-pagehelper.js"></script>
  </head>
<body class="" id="loio06a4c3ac1cf545a7b51864e7f3aa02da">
<div id="wrapper"><div id="container">

	
	
	<h1 class="title topictitle1">Smart Variant Management </h1>

	
	
	
	<div class="body conbody"><p class="shortdesc">The <samp class="ph codeph">sap.ui.comp.smartvariants.SmartVariantManagement</samp> control
		provides an interface to enable a simple integration of the
			<samp class="ph codeph">VariantManagement</samp> control and access to the layered repository of the
			<span class="ph"><span class="ph pname">SAPUI5</span></span> flexibility services
		for easy communication.</p>

		<div class="note caution"><span class="cautiontitle">Caution</span> 
                <p class="p">Controls in the <samp class="ph codeph">sap.ui.comp</samp> library (smart controls) focus
                    strongly on SAP Fiori elements.</p>

                <p class="p">We will continue to maintain the library and all of its controls in the future.
                    However, there will be no development of new features unless specifically
                    requested by SAP Fiori elements.</p>

            </div>

		<div class="note note"><span class="notetitle">Note</span> <span class="ph">The code samples in this section reflect examples of possible use
				cases and might not always be suitable for your purposes. Therefore, we recommend
				that you do not copy and use them directly</span></div>

		<p class="p"><span class="ph">For more
				information about this control, see the <a class="xref" href="../../docs/api/symbols/sap.ui.comp.smartvariants.SmartVariantManagement.html" alt="../../docs/api/symbols/sap.ui.comp.smartvariants.SmartVariantManagement.html" title="../../docs/api/symbols/sap.ui.comp.smartvariants.SmartVariantManagement.html">API Reference</a> and the <a class="xref" target="_blank" href="../../explored.html#/entity/sap.ui.comp.variants.VariantManagement/samples" alt="../../explored.html#/entity/sap.ui.comp.variants.VariantManagement/samples" title="../../explored.html#/entity/sap.ui.comp.variants.VariantManagement/samples">samples</a>.</span></p>

		<div class="section"><div class="section_title">Overview</div><div type="Overview">
			
			<p class="p">The <samp class="ph codeph">SmartVariantManagement</samp> control is a specialization of the
					<samp class="ph codeph">VariantManagement</samp> control. This basic control handles the
				visual representation of variants, or views, on the user interface.</p>

			<div class="note note"><span class="notetitle">Note</span> You can define views for specific selections of data on the user interface, for
				example, based on filter settings. Views are also called "variants," usually in a
				more technical context, for example, in the API names and texts of the
				control.</div>

			<p class="p">The <samp class="ph codeph">SmartVariantManagement</samp> control communicates with the layered
				repository. The layered repository provides a way to store and retrieve flexibility
				information, such as personalization data and views for other controls.</p>

			<p class="p">Key users can modify and save a standard view that is then stored in the VENDOR layer
				of the layered repository.</p>

			<p class="p">For more information about flexibility services, see <a class="xref" href="a8e55aa2f8bc4127923b20685a6d1621.html" title="Modification-free, cost-saving, easy to use, and performant: Discover the new flexibility when adapting SAP Fiori UIs using SAPUI5 flexibility services.">SAPUI5 Flexibility Services: Adapting UIs Made Easy</a>.</p>

			<div class="note note"><span class="notetitle">Note</span> It is strongly recommended to use the <samp class="ph codeph">SmartVariantManagement</samp>
				control, because it enables the communication with the layered repository.</div>

			<p class="p">The <samp class="ph codeph">SmartVariantManagement</samp> control is used in the following
				controls:</p>

			<ul class="ul" id="loio06a4c3ac1cf545a7b51864e7f3aa02da__ul_fj3_xsy_zv">
				<li class="li"><samp class="ph codeph">SmartFilterBar</samp>
				</li>

				<li class="li"><samp class="ph codeph">SmartTable</samp></li>

				<li class="li"><samp class="ph codeph">SmartChart</samp></li>

			</ul>

		</div></div>

		<div class="section"><div class="section_title">Prerequisites</div><div type="Prerequisites">
			
			<p class="p">In order to use the <samp class="ph codeph">SmartVariantManagement</samp> control, consuming
				applications have to provide the following information and comply with the interface
				standard: </p>

			<ul class="ul" id="loio06a4c3ac1cf545a7b51864e7f3aa02da__ul_c2q_45y_zv">
				<li class="li">The control consuming the personalization (<samp class="ph codeph">persControl</samp>)</li>

				<li class="li">A type</li>

				<li class="li">The name of the property describing the key</li>

				<li class="li">Optional information about the data source</li>

			</ul>

			<p class="p">This information has to be transferred to the <samp class="ph codeph">SmartVariantManagement</samp>
				control during creation using the <samp class="ph codeph">personalizableControl</samp>
				association. To transfer the data, the
					<samp class="ph codeph">sap.ui.comp.smartvariants.PersonalizableInfo</samp> class must be
				used.</p>

			<p class="p">The <samp class="ph codeph">persControl</samp> must also be attached to the
					<samp class="ph codeph">Initialise</samp> event of the control and call the
					<samp class="ph codeph">initialise</samp> method of the control, for example:</p>

			<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-js">
sap.ui.require([
    'sap/ui/comp/smartvariants/SmartVariantManagement',
    'sap/ui/comp/smartvariants/PersonalizableInfo'
], function (SmartVariantManagement, PersonalizableInfo) {

    var oSmartVariantManagement = new SmartVariantManagement();
    var oPersInfo = new PersonalizableInfo({
        type: "filterBar",
        keyName: "persistencyKey",
        dataSource: this.getEntityType()
    });
    oPersInfo.addControl(this);

    oSmartVariantManagement.addPersonalizableControl(oPersInfo);

    this.fnInitialiseVariants = jQuery.proxy(this._initialiseVariants, this);
    oSmartVariantManagement.attachInitialise(this.fnInitialiseVariants);

    oSmartVariantManagement.initialise();
})
</pre></div>

			<p class="p">Once the <samp class="ph codeph">SmartVariantManagement</samp> control has initialized the layered
				repository and retrieved the relevant changes, it informs the
					<samp class="ph codeph">persControl</samp> about the ending of the initialization phase via
				the <samp class="ph codeph">Initialise</samp> event.</p>

		</div></div>

		<div class="section"><div class="section_title">Details</div><div type="Details"><p class="p">To exchange data with the layered repository, the
					<samp class="ph codeph">persControl</samp> has to provide the following public methods:
				</p>
<ul class="ul" id="loio06a4c3ac1cf545a7b51864e7f3aa02da__ul_d2q_45y_zv">
				<li class="li"><samp class="ph codeph">fetchVariant</samp></li>

				<li class="li"><samp class="ph codeph">applyVariant</samp> (<samp class="ph codeph">oVariant</samp>) </li>

			</ul>
<p class="p">The <samp class="ph codeph">fetchVariant</samp> method is called by the
					<samp class="ph codeph">SmartVariantManagement</samp> control every time this is triggered by
				interaction with the <samp class="ph codeph">VariantManagement</samp> control and when executing a
					<samp class="ph codeph">Save</samp>. In the latter case, the <samp class="ph codeph">persControl</samp> has
				to return a JSON-compliant object. The layered repository treats this information as
				a black box. It does not manipulate this object in any way.</p>
<p class="p">The
					<samp class="ph codeph">applyVariant</samp> is called by the
					<samp class="ph codeph">SmartVariantManagement</samp> control every time the user selects a
				new entry in the view list. The previously stored JSON-compliant object will be
				transferred to the <samp class="ph codeph">applyVariant</samp> method, and the
					<samp class="ph codeph">persControl</samp> can now respond to the information stored in this
				object, for
				example:</p>
<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-js">
sap.ui.comp.smartfilterbar.SmartFilterBar.prototype.fetchVariant = function() {
	var aFiltersInfo;
	var oVariant = {};
	aFiltersInfo = this._determineVariantFiltersInfo();

	oVariant.filterbar = (!aFiltersInfo) ? [] : aFiltersInfo;
	oVariant.filterBarVariant = this._fetchVariantFiltersData();

	return oVariant;
};

sap.ui.comp.smartfilterbar.SmartFilterBar.prototype.applyVariant = function(oVariant) {

	this._applyVariant(oVariant);
};
</pre></div>
<div class="note note"><span class="notetitle">Note</span> The
					<samp class="ph codeph">SmartVariantManagement</samp> control triggers the
					<samp class="ph codeph">fetchVariant</samp> method without any user interaction right after it
				raises the <samp class="ph codeph">Initialise</samp> event. This enables the
					<samp class="ph codeph">SmartVariantManagement</samp> control to handle the standard view.
				This view represents the state of the user interface that is delivered by default.
				The control can revert the data to this view every time the user selects the
				standard view at a later point in time. The standard view is not transferred to the
				layered repository and is therefore not stored, unless changes are made by a key
				user.</div>
<div class="sectiondiv subsection">
				<p class="p subsectiontitle">Page
					Variants</p>

				<p class="p"> A page variant is a single UI instance of the
						<samp class="ph codeph">SmartVariantManagement</samp> control that can personalize not
					only <span class="ph emphasis emphasis">one</span>, but multiple smart controls.</p>

				<p class="p">To use this enhanced function of the <samp class="ph codeph">SmartVariantManagement</samp>
					control, take the following into consideration:</p>

				<ul class="ul" id="loio06a4c3ac1cf545a7b51864e7f3aa02da__ul_zkj_hbz_zv">
					<li class="li">
						<p class="p"> The <samp class="ph codeph">SmartVariantManagement</samp> control has a
								<samp class="ph codeph">persistencyKey</samp> property of its own.</p>

						<p class="p">This is the key for storing the personalization data of all smart
							controls that you want to make personalizable.</p>

					</li>

					<li class="li">
						<p class="p">For each smart control, a persistency key has to be provided.</p>

						<p class="p">Within the personalization data, this key will identify the specific data
							for each individual smart control.</p>

					</li>

					<li class="li">
						<p class="p">The smart controls support the <samp class="ph codeph">smartVariant</samp> association
							which has to be assigned along with the page variant reference.</p>

					</li>

				</ul>

				<div class="note note"><span class="notetitle">Note</span> If the page variant is hosted by the <samp class="ph codeph">SmartFilterBar</samp> control,
					the persistency key of the page variant has to be assigned using the
						<samp class="ph codeph">pageVariantPersistencyKey</samp> custom data of the
						<samp class="ph codeph">SmartFilterBar</samp> control. The <samp class="ph codeph">SmartFilterBar</samp>
					control internally adapts the related <samp class="ph codeph">SmartChart</samp> or
						<samp class="ph codeph">SmartTable</samp> controls, and, therefore, the
						<samp class="ph codeph">smartVariant</samp> association doesn't have to be assigned.
				</div>

			</div><div class="sectiondiv subsection">
				<p class="p subsectiontitle">Favorites</p>

				<p class="p">If you want to use favorites to manage your views, you have to set the
						<samp class="ph codeph">useFavorites</samp>
					property in the <samp class="ph codeph">VariantManagement</samp> control to
						<samp class="ph codeph">true</samp> (default is <samp class="ph codeph">false</samp>).</p>

				<p class="p">In the <samp class="ph codeph">VariantManagement</samp> control, each
						<samp class="ph codeph">VariantItem</samp> has a <samp class="ph codeph">favorite</samp> property that
					determines if the <samp class="ph codeph">VariantItem</samp> in question is treated as a
					favorite.</p>

				<p class="p">The <samp class="ph codeph">SmartVariantManagement</samp> control automatically starts in a
					mode where favorites are activated. </p>

				<p class="p">In the <span class="ph uicontrol">Manage Views</span> dialog, you can define favorites.
					Favorites selected in the dialog are stored as changes in the layered repository
					that are applied whenever the <samp class="ph codeph">SmartVariantManagement</samp> control is
					initiated.</p>

			</div></div></div>

	</div>

</div></div>

</body>
</html>