<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="abstract" content="You can add a SmartMicroChart control to a facet within the header area in the object page."/>
<meta name="description" content="You can add a SmartMicroChart control to a facet within the header area in the object page."/>

<link rel="stylesheet" type="text/css" href="css/prettify.css?x=7938882510634588"/>
<link rel="stylesheet" type="text/css" href="css/documentation.css?x=7938882510634588"/>
<title>Smart Micro Chart Facet</title>
  <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/themes/base/highlight-query-terms.css" />
    <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/js/google-code-prettify/prettify.css" />
    <script src="../../resources/sap/ui/demokit/js/sdk-pagehelper.js"></script>
  </head>
<body class="" id="loioe219fd0c85b842c69ac3a514e712ece5">
<div id="wrapper"><div id="container">

	<h1 class="title topictitle1">Smart Micro Chart Facet</h1>

	
	<div class="body conbody"><p class="shortdesc">You can add a <samp class="ph codeph">SmartMicroChart</samp> control to a facet within the header area
		in the object page.</p>

		<p class="p">A smart micro chart facet contains a title, subtitle, <samp class="ph codeph">SmartMicroChart</samp> control,
			and a footer. Currently, the <samp class="ph codeph">SmartMicroChart</samp> control supports both the
			smart area micro chart and the smart bullet micro chart (shown below) within the object
			page header.</p>

		<p class="p">To add a smart micro chart facet, in the local annotations file, use a
				<samp class="ph codeph">UI.HeaderFacets</samp> term and the complex type
				<samp class="ph codeph">UI.ReferenceFacet</samp> and reference the <samp class="ph codeph">UI.Chart</samp> as
			shown in the sample code below.</p>

		<div class="fig fignone" id="loioe219fd0c85b842c69ac3a514e712ece5__fig_zxq_wpl_lw"><div class="figcontainer">
			
			<img class="image" id="loioe219fd0c85b842c69ac3a514e712ece5__image_bgp_vpl_lw" src="loioced470e1372649bf81838db22e803aae_LowRes.png"/>
		<div class="figcap">Object Page Header: Smart Bullet Micro Chart</div></div></div>

		<div class="section"><div class="section_title">Code Samples</div><div type="Code Samples"><div class="sectiondiv subsection">
                <p class="p subsectiontitle">UI.HeaderFacets and UI.ReferenceFacet </p>

            </div><div class="p">
                <div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">&lt;Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductType"&gt;
    &lt;Annotation Term="UI.HeaderFacets"&gt;
        &lt;Collection&gt;
            &lt;Record Type="UI.ReferenceFacet"&gt;
                &lt;PropertyValue Property="Target" AnnotationPath="to_ProductSalesPrice/@UI.Chart"/&gt;
            &lt;/Record&gt;
        &lt;/Collection&gt;
    &lt;/Annotation&gt;
&lt;/Annotations&gt;
</pre></div>

            </div>
<div class="sectiondiv subsection">
                <p class="p subsectiontitle">UI.Chart Annotations</p>

                <p class="p">The <samp class="ph codeph">UI.Chart Title</samp> property is used for the title. </p>

                <p class="p">The <samp class="ph codeph">UI.Chart Description</samp> property is used for the subtitle.</p>

            </div><p class="p"><span class="ph emphasis emphasis">Smart Area Micro Chart</span></p>
<div class="p">
                <div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">&lt;Annotation Term="UI.Chart"&gt;
    &lt;Record Type="UI.ChartDefinitionType"&gt;
        &lt;PropertyValue Property="Title" String="Sales Price" /&gt;
        &lt;PropertyValue Property="Description" String="Area Micro Chart" /&gt;
        &lt;PropertyValue Property="ChartType" EnumMember="UI.ChartType/Area" /&gt;
        &lt;PropertyValue Property="Dimensions"&gt;
            &lt;Collection&gt;
                &lt;PropertyPath&gt;PriceDay&lt;/PropertyPath&gt;
            &lt;/Collection&gt;
        &lt;/PropertyValue&gt;
        &lt;PropertyValue Property="Measures"&gt;
            &lt;Collection&gt;
                &lt;PropertyPath&gt;AreaChartPrice&lt;/PropertyPath&gt;
            &lt;/Collection&gt;
        &lt;/PropertyValue&gt;
        &lt;PropertyValue Property="MeasureAttributes"&gt;
            &lt;Collection&gt;
                &lt;Record Type="UI.ChartMeasureAttributeType"&gt;
                    &lt;PropertyValue Property="Measure" PropertyPath="AreaChartPrice" /&gt;
                    &lt;PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" /&gt;
                    &lt;PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#AreaChartPrice" /&gt;
                &lt;/Record&gt;
            &lt;/Collection&gt;
        &lt;/PropertyValue&gt;
    &lt;/Record&gt;
&lt;/Annotation&gt;
</pre></div>

            </div>
<p class="p"><span class="ph emphasis emphasis">Smart Bullet Micro Chart</span></p>
<div class="p">
                <div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">&lt;Annotation Term="UI.Chart"&gt;
    &lt;Record Type="UI.ChartDefinitionType"&gt;
        &lt;PropertyValue Property="Title" String="Sales Revenue" /&gt;
        &lt;PropertyValue Property="Description" String="Bullet Micro Chart" /&gt;
        &lt;PropertyValue Property="ChartType" EnumMember="UI.ChartType/Bullet" /&gt;
        &lt;PropertyValue Property="Measures"&gt;
            &lt;Collection&gt;
                &lt;PropertyPath&gt;BulletChartRevenue&lt;/PropertyPath&gt;
            &lt;/Collection&gt;
        &lt;/PropertyValue&gt;
        &lt;PropertyValue Property="MeasureAttributes"&gt;
            &lt;Collection&gt;
                &lt;Record Type="UI.ChartMeasureAttributeType"&gt;
                    &lt;PropertyValue Property="Measure" PropertyPath="BulletChartRevenue" /&gt;
                    &lt;PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" /&gt;
                    &lt;PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#BulletChartRevenue" /&gt;
                &lt;/Record&gt;
            &lt;/Collection&gt;
        &lt;/PropertyValue&gt;
    &lt;/Record&gt;
&lt;/Annotation&gt;
</pre></div>

            </div>
<div class="p">
                <div class="note note"><span class="notetitle">Note</span> 
                    <p class="p">The template does not currently support the use of navigation properties
                        within the <samp class="ph codeph">UI.Chart</samp> term for the smart micro chart (see
                        example below).</p>

                    <div class="fig fignone" id="loioe219fd0c85b842c69ac3a514e712ece5__fig_khh_pfx_kx"><div class="figcontainer">
                        
                        <img class="image" id="loioe219fd0c85b842c69ac3a514e712ece5__image_occ_4fx_kx" src="loio02debb6e41424ba09ea3cc6ef0005ff7_LowRes.png"/>
                    <div class="figcap">Navigation Property</div></div></div>

                </div>

            </div>
<div class="sectiondiv subsection">
                <p class="p subsectiontitle">UI.DataPoint Annotation</p>

                <p class="p">The <samp class="ph codeph">DataPoint</samp> property of the <samp class="ph codeph">MeasureAttributes</samp>
                    of the <samp class="ph codeph">Chart</samp> annotation should point to the
                        <samp class="ph codeph">UI.DataPoint</samp> annotation. </p>

                <p class="p">The smart micro chart supports both the <samp class="ph codeph">Criticality</samp> and
                        <samp class="ph codeph">CriticalityCalculation</samp> properties of a
                        <samp class="ph codeph">UI.DataPoint</samp>. For an example of how to use the
                        <samp class="ph codeph">CriticalityCalculation</samp> see the smart area micro chart
                    annotation example; for an example of how to use the
                        <samp class="ph codeph">Criticality</samp> property, see the smart bullet micro chart
                    annotation example. </p>

                <div class="p">
                    <div class="note note"><span class="notetitle">Note</span> Although the <samp class="ph codeph">Title</samp> for the <samp class="ph codeph">UI.DataPoint</samp>
                        is mandatory, it is not used by the smart micro chart.</div>

                </div>

                <p class="p"><span class="ph emphasis emphasis">Smart Area Micro Chart</span></p>

                <div class="p">
                    <div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">&lt;Annotation Term="UI.DataPoint" Qualifier="AreaChartPrice"&gt;
    &lt;Record&gt;
        &lt;PropertyValue Property="Title" String="Sales Price" /&gt;
        &lt;PropertyValue Property="Value" Path="AreaChartPrice" /&gt;
        &lt;PropertyValue Property="TargetValue" Path="TargetPrice" /&gt;
        &lt;PropertyValue Property="CriticalityCalculation"&gt;
            &lt;Record&gt;
                &lt;PropertyValue Property="ImprovementDirection" EnumMember="UI.ImprovementDirectionType/Target" /&gt;
                &lt;PropertyValue Property="DeviationRangeHighValue" Path="DeviationUpperBoundPrice" /&gt;
                &lt;PropertyValue Property="DeviationRangeLowValue" Path="DeviationLowerBoundPrice" /&gt;
                &lt;PropertyValue Property="ToleranceRangeHighValue" Path="ToleranceUpperBoundPrice" /&gt;
                &lt;PropertyValue Property="ToleranceRangeLowValue" Path="ToleranceLowerBoundPrice" /&gt;
            &lt;/Record&gt;
        &lt;/PropertyValue&gt;
    &lt;/Record&gt;
&lt;/Annotation&gt;
</pre></div>

                </div>

            </div><p class="p"><span class="ph emphasis emphasis">Smart Bullet Micro Chart </span></p>
<div class="p">
                <div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">&lt;Annotation Term="UI.DataPoint" Qualifier="BulletChartRevenue"&gt;
    &lt;Record&gt;
        &lt;PropertyValue Property="Title" String="Sales Revenue" /&gt;
        &lt;PropertyValue Property="Value" Path="BulletChartRevenue" /&gt;
        &lt;PropertyValue Property="TargetValue" Path="TargetRevenue" /&gt;
        &lt;PropertyValue Property="ForecastValue" Path="ForecastRevenue" /&gt;
        &lt;PropertyValue Property="MinimumValue" Decimal="100" /&gt;
        &lt;PropertyValue Property="MaximumValue" Decimal="300" /&gt;
        &lt;PropertyValue Property="Criticality" Path="Criticality" /&gt;
    &lt;/Record&gt;
&lt;/Annotation&gt;</pre></div>

            </div>
<div class="note note"><span class="notetitle">Note</span> 
                <div class="p">The following must all point to the same property in the
                        <samp class="ph codeph">entityType</samp>:<ul class="ul" id="loioe219fd0c85b842c69ac3a514e712ece5__ul_h35_pkm_lw">
                        <li class="li">
                            <p class="p"><samp class="ph codeph">Measures</samp> property of the <samp class="ph codeph">Chart</samp>
                                annotation</p>

                        </li>

                        <li class="li"><samp class="ph codeph">Measure</samp> property of the
                                <samp class="ph codeph">MeasureAttributes</samp> property of the
                                <samp class="ph codeph">Chart</samp> annotation</li>

                        <li class="li"><samp class="ph codeph">Value</samp> property of the <samp class="ph codeph">DataPoint</samp>
                            annotation</li>

                    </ul>
</div>

            </div>
<div class="sectiondiv subsection">
                <p class="p subsectiontitle">Unit of Measure Annotations</p>

                <p class="p">The <samp class="ph codeph">Unit of Measure</samp> is used for the footer of the smart micro
                    chart. An annotation for the <samp class="ph codeph">Unit of Measure</samp> is included in the
                    example below. We use the <samp class="ph codeph">Measures.ISOCurrency</samp> term in the
                    example and it is applied to the entity type property that will be used as the
                    value property of the <samp class="ph codeph">UI.DataPoint</samp>.</p>

                <div class="p">
                    <div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">&lt;Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm" Target="STTA_PROD_MAN.STTA_C_MP_ProductSalesPriceType/AreaChartPrice" &gt;
    &lt;Annotation Term="Measures.ISOCurrency" Path="Currency"/&gt;
&lt;/Annotations&gt;</pre></div>

                </div>

                <div class="note note"><span class="notetitle">Note</span> 
                    <p class="p">Currently, the <samp class="ph codeph">Measures</samp> vocabulary is not supported in CDS
                        views. Therefore, the annotation for the <samp class="ph codeph">Unit of Measure</samp>
                        must be added to the applicationâ€™s local annotations file.</p>

                </div>

            </div><div class="sectiondiv subsection">
                <p class="p subsectiontitle">CDS Annotations</p>

            </div><p class="p"><span class="ph emphasis emphasis">CDS Annotation Definition for UI.Chart</span></p>
<div class="p">
                <div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">chart : array of
{
    qualifier : String(120);
    @LanguageDependency.maxLength : 40 
    title : String(60);
    @LanguageDependency.maxLength : 80 
    description : String(120);
    chartType : String enum
    {
       COLUMN;
       COLUMN_STACKED;
       COLUMN_STACKED_100;
       COLUMN_DUAL;
       COLUMN_STACKED_DUAL;
       COLUMN_STACKED_DUAL_100;
       BAR;
       BAR_STACKED;
       BAR_STACKED_100;
       BAR_DUAL;
       BAR_STACKED_DUAL;
       BAR_STACKED_DUAL_100;
       AREA;
       AREA_STACKED;
       AREA_STACKED_100;
       HORIZONTAL_AREA;
       HORIZONTAL_AREA_STACKED;
       HORIZONTAL_AREA_STACKED_100;
       LINE;
       LINE_DUAL;
       COMBINATION;
       COMBINATION_STACKED;
       COMBINATION_STACKED_DUAL;
       HORIZONTAL_COMBINATION_STACKED;
       HORIZONTAL_COMBINATION_STACKED_DUAL;
       PIE;
       DONUT;
       SCATTER;
       BUBBLE;
       RADAR;
       HEAT_MAP;
       TREE_MAP;
       WATERFALL;
       BULLET;
       VERTICAL_BULLET;
    };
    dimensions : array of elementRef;
    measures : array of elementRef;
    dimensionAttributes : array of
    {
       dimension : elementRef;
       role : String(10) enum
       {
           CATEGORY;
           SERIES;
       };
    };
    measureAttributes : array of
    {
       measure : elementRef;
       role : String(10) enum
       {
           AXIS_1;
           AXIS_2;
           AXIS_3;
       };
       asDataPoint : Boolean default true;
    };
}
</pre></div>

            </div>
<div class="p"><span class="ph emphasis emphasis"><span class="ph emphasis emphasis">CDS Annotation for UI.Chart</span>: Smart Area Micro
                    Chart</span><div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">@UI.chart:[{
  title: 'Sales Price',
  description: 'Area Micro Chart',
  chartType: #AREA,
  dimensions:['PriceDay'],
  measures:['AreaChartPrice'],
  measureAttributes: [
    { measure: 'AreaChartPrice', role: #AXIS_1, asDataPoint: true }
  ]
}]
</pre></div>
</div>
<p class="p"><span class="ph emphasis emphasis"><span class="ph emphasis emphasis">CDS
                        Annotation for UI.Chart</span>: Smart Bullet Micro
                    Chart</span></p>
<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">@UI.chart:[{
  title:'Sales Revenue',
  description: 'Bullet Micro Chart',
  chartType: #BULLET,
  measures:['BulletChartRevenue'],
  measureAttributes: [
    { measure: 'BulletChartRevenue', role: #AXIS_1, asDataPoint: true }
  ]
}]
</pre></div>
<p class="p"><span class="ph emphasis emphasis">CDS
                    Annotation Definition for UI.DataPoint</span></p>
<div class="p">
                <div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">dataPoint
{
    @LanguageDependency.maxLength : 40 
    title : String(60);
    @LanguageDependency.maxLength : 80 
    description : String(120);
    @LanguageDependency.maxLength : 190 
    longDescription : String(250);
    targetValue : DecimalFloat;
    targetValueElement : elementRef;
    forecastValue : elementRef;
    minimumValue : DecimalFloat;
    maximumValue : DecimalFloat;
    visualization : String enum
    {
        NUMBER;
        BULLET_CHART;
        DONUT;
        PROGRESS;
        RATING;
    };
    valueFormat
    {
        scaleFactor : DecimalFloat;
        numberOfFractionalDigits : Integer;
    };
    referencePeriod
    {
        @LanguageDependency.maxLength : 80 
        description : String(120);
        start : elementRef;
        end : elementRef;
    };
    criticality : elementRef;
    criticalityCalculation
    {
        improvementDirection : String enum { MINIMIZE; TARGET; MAXIMIZE; };
        toleranceRangeLowValue : DecimalFloat;
        toleranceRangeLowValueElement : elementRef;
        toleranceRangeHighValue : DecimalFloat;
        toleranceRangeHighValueElement : elementRef;
        deviationRangeLowValue : DecimalFloat;
        deviationRangeLowValueElement : elementRef;
        deviationRangeHighValue : DecimalFloat;
        deviationRangeHighValueElement : elementRef;
    };
    trend : elementRef;
    trendCalculation
    {
        referenceValue : elementRef;
        isRelativeDifference : Boolean default false;
        upDifference : DecimalFloat;
        upDifferenceElement : elementRef;
        strongUpDifference : DecimalFloat;
        strongUpDifferenceElement : elementRef;
        downDifference : DecimalFloat;
        downDifferenceElement : elementRef;
        strongDownDifference : DecimalFloat;
        strongDownDifferenceElement : elementRef;
    };
    responsible : elementRef;
    responsibleName : String(120);
};
</pre></div>

            </div>
<div class="p"><span class="ph emphasis emphasis">CDS Annotation for UI.DataPoint: Smart Area Micro
                Chart</span><div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">@UI.dataPoint: {
   title: 'Sales Price',
   targetValueElement: 'TargetPrice',
   criticalityCalculation: {
      improvementDirection: #TARGET,
      toleranceRangeLowValueElement: 'ToleranceLowerBoundPrice',
      toleranceRangeHighValueElement: 'ToleranceUpperBoundPrice',
     deviationRangeLowValueElement: 'DeviationLowerBoundPrice',
     deviationRangeHighValueElement: 'DeviationUpperBoundPrice'
   }
}
ProductSalesPrice.Price as AreaChartPrice
</pre></div>
</div>
<p class="p"><span class="ph emphasis emphasis">CDS
                    Annotation for UI.DataPoint: Smart Bullet Micro Chart</span></p>
<div class="p">
                <div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">@UI.dataPoint: {
   title:'Sales Revenue',
   targetValueElement: 'TargetRevenue',
   forecastValue: 'ForecastRevenue',
   minimumValue: 100,
   maximumValue: 300,
   criticality: 'Criticality'    
}
ProductSalesRevenue.Revenue as BulletChartRevenue
</pre></div>

            </div>
<p class="p">Currently, the <samp class="ph codeph">UI.DataPoint</samp> in the CDS views does not support
                    <samp class="ph codeph">elementRef</samp> for <samp class="ph codeph">minimumValue</samp> and
                    <samp class="ph codeph">maximumValue</samp>. The values for these properties are hard-coded as
                in the example above.</p>
</div></div>

        
	</div>

</div></div>

</body>
</html>