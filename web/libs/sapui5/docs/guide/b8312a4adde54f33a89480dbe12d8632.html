<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<link rel="stylesheet" type="text/css" href="css/prettify.css?x=28191158206489275"/>
<link rel="stylesheet" type="text/css" href="css/documentation.css?x=28191158206489275"/>
<title>Adding a Smart Micro Chart to a Table</title>
  <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/themes/base/highlight-query-terms.css" />
    <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/js/google-code-prettify/prettify.css" />
    <script src="../../resources/sap/ui/demokit/js/sdk-pagehelper.js"></script>
  </head>
<body class="" id="loiob8312a4adde54f33a89480dbe12d8632">
<div id="wrapper"><div id="container">

	<h1 class="title topictitle1">Adding a Smart Micro Chart to a Table</h1>

	<div class="body conbody">
        <p class="p">You can add a smart micro chart to a column within a <samp class="ph codeph">SmartTable</samp> control
            in both the list report and the object page.</p>

        <p class="p">To add a smart micro chart to a smart table, use the annotation term
                <samp class="ph codeph">UI.LineItem</samp> and the complex type
                <samp class="ph codeph">DataFieldForAnnotation</samp>. The smart micro charts are then displayed
            within the table column as shown below:</p>

        <div class="fig fignone" id="loiob8312a4adde54f33a89480dbe12d8632__fig_lzy_ntp_mx"><div class="figcontainer">
            
            <img class="image" id="loiob8312a4adde54f33a89480dbe12d8632__image_ypz_ptp_mx" src="loioe885d9811dc44bd1966603ecf47105d5_LowRes.png"/>
        <div class="figcap">Smart Micro Chart in List Report</div></div></div>

        
        
        <div class="section"><div class="section_title">Code Samples</div><div type="Code Samples"><div class="sectiondiv subsection">
                <p class="p subsectiontitle">UI.LineItem and UI.DataFieldForAnnotation</p>

                <div class="p">The <samp class="ph codeph">Label</samp> property of the
                        <samp class="ph codeph">UI.DataFieldForAnnotation</samp> is used for the text of the table
                    column
                    header.<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">
&lt;Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductType"&gt;
  &lt;Annotation Term="UI.LineItem"&gt;
    &lt;Collection&gt;
      &lt;Record Type="UI.DataFieldForAction"&gt;
        &lt;PropertyValue Property="Label" String="Copy with new Supplier"/&gt;
        &lt;PropertyValue Property="Action" String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopywithparams"/&gt;
        &lt;Annotation Term="UI.OperationGrouping" EnumMember="UI.OperationGroupingType/Isolated"/&gt;
      &lt;/Record&gt;
      &lt;Record Type="UI.DataFieldForAction"&gt;
        &lt;PropertyValue Property="Label" String="Activate"/&gt;
        &lt;PropertyValue Property="Action" String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductActivation"/&gt;
        &lt;PropertyValue Property="Determining" Bool="true"/&gt;
        &lt;Annotation Term="UI.OperationGrouping" EnumMember="UI.OperationGroupingType/ChangeSet"/&gt;
      &lt;/Record&gt;
      &lt;Record Type="UI.DataField"&gt;
        &lt;PropertyValue Property="Value" Path="Product"/&gt;
        &lt;Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/&gt;
      &lt;/Record&gt;
      &lt;Record Type="UI.DataField"&gt;
        &lt;PropertyValue Property="Value" Path="ProductCategory"/&gt;
        &lt;Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/&gt;
      &lt;/Record&gt;
      &lt;Record Type="UI.DataField"&gt;
        &lt;PropertyValue Property="Value" Path="to_Supplier/CompanyName"/&gt;
        &lt;Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/&gt;
      &lt;/Record&gt;
      &lt;Record Type="UI.DataField"&gt;
        &lt;PropertyValue Property="Criticality" Path="to_StockAvailability/StockAvailability"/&gt;
        &lt;PropertyValue Property="Value" Path="to_StockAvailability/StockAvailability"/&gt;
        &lt;Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/&gt;
      &lt;/Record&gt;
      &lt;Record Type="UI.DataField"&gt;
        &lt;PropertyValue Property="Value" Path="Price"/&gt;
        &lt;Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/&gt;
      &lt;/Record&gt;
      &lt;Record Type="UI.DataFieldForAction"&gt;
        &lt;PropertyValue Property="Label" String="Copy"/&gt;
        &lt;PropertyValue Property="IconUrl" String="sap-icon://copy"/&gt;
        &lt;PropertyValue Property="Action" String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopy"/&gt;
        &lt;PropertyValue Property="Inline" Bool="true"/&gt;
        &lt;PropertyValue Property="Determining" Bool="true"/&gt;
        &lt;Annotation Term="UI.OperationGrouping" EnumMember="UI.OperationGroupingType/Isolated"/&gt;
      &lt;/Record&gt;
      &lt;Record Type="UI.DataFieldForIntentBasedNavigation"&gt;
        &lt;PropertyValue Property="Label" String="Manage Products (ST)"/&gt;
        &lt;PropertyValue Property="SemanticObject" String="EPMProduct"/&gt;
        &lt;PropertyValue Property="Action" String="manage_st"/&gt;
        &lt;PropertyValue Property="Inline" Bool="true"/&gt;
        &lt;PropertyValue Property="Determining" Bool="true"/&gt;
      &lt;/Record&gt;
      &lt;Record Type="UI.DataFieldForAnnotation"&gt;
        &lt;PropertyValue Property="Label" String="Rating"/&gt;
        &lt;PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#Rating"/&gt;
      &lt;/Record&gt;
      &lt;Record Type="UI.DataFieldForAnnotation"&gt;
        &lt;PropertyValue Property="Label" String="Progress"/&gt;
        &lt;PropertyValue Property="Criticality" Path="to_StockAvailability/Quantity"/&gt;
        &lt;PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#Progress"/&gt;
      &lt;/Record&gt;
      &lt;Record Type="UI.DataFieldForAnnotation"&gt;
        &lt;PropertyValue Property="Label" String="Sales"/&gt;
        &lt;PropertyValue Property="Target" AnnotationPath="to_ProductSalesPrice/@UI.Chart#AreaChartQualifier"/&gt;
      &lt;/Record&gt;
      &lt;Record Type="UI.DataFieldForAnnotation"&gt;
        &lt;PropertyValue Property="Label" String="Revenue"/&gt;
        &lt;PropertyValue Property="Target" AnnotationPath="to_ProductSalesRevenue/@UI.Chart#BulletChartQualifier"/&gt;
      &lt;/Record&gt;
    &lt;/Collection&gt;
  &lt;/Annotation&gt;
&lt;/Annotations&gt;</pre></div>
</div>

            </div><div class="sectiondiv subsection">
                <p class="p subsectiontitle">UI.Chart Annotations</p>

                <div class="p"><span class="ph emphasis emphasis">Smart Area Micro
                    Chart</span><div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">
&lt;Annotation Term="UI.Chart" Qualifier="AreaChartQualifier"&gt;
    &lt;Record Type="UI.ChartDefinitionType"&gt;
        &lt;PropertyValue Property="Title" String="Sales Price" /&gt;
        &lt;PropertyValue Property="Description" String="Area Micro Chart" /&gt;
        &lt;PropertyValue Property="ChartType" EnumMember="UI.ChartType/Area" /&gt;
        &lt;PropertyValue Property="Dimensions"&gt;
            &lt;Collection&gt;
                &lt;PropertyPath&gt;PriceDay&lt;/PropertyPath&gt;
            &lt;/Collection&gt;
        &lt;/PropertyValue&gt;
        &lt;PropertyValue Property="Measures"&gt;
            &lt;Collection&gt;
                &lt;PropertyPath&gt;AreaChartPrice&lt;/PropertyPath&gt;
            &lt;/Collection&gt;
        &lt;/PropertyValue&gt;
        &lt;PropertyValue Property="MeasureAttributes"&gt;
            &lt;Collection&gt;
                &lt;Record Type="UI.ChartMeasureAttributeType"&gt;
                    &lt;PropertyValue Property="Measure" PropertyPath="AreaChartPrice" /&gt;
                    &lt;PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" /&gt;
                    &lt;PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#AreaChartPrice" /&gt;
                &lt;/Record&gt;
            &lt;/Collection&gt;
        &lt;/PropertyValue&gt;
    &lt;/Record&gt;
&lt;/Annotation&gt;</pre></div>
</div>

                <div class="p"><span class="ph emphasis emphasis">Smart Bullet Micro
                    Chart</span><div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">
&lt;Annotation Term="UI.Chart" Qualifier="BulletChartQualifier"&gt;
    &lt;Record Type="UI.ChartDefinitionType"&gt;
        &lt;PropertyValue Property="Title" String="Sales Revenue" /&gt;
        &lt;PropertyValue Property="Description" String="Bullet Micro Chart" /&gt;
        &lt;PropertyValue Property="ChartType" EnumMember="UI.ChartType/Bullet" /&gt;
        &lt;PropertyValue Property="Measures"&gt;
            &lt;Collection&gt;
                &lt;PropertyPath&gt;BulletChartRevenue&lt;/PropertyPath&gt;
            &lt;/Collection&gt;
        &lt;/PropertyValue&gt;
        &lt;PropertyValue Property="MeasureAttributes"&gt;
            &lt;Collection&gt;
                &lt;Record Type="UI.ChartMeasureAttributeType"&gt;
                    &lt;PropertyValue Property="Measure" PropertyPath="BulletChartRevenue" /&gt;
                    &lt;PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" /&gt;
                    &lt;PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#BulletChartRevenue" /&gt;
                &lt;/Record&gt;
            &lt;/Collection&gt;
        &lt;/PropertyValue&gt;
    &lt;/Record&gt;
&lt;/Annotation&gt;</pre></div>
</div>

                <p class="p"><span class="ph emphasis emphasis">Limitation</span></p>

                <div class="p">The template does not currently support the use of navigation properties within
                    the <samp class="ph codeph">UI.Chart</samp> term for the smart micro chart (see example
                        below).<div class="fig fignone" id="loiob8312a4adde54f33a89480dbe12d8632__fig_khh_pfx_kx"><div class="figcontainer">
                        
                        <img class="image" id="loiob8312a4adde54f33a89480dbe12d8632__image_occ_4fx_kx" src="loio02debb6e41424ba09ea3cc6ef0005ff7_LowRes.png"/>
                    <div class="figcap">Navigation Property</div></div></div>
</div>

            </div><div class="sectiondiv subsection">
                <p class="p subsectiontitle">UI.DataPoint Annotation</p>

                <p class="p">The <samp class="ph codeph">DataPoint</samp> property of the <samp class="ph codeph">MeasureAttributes</samp>
                    of the <samp class="ph codeph">UI.Chart</samp> annotation should point to the
                        <samp class="ph codeph">UI.DataPoint</samp> annotation.</p>

                <div class="p">The <samp class="ph codeph">SmartMicroChart</samp> control supports the
                        <samp class="ph codeph">Criticality</samp> and <samp class="ph codeph">CriticalityCalculation</samp>
                    properties of a <samp class="ph codeph">UI.DataPoint</samp>. For an example of how to use the
                        <samp class="ph codeph">CriticalityCalculation</samp>, see the smart area micro chart
                    annotation example. For an example of how to use the
                        <samp class="ph codeph">Criticality</samp> property, see the smart bullet micro chart
                    annotation example.<div class="note note"><span class="notetitle">Note</span> 
                        <p class="p">Although the <samp class="ph codeph">Title</samp> for the <samp class="ph codeph">UI.DataPoint</samp>
                            is mandatory, it is not used by the smart micro chart.</p>

                    </div>
</div>

                <div class="p"><span class="ph emphasis emphasis">Smart Area Micro
                    Chart</span><div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">
&lt;Annotation Term="UI.DataPoint" Qualifier="AreaChartPrice"&gt;
    &lt;Record&gt;
        &lt;PropertyValue Property="Title" String="Sales Price" /&gt;
        &lt;PropertyValue Property="Value" Path="AreaChartPrice" /&gt;
        &lt;PropertyValue Property="TargetValue" Path="TargetPrice" /&gt;
        &lt;PropertyValue Property="CriticalityCalculation"&gt;
            &lt;Record&gt;
                &lt;PropertyValue Property="ImprovementDirection" EnumMember="UI.ImprovementDirectionType/Target" /&gt;
                &lt;PropertyValue Property="DeviationRangeHighValue" Path="DeviationUpperBoundPrice" /&gt;
                &lt;PropertyValue Property="DeviationRangeLowValue" Path="DeviationLowerBoundPrice" /&gt;
                &lt;PropertyValue Property="ToleranceRangeHighValue" Path="ToleranceUpperBoundPrice" /&gt;
                &lt;PropertyValue Property="ToleranceRangeLowValue" Path="ToleranceLowerBoundPrice" /&gt;
            &lt;/Record&gt;
        &lt;/PropertyValue&gt;
    &lt;/Record&gt;
&lt;/Annotation&gt;</pre></div>
</div>

                <div class="p"><span class="ph emphasis emphasis">Smart Bullet Micro Chart</span><div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">
&lt;Annotation Term="UI.DataPoint" Qualifier="BulletChartRevenue"&gt;
    &lt;Record&gt;
        &lt;PropertyValue Property="Title" String="Sales Revenue" /&gt;
        &lt;PropertyValue Property="Value" Path="BulletChartRevenue" /&gt;
        &lt;PropertyValue Property="TargetValue" Path="TargetRevenue" /&gt;
        &lt;PropertyValue Property="ForecastValue" Path="ForecastRevenue" /&gt;
        &lt;PropertyValue Property="MinimumValue" Decimal="100" /&gt;
        &lt;PropertyValue Property="MaximumValue" Decimal="300" /&gt;
        &lt;PropertyValue Property="Criticality" Path="Criticality" /&gt;
    &lt;/Record&gt;
&lt;/Annotation&gt;</pre></div>
<div class="note note"><span class="notetitle">Note</span> 
                        <div class="p">The following must all point to the same property in the
                                <samp class="ph codeph">entityType</samp>:<ul class="ul" id="loiob8312a4adde54f33a89480dbe12d8632__ul_ysg_ms4_mx">
                                <li class="li">
                                    <p class="p"><samp class="ph codeph">Measures</samp> the property of the
                                            <samp class="ph codeph">Chart</samp> annotation</p>

                                </li>

                                <li class="li"><samp class="ph codeph">Measure</samp> property of the
                                        <samp class="ph codeph">MeasureAttributes</samp> property of the
                                        <samp class="ph codeph">Chart</samp> annotation</li>

                                <li class="li">Value property of the <samp class="ph codeph">DataPoint</samp> annotation</li>

                            </ul>

                        </div>

                    </div>
</div>

            </div><div class="sectiondiv subsection">
                <p class="p subsectiontitle">CDS Annotations</p>

                <div class="p"><span class="ph emphasis emphasis">CDS Annotation Definition for
                    UI.Chart</span><div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">
chart : array of
{
    qualifier : String(120);
    @LanguageDependency.maxLength : 40
    title : String(60);
    @LanguageDependency.maxLength : 80
    description : String(120);
    chartType : String enum
    {
       COLUMN;
       COLUMN_STACKED;
       COLUMN_STACKED_100;
       COLUMN_DUAL;
       COLUMN_STACKED_DUAL;
       COLUMN_STACKED_DUAL_100;
       BAR;
       BAR_STACKED;
       BAR_STACKED_100;
       BAR_DUAL;
       BAR_STACKED_DUAL;
       BAR_STACKED_DUAL_100;
       AREA;
       AREA_STACKED;
       AREA_STACKED_100;
       HORIZONTAL_AREA;
       HORIZONTAL_AREA_STACKED;
       HORIZONTAL_AREA_STACKED_100;
       LINE;
       LINE_DUAL;
       COMBINATION;
       COMBINATION_STACKED;
       COMBINATION_STACKED_DUAL;
       HORIZONTAL_COMBINATION_STACKED;
       HORIZONTAL_COMBINATION_STACKED_DUAL;
       PIE;
       DONUT;
       SCATTER;
       BUBBLE;
       RADAR;
       HEAT_MAP;
       TREE_MAP;
       WATERFALL;
       BULLET;
       VERTICAL_BULLET;
    };
    dimensions : array of elementRef;
    measures : array of elementRef;
    dimensionAttributes : array of
    {
       dimension : elementRef;
       role : String(10) enum
       {
           CATEGORY;
           SERIES;
       };
    };
    measureAttributes : array of
    {
       measure : elementRef;
       role : String(10) enum
       {
           AXIS_1;
           AXIS_2;
           AXIS_3;
       };
       asDataPoint : Boolean default true;
    };
}</pre></div>
</div>

                <div class="p"><span class="ph emphasis emphasis">CDS Annotation for UI.Chart: Smart Area Micro
                    Chart</span><div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">
@UI.chart:[{
  title: 'Sales Price',
  description: 'Area Micro Chart',
  chartType: #AREA,
  dimensions:['PriceDay'],
  measures:['AreaChartPrice'],
  measureAttributes: [
    { measure: 'AreaChartPrice', role: #AXIS_1, asDataPoint: true }
  ],
  qualifier: 'AreaChartQualifier'
}]</pre></div>
</div>

                <div class="p"><span class="ph emphasis emphasis">CDS Annotation for UI.Chart: Smart Bullet Micro
                    Chart</span><div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">
@UI.chart:[{
  title:'Sales Revenue',
  description: 'Bullet Micro Chart',
  chartType: #BULLET,
  measures:['BulletChartRevenue'],
  measureAttributes: [
    { measure: 'BulletChartRevenue', role: #AXIS_1, asDataPoint: true }
  ],
  qualifier: 'BulletChartQualifier'
}]</pre></div>
</div>

                <div class="p"><span class="ph emphasis emphasis">CDS Annotation Definition for
                    UI.DataPoint</span><div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">
dataPoint
{
    @LanguageDependency.maxLength : 40
    title : String(60);
    @LanguageDependency.maxLength : 80
    description : String(120);
    @LanguageDependency.maxLength : 190
    longDescription : String(250);
    targetValue : DecimalFloat;
    targetValueElement : elementRef;
    forecastValue : elementRef;
    minimumValue : DecimalFloat;
    maximumValue : DecimalFloat;
    visualization : String enum
    {
        NUMBER;
        BULLET_CHART;
        DONUT;
        PROGRESS;
        RATING;
    };
    valueFormat
    {
        scaleFactor : DecimalFloat;
        numberOfFractionalDigits : Integer;
    };
    referencePeriod
    {
        @LanguageDependency.maxLength : 80
        description : String(120);
        start : elementRef;
        end : elementRef;
    };
    criticality : elementRef;
    criticalityCalculation
    {
        improvementDirection : String enum { MINIMIZE; TARGET; MAXIMIZE; };
        toleranceRangeLowValue : DecimalFloat;
        toleranceRangeLowValueElement : elementRef;
        toleranceRangeHighValue : DecimalFloat;
        toleranceRangeHighValueElement : elementRef;
        deviationRangeLowValue : DecimalFloat;
        deviationRangeLowValueElement : elementRef;
        deviationRangeHighValue : DecimalFloat;
        deviationRangeHighValueElement : elementRef;
    };
    trend : elementRef;
    trendCalculation
    {
        referenceValue : elementRef;
        isRelativeDifference : Boolean default false;
        upDifference : DecimalFloat;
        upDifferenceElement : elementRef;
        strongUpDifference : DecimalFloat;
        strongUpDifferenceElement : elementRef;
        downDifference : DecimalFloat;
        downDifferenceElement : elementRef;
        strongDownDifference : DecimalFloat;
        strongDownDifferenceElement : elementRef;
    };
    responsible : elementRef;
    responsibleName : String(120);
};</pre></div>
</div>

                <div class="p"><span class="ph emphasis emphasis">CDS Annotation for UI.DataPoint: Smart Area Micro
                    Chart</span><div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">
@UI.dataPoint: {
   title: 'Sales Price',
   targetValueElement: 'TargetPrice',
   criticalityCalculation: {
      improvementDirection: #TARGET,
      toleranceRangeLowValueElement: 'ToleranceLowerBoundPrice',
      toleranceRangeHighValueElement: 'ToleranceUpperBoundPrice',
     deviationRangeLowValueElement: 'DeviationLowerBoundPrice',
     deviationRangeHighValueElement: 'DeviationUpperBoundPrice'
   }
}
ProductSalesPrice.Price as AreaChartPrice</pre></div>
</div>

                <div class="p"><span class="ph emphasis emphasis">CDS Annotation for UI.DataPoint: Smart Bullet Micro Chart</span><div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-xml">
@UI.dataPoint: {
   title:'Sales Revenue',
   targetValueElement: 'TargetRevenue',
   forecastValue: 'ForecastRevenue',
   minimumValue: 100,
   maximumValue: 300,
   criticality: 'Criticality'   
}
ProductSalesRevenue.Revenue as BulletChartRevenue
</pre></div>
<div class="note note"><span class="notetitle">Note</span> 
                        <p class="p">Currently, the <samp class="ph codeph">UI.DataPoint</samp> in the CDS views does not
                            support <samp class="ph codeph">elementRef</samp> for <samp class="ph codeph">minimumValue</samp>
                            and <samp class="ph codeph">maximumValue</samp>. The values for these properties are
                            hard-coded as in the example above.</p>

                    </div>
</div>

            </div></div></div>

        
        
    </div>

</div></div>

</body>
</html>