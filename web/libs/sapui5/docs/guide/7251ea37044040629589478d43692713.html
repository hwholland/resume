<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="abstract" content="Define custom filters for compact filters by defining a custom filter view fragment and a controller to handle events in the custom filter view fragment."/>
<meta name="description" content="Define custom filters for compact filters by defining a custom filter view fragment and a controller to handle events in the custom filter view fragment."/>

<link rel="stylesheet" type="text/css" href="css/prettify.css?x=16137314552900495"/>
<link rel="stylesheet" type="text/css" href="css/documentation.css?x=16137314552900495"/>
<title>Creating Custom Filter (Compact Filter)</title>
  <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/themes/base/highlight-query-terms.css" />
    <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/js/google-code-prettify/prettify.css" />
    <script src="../../resources/sap/ui/demokit/js/sdk-pagehelper.js"></script>
  </head>
<body class="" id="loio7251ea37044040629589478d43692713">
<div id="wrapper"><div id="container">

	<h1 class="title topictitle1">Creating Custom Filter (Compact Filter)</h1>

	
	<div class="body refbody"><p class="shortdesc">Define custom filters for compact filters by defining a custom filter view fragment and
        a controller to handle events in the custom filter view fragment.</p>

		<div class="section">
			<div class="p">To define custom filter view fragments, use view extensions and define extended fragments and
                controllers in the application namespace as shown in the following sample
                code.<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">"sap.ui5": {
    "_version": "1.1.0",
    "extends": {
        "extensions": {
	     "sap.ui.controllerExtensions": { // Controller extension
	         "sap.suite.ui.generic.template.AnalyticalListPage.controller.AnalyticalListPage": { // ALP app view to be extended with controller
	           "controllerName": "analytics2.alr.ext.controller.CustomFiltersController", // extended Controller declared using namespace
   		    ... // Other custom controllers
		    ...
		  } // End of ALP controller extensions
	     }, // End of controller extensions
	     "sap.ui.viewExtensions": { // View Extension
                 "sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage": { // ALP app view to be extended with filter fragment
                    "SmartFilterBarControlConfigurationExtension|CZ_EASILINEITEMS_SADL": { // &lt;Filter Bar Extension&gt;|&lt;Entity Set&gt;
		    "className": "sap.ui.core.Fragment",
		    "fragmentName": "analytics2.alr.ext.fragments.CustomFilters", // extended Fragment declared using namespace
		    "type": "XML"
		},
		... // Other view extensions
		... 
	    } // End of ALP view extensions
	} // End of view extensions
      }
   }
}
</pre></div>
</div>

			<div class="p">Sample of a custom view XML
                fragment:<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">&lt;core:FragmentDefinition xmlns="sap.m" xmlns:smartfilterbar="sap.ui.comp.smartfilterbar" xmlns:core="sap.ui.core"&gt;
    &lt;smartfilterbar:ControlConfiguration key="CustomFilters" index="99" visibleInAdvancedArea="true" label="Custom Filter" groupId="_BASIC"&gt;
        &lt;smartfilterbar:customControl&gt;
            &lt;ComboBox id="CustomFilters-combobox"&gt;
                &lt;core:Item key="0" text="Item1"/&gt;
                &lt;core:Item key="1" text="Item2"/&gt;
                &lt;core:Item key="2" text="Item3"/&gt;
            &lt;/ComboBox&gt;
        &lt;/smartfilterbar:customControl&gt;
    &lt;/smartfilterbar:ControlConfiguration&gt;
&lt;/core:FragmentDefinition&gt;
</pre></div>
</div>

			<div class="p">Sample of a custom filter controller
                extension:<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">sap.ui.controller("analytics2.alr.ext.controller.CustomFiltersController", {
    onInitSmartFilterBarExtension: function(oEvent) {
       // the custom field in the filter bar might have to be bound to a custom data model
       // if a value change in the field shall trigger a follow up action, this method is the 
       // place to define and bind an event handler to the field
       // Example:
       var oSmartFilterBar = oEvent.getSource();
       oSmartFilterBar.getControlByKey("CustomFilters").attachSelectionChange(function(oChangeEvent){
	//code
       },this);
       jQuery.sap.log.info("onInitSmartFilterBarExtension initialized");
    },
    onBeforeRebindTableExtension: function(oEvent) {
       // usually the value of the custom field should have an effect on the selected data in the table. 
       // So this is the place to add a binding parameter depending on the value in the custom field.
    },
    onBeforeRebindChartExtension: function(oEvent) {
        // usually the value of the custom field should have an effect on the selected data in the chart. 
        // So this is the place to add a binding parameter depending on the value in the custom field.
    },
    getCustomAppStateDataExtension : function(oCustomData) {
        // the content of the custom field shall be stored in the app state, so that it can be restored
        // later again e.g. after a back navigation. The developer has to ensure that the content of the
        // field is stored in the object that is returned by this method.
        // Example:
        var oComboBox = this.byId("CustomFilters-combobox");
            if (oComboBox){
	     oCustomData.CustomPriceFilter = oComboBox.getSelectedKey();
	 }
        },
    restoreCustomAppStateDataExtension : function(oCustomData) {
        // in order to to restore the content of the custom field in the filter bar e.g. after a 
        // back navigation, an object with the content is handed over to this method and the developer 
        // has to ensure, that the content of the custom field is set accordingly
        // also, empty properties have to be set
        // Example:
        if ( oCustomData.CustomPriceFilter !== undefined ){
	if ( this.byId("CustomFilters-combobox") ) {
	    this.byId("CustomFilters-combobox").setSelectedKey(oCustomData.CustomPriceFilter);
	}
        }
    }
});
</pre></div>
</div>

            <div class="note remember"><span class="remembertitle">Remember</span> 
                <div class="p">
                    <ul class="ul" id="loio7251ea37044040629589478d43692713__ul_d1t_yp1_wy">
                        <li class="li">
                            <p class="p">The custom filters do not show up in visual filters.</p>

                        </li>

                        <li class="li">
                            <p class="p">If you define logic in  the
                                    <samp class="ph codeph">onBeforeRebindChartExtension</samp> or
                                    <samp class="ph codeph">onBeforeRebindTableExtension</samp> to handle values
                                coming from the custom filter fields, then these values are also
                                triggered when the table or chart area is refreshed. This ensures
                                that custom filters are also synchronized when the filter mode is
                                changed.</p>

                        </li>

                        <li class="li">
                            <div class="p">When you choose the <span class="ph uicontrol">Clear</span> button, ALP triggers
                                    <samp class="ph codeph">onClearFilterExtension</samp>, which  clears all
                                filter dimensions. This means that you need to define the logic in
                                the application controller extension to handle the clear event for
                                custom filters. For
                                example:<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">onClearFilterExtension: function(oEvent) {
        // Logic for clearing extended filters
        'use strict';
        if ( this.byId("CustomFilters-combobox") ) {
             this.byId("CustomFilters-combobox").setSelectedKey(null);
        }
}</pre></div>
</div>

                        </li>

                    </ul>

                </div>

            </div>

		</div>

	</div>

<div class="related-links"> 
<div class="relinfo"><div class="relinfotitle ">Related Information</div>
<div><a class="link" href="9504fb4c9fc741c29bc0cc3c1f5fe83b.html">Extending Analytical List Page</a></div>
</div>
</div>
</div></div>

</body>
</html>