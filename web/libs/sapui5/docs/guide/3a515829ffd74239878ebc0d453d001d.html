<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="abstract" content="The following example shows the development steps for adding an additional filter to the smart filter bar of the list report."/>
<meta name="description" content="The following example shows the development steps for adding an additional filter to the smart filter bar of the list report."/>

<link rel="stylesheet" type="text/css" href="css/prettify.css?x=5277442203852235"/>
<link rel="stylesheet" type="text/css" href="css/documentation.css?x=5277442203852235"/>
<title>Adding Filterable Field to the Smart Filter Bar</title>
  <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/themes/base/highlight-query-terms.css" />
    <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/js/google-code-prettify/prettify.css" />
    <script src="../../resources/sap/ui/demokit/js/sdk-pagehelper.js"></script>
  </head>
<body class="" id="loio3a515829ffd74239878ebc0d453d001d">
<div id="wrapper"><div id="container">

	<h1 class="title topictitle1">Adding Filterable Field to the Smart Filter Bar</h1>

	
	<div class="body conbody"><p class="shortdesc">The following example shows the development steps for adding an additional filter to the
		smart filter bar of the list report.</p>

		<p class="p">In this example, we assume that you want to add a <span class="ph uicontrol">Price</span> field with two
			filter options to the smart filter bar of the Manage Products app's list report. To do
			so, you have to complete the following steps: </p>

	<ol class="ol">
		<li class="li">Create a controller for a new facet on the list report</li>

		<li class="li">Add field name and filter option texts to the <samp class="ph codeph">i18n</samp> file</li>

		<li class="li">Define a view and a controller extension in the <samp class="ph codeph">manifest.json</samp> file</li>

	</ol>

		<div class="section"><div class="section_title">Step 1: Create a controller for a new facet in the list report</div><div type="Step 1: Create a controller for a new facet in the list report">
			
			<p class="p">In the SAP Web IDE, open the folder structure of the Manage Products project and then proceed
				as follows:</p>

			<ol class="ol">
				<li class="li">In the <samp class="ph codeph">webapp</samp> folder, create a new subfolder called
					<samp class="ph codeph">ext</samp>.</li>

				<li class="li">In the folder <samp class="ph codeph">ext</samp>, create a new subfolder called
					<samp class="ph codeph">fragment</samp>.</li>

				<li class="li">In the <samp class="ph codeph">fragment</samp> folder, create file <samp class="ph codeph">Custom.Filter.fragment.xml</samp>.</li>

				<li class="li">In the <samp class="ph codeph">controller</samp> folder, create file <samp class="ph codeph">Custom.Filter.controller.js</samp>.</li>

				<li class="li">Define the fragment by adding <samp class="ph codeph">ControlConfiguration</samp> to the smart filter bar.
					You can see the options for the <samp class="ph codeph">ComboBox</samp> in the following
					example: <div class="p">
						<div class="note sap-samplecodeblock samplecode"><span class="samplecodetitle">Sample Code</span> 
							<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">&lt;core:FragmentDefinition
		xmlns="sap.m"
		xmlns:smartfilterbar="sap.ui.comp.smartfilterbar"
		xmlns:core="sap.ui.core"&gt;
	&lt;!-- Price Filter--&gt;
	&lt;smartfilterbar:ControlConfiguration key="CustomPriceFilter" index="3" 
	label="{i18n|sap.suite.ui.generic.template.ListReport|SEPMRA_C_PD_Product&gt;xfld.Price}"
							visibleInAdvancedArea="true" groupId="_BASIC"&gt;
		&lt;smartfilterbar:customControl&gt;
			&lt;ComboBox id="CustomPriceFilter-combobox"&gt;
				&lt;core:Item id="CustomPriceFilterItem0" key="0" 
						text="{i18n|sap.suite.ui.generic.template.ListReport|SEPMRA_C_PD_Product&gt;xtit.Price_0-100}"/&gt;
				&lt;core:Item id="CustomPriceFilterItem3" key="1" 
						text="{i18n|sap.suite.ui.generic.template.ListReport|SEPMRA_C_PD_Product&gt;xtit.Price_GE100}"/&gt;
			&lt;/ComboBox&gt;
		&lt;/smartfilterbar:customControl&gt;
	&lt;/smartfilterbar:ControlConfiguration&gt; 
&lt;/core:FragmentDefinition&gt;	</pre></div>

						</div>

					</div>
<div class="note note"><span class="notetitle">Note</span> You can use the index property to define the position of the
						filterable field. For more information, see also <a class="xref" href="7bcdffc056a94731b4341db73251e32b.html" title="The sap.ui.comp.smartfilterbar.SmartFilterBar control analyzes the $metadata document of an OData service and renders a FilterBar control that can be used to filter, for example, a table or a chart.">Smart Filter Bar</a> and <a class="xref" href="../../docs/api/symbols/sap.ui.comp.smartfilterbar.ControlConfiguration.html" alt="../../docs/api/symbols/sap.ui.comp.smartfilterbar.ControlConfiguration.html" title="../../docs/api/symbols/sap.ui.comp.smartfilterbar.ControlConfiguration.html">https://sapui5.hana.ondemand.com/sdk/#docs/api/symbols/sap.ui.comp.smartfilterbar.ControlConfiguration.html</a>.</div>
</li>

			 
				<li class="li">To generate the additional filter logic, implement the logic in the controller as shown in
					the example below. <p class="p">Note that if a user changes a filter field in the filter
						bar, the table shows an overlay to indicate that the state of the filter bar
						differs from the date currently being displayed. If the control used in your
						app does not trigger a change event, you have to set this up using
							<samp class="ph codeph">.fireChange()</samp> so that the filter bar will recognize the
						change and display the overlay.</p>

					<div class="p">
						<div class="note sap-samplecodeblock samplecode"><span class="samplecodetitle">Sample Code</span> 
							<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">sap.ui.controller("ManageProducts.ext.controller.CustomFilter", {
		onBeforeRebindTableExtension: function(oEvent) {
		var oBindingParams = oEvent.getParameter("bindingParams");
		oBindingParams.parameters = oBindingParams.parameters || {};
						
		var oSmartTable = oEvent.getSource();
		var oSmartFilterBar = this.byId(oSmartTable.getSmartFilterId());
		var vCategory;
		if (oSmartFilterBar instanceof sap.ui.comp.smartfilterbar.SmartFilterBar) {
			//Custom price filter
			var oCustomControl = oSmartFilterBar.getControlByKey("CustomPriceFilter");
			if (oCustomControl instanceof sap.m.ComboBox) {
				vCategory = oCustomControl.getSelectedKey();
				switch (vCategory) {
					case "0":
						oBindingParams.filters.push(new sap.ui.model.Filter("Price", "LE", "100"));
						break;
					case "1":
						oBindingParams.filters.push(new sap.ui.model.Filter("Price", "GT", "100"));
						break;
					default:
						break;
				}
			}
		}
	}
});</pre></div>

						</div>

					</div>
</li>

			</ol>

		</div></div>

		<div class="section"><div class="section_title">Step 2: Add field name and filter option texts to the i18n file</div><div type="Step 2: Add field name and filter option texts to the i18n file">
			
			<p class="p">To make the field name and the filter options translatable, add the texts to the
					<samp class="ph codeph">i18n</samp> file as follows:</p>

			<div class="note sap-samplecodeblock samplecode"><span class="samplecodetitle">Sample Code</span> 
				<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">#XFLD: Custom filter breakout label
xfld.Price=Price
#XTIT: Price range 0-100
xtit.Price_0-100=Price between 0-100
#XTIT: Price range Over 100
xtit.Price_GE100=Price: Over 100		</pre></div>

			</div>
	
		</div></div>

		<div class="section"><div class="section_title">Step 3: Define a view and a controller extension in the manifest.json file</div><div type="Step 3: Define a view and a controller extension in the manifest.json file">
			
			<p class="p">To integrate the logic as an extension, define a view and controller extension to load the
				files you created in Step 1 (<samp class="ph codeph">Custom.Filter.fragment.xml</samp> and
					<samp class="ph codeph">Custom.Filter.controller.js</samp>). </p>

			<p class="p">The logic is added to the <samp class="ph codeph">ListReport</samp> section of the Manage
				Products app.</p>

			<div class="note sap-samplecodeblock samplecode"><span class="samplecodetitle">Sample Code</span> 
				<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">"extends": {
	"extensions": {
		"sap.ui.controllerExtensions": {
			"sap.suite.ui.generic.template.ListReport.view.ListReport": {
				"controllerName": "ManageProducts.ext.controller.CustomFilter"
			}
		},
		"sap.ui.viewExtensions": {
			"sap.suite.ui.generic.template.ListReport.view.ListReport": {
				"SmartFilterBarControlConfigurationExtension|SEPMRA_C_PD_Product": {
					"className": "sap.ui.core.Fragment",
					"fragmentName": "ManageProducts.ext.fragment.CustomFilter",
					"type": "XML"
				}	         
			}
		}
	}
},</pre></div>

			</div>

		</div></div>

		<div class="section"><div class="section_title">Results</div><div type="Results">
			
			<p class="p">The list report of the Manage Products app displays the new <span class="ph uicontrol">Price</span> field
				with filter options.</p>

		</div></div>

	</div>

</div></div>

</body>
</html>