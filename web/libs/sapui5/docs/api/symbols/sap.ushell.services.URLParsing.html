<!DOCTYPE html> <html xml:lang="en" lang="en"><head><meta charset="UTF-8" ><meta name="generator" content="JsDoc + OpenUI5/SAPUI5 template" ><title>JsDoc Report - SAP UI development Toolkit for HTML5 - API Reference - sap.ushell.services.URLParsing</title><link rel="stylesheet" href="../default.css" ><link rel="stylesheet" href="../../../resources/sap/ui/demokit/themes/base/highlight-query-terms.css" /><link rel="stylesheet" href="../../../resources/sap/ui/demokit/js/google-code-prettify/prettify.css" /><script src="../../../resources/sap/ui/demokit/js/sdk-pagehelper.js"></script></head><body><div id="main"><div id="content"><h1 class="classTitle static">Class <span class="package">sap.ushell.services.</span>URLParsing<span class="module"><span>Module: </span><a href="../modules/sap_ushell_services_URLParsing.html">sap/ushell/services/URLParsing</a></span></h1><hr><div class="full-description"><br /><i>Since: </i>1.15.0. </div><div class="summary section"><div class="sectionTitle">Constructor Summary</div><div class="sectionItems"><div class="sectionItem classConstructor static"><div class="itemName"><b class="icon" title="The Unified Shell's internal URL parsing service (platform independent) This method MUST be called by the Unified Shell's container only, others MUST call sap.ushell.Container.getService(&quot;URLParsing&quot;).">new <a href="sap.ushell.services.URLParsing.html#constructor">sap.ushell.services.URLParsing</a></b><span class='signature'>()</span><span class='description'>The Unified Shell's internal URL parsing service (platform independent) This method MUST be called by the Unified Shell's container only, others MUST call <code>sap.ushell.Container.getService("URLParsing")</code>.</span></div></div></div></div><div class="summary section"><div class="sectionTitle">Method Summary</div><div class="sectionItems"><div class="sectionItem classMethod"><b class="icon" title="compose a shell Hash from it's respective parts Note that it also may append an app specific route !"><a href="sap.ushell.services.URLParsing.html#constructShellHash">constructShellHash</a></b><span class='signature'>(<span title="(object) undefined  if not a parseable hash  { target : { semanticObject : string, action : string, contextRaw : string }, params : MapObject, appStateKey : string  appSpecificRoute : string }  xor  { target : { shellHash } }  Note: in general it is preferred to add an appStateKey directly to the params object">oShellHash</span>)</span><span class='description'>compose a shell Hash from it's respective parts Note that it also may append an app specific route !</span></div><div class="sectionItem classMethod"><b class="icon" title="Extract a hash part from an URL, including an app-specific part"><a href="sap.ushell.services.URLParsing.html#getHash">getHash</a></b><span class='signature'>(<span title="(String) any value">sURL</span>)</span><span class='description'>Extract a hash part from an URL, including an app-specific part</span></div><div class="sectionItem classMethod"><b class="icon" title="Extract the Shell hash# part from an URL The application specific route part is removed"><a href="sap.ushell.services.URLParsing.html#getShellHash">getShellHash</a></b><span class='signature'>(<span title="(string) a valid (Shell) url, e.g.">sShellHashString</span>)</span><span class='description'>Extract the Shell hash# part from an URL The application specific route part is removed</span></div><div class="sectionItem classMethod"><b class="icon" title="Check if a URL has an intent based navigation part which can be parsed into a semantic object and action part."><a href="sap.ushell.services.URLParsing.html#isIntentUrl">isIntentUrl</a></b><span class='signature'>(<span title="(String) the URL to test Note, this url must be in internal format.">sUrl</span>)</span><span class='description'>Check if a URL has an intent based navigation part which can be parsed into a semantic object and action part.</span></div><div class="sectionItem classMethod"><b class="icon" title="combine members of a javascript object into a parameter string, note that parameters are ordered in an arbitrary manner which is subject to change"><a href="sap.ushell.services.URLParsing.html#paramsToString">paramsToString</a></b><span class='signature'>(<span title="(Object) any value { ABC : [1,&quot;1 2&quot;], DEF : [&quot;4&quot;]}">oParams</span>)</span><span class='description'>combine members of a javascript object into a parameter string, note that parameters are ordered in an arbitrary manner which is subject to change</span></div><div class="sectionItem classMethod"><b class="icon" title="parse parameters from a URI query string (starting with ?) into a parameter object"><a href="sap.ushell.services.URLParsing.html#parseParameters">parseParameters</a></b><span class='signature'>(<span title="(String) Parameter string, e.g.">sParams</span>)</span><span class='description'>parse parameters from a URI query string (starting with ?) into a parameter object</span></div><div class="sectionItem classMethod"><b class="icon" title="Decompose a shell hash into the respective parts"><a href="sap.ushell.services.URLParsing.html#parseShellHash">parseShellHash</a></b><span class='signature'>(<span title="(String) Hash part of a shell compliant URL #SO-Action~Context?P1=a&P2=x&/route?RPV=1 the hash part of an URL,  e.g.">sHash</span>)</span><span class='description'>Decompose a shell hash into the respective parts</span></div><div class="sectionItem classMethod"><b class="icon" title="split a Unified Shell compliant hash into an Object containing a shell specific part and an app specific parts for non compliant hash strings, the empty object {} is returned."><a href="sap.ushell.services.URLParsing.html#splitHash">splitHash</a></b><span class='signature'>(<span title="(String) Hash part of a shell conformant URL {code}#SO-Action~Context?P1=a&P2=x&/route?RPV=1{code} the hash part of an URL, e.g.">sHash</span>)</span><span class='description'>split a Unified Shell compliant hash into an Object containing a shell specific part and an app specific parts</br> for non compliant hash strings, the empty object {} is returned.</span></div><div class="sectionItem classMethod deprecated"><b class="icon" title="Note: deprecated, please use sap.ui.model.odata.ODataUtils.setOrigin(sServiceUrl, { alias : sSystem }); Makes the given server-relative SAP OData service URL point to the system given explicitly as parameter vComponentOrSystem."><a href="sap.ushell.services.URLParsing.html#addSystemToServiceUrl">addSystemToServiceUrl</a></b><span class='signature'>(<span title="(string) a server-relative URL without system alias information">sServiceUrl</span>, <span title="(string|sap.ui.core.Component) the root component of the FLP application ( getComponentData().startupParameters[&quot;sap-system&quot;][0] is used as system alias if present) or a string valued system specification like &quot;SYS&quot; or &quot;sid(SYS.123)&quot; if undefined or falsy the system of the current application is used">vComponentOrSystem</span><i class="help" title="Optional parameter">?</i>)</span><span class='description'>Note: deprecated, please use <code>sap.ui.model.odata.ODataUtils.setOrigin(sServiceUrl, { alias : sSystem });</code> Makes the given server-relative SAP OData service URL point to the system given explicitly as parameter <code>vComponentOrSystem</code>.</span></div></div></div><div class="section details"><div class="sectionTitle">Constructor Detail</div><div class="sectionItems"><div id="constructor" class='sectionItem classItem itemName static'><div class="itemTitle icon"> new sap.ushell.services.URLParsing<span class="signature">()</span></div><div class="full-description"><p>The Unified Shell's internal URL parsing service (platform independent) This method MUST be called by the Unified Shell's container only, others MUST call <code>sap.ushell.Container.getService("URLParsing")</code>. Constructs a new instance of the URL parsing service.</p><p> Methods in this class allow to break down a shell compliant hash into it's respective parts (SemanticObject,Action,Context, Parameters, appSpecificHash) or (ShellPart,appSpecificHash) respectively or construct a hash from its constituents.</p><p>All methods deal with the *internal* shellHash format.</p><p>Most of the parse methods are robust w.r.t. a leading "#".</p><p>Note: The functions were designed with a "truthy" behaviour for not present values, Thus a client should not rely on the difference between null, "undefined", "" when testing for the result of a parse action.</p><p>The parsing functions are deliberately restrictive and fragile, only shell compliant hashes are parsed correctly, behaviour for non-compliant hashes is undefined and subject to change, notably we do not aim do "degrade" nicefully or support partial parsing of corrupted urls.</p></div><div class="heading">See:</div><table class="methodItem"><tbody><tr><td class="methodItemDesc">sap.ushell.services.Container#getService</td></tr></tbody></table></div></div></div><div class="details section"><div class="sectionTitle">Method Detail</div><div class="sectionItems"><div id="constructShellHash" class='sectionItem classMethod'><div class="itemTitle icon"> constructShellHash<span class="signature">(<span title="(object) undefined  if not a parseable hash  { target : { semanticObject : string, action : string, contextRaw : string }, params : MapObject, appStateKey : string  appSpecificRoute : string }  xor  { target : { shellHash } }  Note: in general it is preferred to add an appStateKey directly to the params object">oShellHash</span>)</span><span class="light" title="returns string">: string</span></div><div class="full-description"> compose a shell Hash from it's respective parts Note that it also may append an app specific route ! </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType light">object</td><td class="methodItemName">oShellHash</td><td class="methodItemDesc"><p><code>undefined </code> if not a parseable hash <code> { target : { semanticObject : string,<br/> action : string,<br/> contextRaw : string<br/> },<br/> params : MapObject<String,Array[String]>,<br/> appStateKey : string <br/> appSpecificRoute : string<br/> }<br/> </code> xor <code> { target : { shellHash }<br/> } </code></p><p>Note: in general it is preferred to add an appStateKey directly to the params object</p></td></tr></tbody></table><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType light">string</td><td class="methodItemDesc"><p>the hash part of an URL, e.g. <code>"Object-name~AFE2==?PV1=PV2&PV4=V5&/display/detail/7?UU=HH</code> returns "" for an undefined object</p><p>The action must be a valid action, it may not contain "?" or directly a parameter string</p></td></tr></tbody></table><dl class="detailList since"><dt class="heading since">Since:</dt><dd>1.16.0</dd></dl></div><div id="getHash" class='sectionItem classMethod'><div class="itemTitle icon"> getHash<span class="signature">(<span title="(String) any value">sURL</span>)</span><span class="light" title="returns String">: String</span></div><div class="full-description"> Extract a hash part from an URL, including an app-specific part </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType light">String</td><td class="methodItemName">sURL</td><td class="methodItemDesc">any value</td></tr></tbody></table><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType light">String</td><td class="methodItemDesc"><code>extracted string</code> if and only if a hash is present, undefined otherwise</td></tr></tbody></table><dl class="detailList since"><dt class="heading since">Since:</dt><dd>1.16.0</dd></dl></div><div id="getShellHash" class='sectionItem classMethod'><div class="itemTitle icon"> getShellHash<span class="signature">(<span title="(string) a valid (Shell) url, e.g.">sShellHashString</span>)</span><span class="light" title="returns Object">: <a href="Object.html">Object</a></span></div><div class="full-description"> Extract the Shell hash# part from an URL The application specific route part is removed </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType light">string</td><td class="methodItemName">sShellHashString</td><td class="methodItemDesc">a valid (Shell) url, e.g. <br/> <code>http://xx.b.c#Object-name~AFE2==?PV1=PV2&PV4=V5&/display/detail/7?UU=HH</code></td></tr></tbody></table><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType light"><a href="Object.html">Object</a></td><td class="methodItemDesc">the parsed result</td></tr></tbody></table><dl class="detailList since"><dt class="heading since">Since:</dt><dd>1.16.0</dd></dl><div class="heading">See:</div><table class="methodItem"><tbody><tr><td class="methodItemDesc">getHash for a function which retains the app specific route Shell services shall use this service to extract relevant parts of an URL from an actual URL string (which should be treated as opaque) <p> The URL has to comply with the Fiori-Wave 2 agreed upon format <p> This service shall be used to extract a hash part from an url. The result can be further broken up by parseShellHash examples <p> http://a.b.c?defhij#SemanticObject-Action~Context?PV1=A&PV2=B&/appspecific <br/> returns : "#SemanticObject-Action~Context?PV1=A&PV2=B&/appspecific" Note: the results when passing an illegal (non-compliant) url are undefined and subject to change w.o. notice. Notably further checks may added. The design is deliberately restrictive and non-robust.</td></tr></tbody></table></div><div id="isIntentUrl" class='sectionItem classMethod'><div class="itemTitle icon"> isIntentUrl<span class="signature">(<span title="(String) the URL to test Note, this url must be in internal format.">sUrl</span>)</span><span class="light" title="returns Boolean">: Boolean</span></div><div class="full-description"><p>Check if a URL has an intent based navigation part which can be parsed into a semantic object and action part. Accepts only a relative URL (must contain #) or fully qualified Urls for which origin and filename must correspond to the running launchpad. Given actual url <code> http://www.mycorp.com/sap/fiori/FioriLaunchpad.html?sap-language=DE#SO-action?P1=value1 </code>, the following parts <code>http://www.mycorp.com/sap/fiori/FioriLaunchpad.html<code> must match.</p><p>The actual test is synchronous and *only* tests whether the hash part can be parsed and contains a semantic object and action. It does not test whether the intent or it's parameters is valid for a given user</p></div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType light">String</td><td class="methodItemName">sUrl</td><td class="methodItemDesc">the URL to test Note, this url must be in internal format.</td></tr></tbody></table><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType light">Boolean</td><td class="methodItemDesc">true if the conditions are fulfilled.</td></tr></tbody></table><dl class="detailList since"><dt class="heading since">Since:</dt><dd>1.30.0</dd></dl></div><div id="paramsToString" class='sectionItem classMethod'><div class="itemTitle icon"> paramsToString<span class="signature">(<span title="(Object) any value { ABC : [1,&quot;1 2&quot;], DEF : [&quot;4&quot;]}">oParams</span>)</span><span class="light" title="returns String">: String</span></div><div class="full-description"> combine members of a javascript object into a parameter string, note that parameters are ordered in an arbitrary manner which is subject to change </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType light"><a href="Object.html">Object</a></td><td class="methodItemName">oParams</td><td class="methodItemDesc">any value { ABC : [1,"1 2"], DEF : ["4"]}</td></tr></tbody></table><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType light">String</td><td class="methodItemDesc"><code>ABC=1&ABC=1%202DEF=4</code> Note that the result is *not* prefixed with a "?", parameter values are encodeURIComponent encoded.</td></tr></tbody></table><dl class="detailList since"><dt class="heading since">Since:</dt><dd>1.20.0</dd></dl></div><div id="parseParameters" class='sectionItem classMethod'><div class="itemTitle icon"> parseParameters<span class="signature">(<span title="(String) Parameter string, e.g.">sParams</span>)</span><span class="light" title="returns Object">: <a href="Object.html">Object</a></span></div><div class="full-description"> parse parameters from a URI query string (starting with ?) into a parameter object </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType light">String</td><td class="methodItemName">sParams</td><td class="methodItemDesc">Parameter string, e.g. <code>?ABC=1&ABC=1%202DEF=4</code></td></tr></tbody></table><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType light"><a href="Object.html">Object</a></td><td class="methodItemDesc">oParams any value { ABC : ["1","1 2"], DEF : ["4"]}</td></tr></tbody></table><dl class="detailList since"><dt class="heading since">Since:</dt><dd>1.20.0</dd></dl></div><div id="parseShellHash" class='sectionItem classMethod'><div class="itemTitle icon"> parseShellHash<span class="signature">(<span title="(String) Hash part of a shell compliant URL #SO-Action~Context?P1=a&P2=x&/route?RPV=1 the hash part of an URL,  e.g.">sHash</span>)</span><span class="light" title="returns object">: object</span></div><div class="full-description"> Decompose a shell hash into the respective parts </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType light">String</td><td class="methodItemName">sHash</td><td class="methodItemDesc"><p>Hash part of a shell compliant URL <code>#SO-Action~Context?P1=a&P2=x&/route?RPV=1</code> the hash part of an URL, <br/> e.g. <code>"#Object-name~AFE2==?PV1=PV2&PV4=V5&/display/detail/7?UU=HH</code></p><p> Note that params always has an Array for each parameter value!</p></td></tr></tbody></table><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType light">object</td><td class="methodItemDesc"><code>undefined </code> if not a parseable hash <br/> <code> { semanticObject : string, <br/> action : string, <br/> contextRaw : string, <br/> params : MapObject<String,Array[String]>, <br/> appSpecificRoute : string <br/> } </code></td></tr></tbody></table><dl class="detailList since"><dt class="heading since">Since:</dt><dd>1.16.0</dd></dl></div><div id="splitHash" class='sectionItem classMethod'><div class="itemTitle icon"> splitHash<span class="signature">(<span title="(String) Hash part of a shell conformant URL {code}#SO-Action~Context?P1=a&P2=x&/route?RPV=1{code} the hash part of an URL, e.g.">sHash</span>)</span><span class="light" title="returns object">: object</span></div><div class="full-description"> split a Unified Shell compliant hash into an Object containing a shell specific part and an app specific parts</br> for non compliant hash strings, the empty object {} is returned. an optional leading # is stripped </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType light">String</td><td class="methodItemName">sHash</td><td class="methodItemDesc"><p>Hash part of a shell conformant URL {code}#SO-Action~Context?P1=a&P2=x&/route?RPV=1{code} the hash part of an URL, e.g. {code}"#Object-name~AFE2==?PV1=PV2&PV4=V5&/display/detail/7?UU=HH{code}</p><p> Note that params always has an Array for each parameter value!</p></td></tr></tbody></table><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType light">object</td><td class="methodItemDesc"><code>{}</code>(empty object) if not a parseable hash <code>{ shellPart : "Object-name~AFE2==?PV1=PV2&PV4=V5",<br/> appSpecificRoute : "display/detail/7?UU=HH"<br/> }</br></code> otherwise</td></tr></tbody></table><dl class="detailList since"><dt class="heading since">Since:</dt><dd>1.16.0</dd></dl></div><div id="addSystemToServiceUrl" class='sectionItem classMethod deprecated'><div class="itemTitle icon"> addSystemToServiceUrl<span class="signature">(<span title="(string) a server-relative URL without system alias information">sServiceUrl</span>, <span title="(string|sap.ui.core.Component) the root component of the FLP application ( getComponentData().startupParameters[&quot;sap-system&quot;][0] is used as system alias if present) or a string valued system specification like &quot;SYS&quot; or &quot;sid(SYS.123)&quot; if undefined or falsy the system of the current application is used">vComponentOrSystem</span><i class="help" title="Optional parameter">?</i>)</span><span class="light" title="returns string">: string</span></div><div class="full-description"> Note: deprecated, please use <code>sap.ui.model.odata.ODataUtils.setOrigin(sServiceUrl, { alias : sSystem });</code> Makes the given server-relative SAP OData service URL point to the system given explicitly as parameter <code>vComponentOrSystem</code>. If this parameter is not provided, it makes the server-relative URL point to the system of the current application. <em>Server-relative URL</em> means a URL starting with exactly one &quot;/&quot; (also known as absolute-path URL). The <em>system of the current application</em> is taken from the parameter &quot;sap-system&quot; of the last navigation target resolution result. <p> If either a multiple-origin parameter <code>;mo/</code> or an origin parameter with qualified system (<code>;o=sid(SYS.123)</code> or <code>o=SYSALIAS</code>) is already present, the <code>sServiceUrl</code> is returned unchanged. <p> The framework invokes this function for SAPUI5 applications that have been built using declarative model instantiation with the application descriptor (data source) mechanism or using an sap.ca framework. For these applications, you do not need to invoke this function explicitly in the application code. If the application does not use any of these mechanisms, but explicitly constructs additional OData models or performs OData requests, the application code shall invoke this function. It shall pass its root component instance as <code>vComponentOrSystem</code> - the function will then determine the system from the navigation start-up parameter &quot;sap-system&quot; (<code>getComponentData().startupParameters[&quot;sap-system&quot;][0]). Applications may call this API with parameter <code>vComponentOrSystem</code> and a non-empty string value if application-specific logic is used to determine the target system for service calls. <p> With service URLs converted using this API, administrators can redirect service calls to servers other than the default SAP Gateway and back-end server either via reverse proxy (e.g. SAP Web Dispatcher) configuration or using the system alias functionality of the SAP Gateway server. <p> The system is added to the last URL segment of the service URL with the segment parameter <code>;o=</code>. You can also make this function put the system to a different URL path segment of the service URL by specifying the empty segment parameter <code>;o=</code>, e.g. <code>/sap/opu/odata/MyService;o=/MyEntities/$count?p1=v1</code>. If both <code>vComponentOrSystem</code> is empty and the current application has no system, no system is added and the empty segment parameter <code>;o</code> is removed. <br/> <b>Example 1:</b><code>/sap/opu/odata/MyService/?p1=v1</code> is converted to <code>/sap/opu/odata/MyService;o=SYS/?p1=v1</code> if the target system is &quot;SYS&quot;. However it remains unchanged if both the current application's system <em>and</em> the parameter <code>vComponentOrSystem</code> are empty.<br/> <b>Example 2:</b><code>/sap/opu/odata/MyService;o=/MyEntities/$count?p1=v1</code> is converted to <code>/sap/opu/odata/MyService;o=sid(SYS.123)/MyEntities/$count?p1=v1</code> if parameter <code>vComponentOrSystem</code> is set to &quot;sid(SYS.123)&quot;</code>. <p> The URL is in no way normalized. </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType light">string</td><td class="methodItemName">sServiceUrl</td><td class="methodItemDesc">a server-relative URL without system alias information</td></tr><tr><td class="methodItemType light">string|<a href="sap.ui.core.Component.html">sap.ui.core.Component</a></td><td class="methodItemName">vComponentOrSystem<i class="help" title="Optional parameter">?</i></td><td class="methodItemDesc">the root component of the FLP application ( <code>getComponentData().startupParameters[&quot;sap-system&quot;][0]</code> is used as system alias if present) or a string valued system specification like &quot;SYS&quot; or &quot;sid(SYS.123)&quot; if undefined or falsy the system of the current application is used</td></tr></tbody></table><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType light">string</td><td class="methodItemDesc">the service URL pointing to the system specified in parameter <code>vComponentOrSystem</code> or to the system of the current application</td></tr></tbody></table><div class="heading">Throws:</div><table class="methodItem"><tbody><tr><td class="methodItemType light"></td><td class="methodItemDesc">Error if the URL is not server-relative (e.g. <code>./something</code>, <code>http://foo.bar/something</code>, ...)</td></tr></tbody></table><div class="tagDeprecated"><div class="title">Deprecated API:</div><div class="desc">please use <code>sap.ui.model.odata.ODataUtils.setOrigin(sServiceUrl, { alias : sSystem });</code> The system alias can be extracted from the Component via <code>getComponentData().startupParameters["sap-system"][0]</code></div></div><dl class="detailList since"><dt class="heading since">Since:</dt><dd>1.19.1 (passing an SAPUI5 component instance as second parameter is supported since version 1.32.0)</dd></dl></div></div></div></div></div></body></html>