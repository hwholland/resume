<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Timeline - sap.suite.ui.commons</title>

    <!-- UI5 Bootstrap -->
    <script src="../../../../../resources/sap-ui-core.js"
            type="text/javascript"
            id="sap-ui-bootstrap"
            data-sap-ui-libs="sap.suite.ui.commons,sap.m, sap.ui.commons"
            data-sap-ui-theme="sap_bluecrystal"></script>

<style type="text/css">



</style>
<script type="text/javascript">
var dataI18n = {
		I18N_NAME: "Name Sorter",
		I18N_STATUS: "Status Sorter",
		I18N_VALUE: "Value Sorter",
		I18N_PRICE: "Price Sorter"
	};
var oModel18n = new sap.ui.model.json.JSONModel();
oModel18n.setData(dataI18n);


var vsd1 = new sap.m.ViewSettingsDialog("vsd1", {
	confirm: function (oEvent) {
		var p = oEvent.getParameters(),
			aFilters,
			oCallback,
			
			i = 0;
				
		// update table info bar text (show only if we have a text & set text to label)
		table.getInfoToolbar().setVisible(!!p.filterString);
		table.getInfoToolbar().getContent()[0].setText(p.filterString);

	}
});

vsd1.setModel(oModel18n, "i18n");

		
vsd1.addFilterItem(new sap.m.ViewSettingsFilterItem({
	key: "myNameFilter",
	text: "Name",
	items: [
		new sap.m.ViewSettingsItem({
			key: "name1",
			text: "Headphone",
			selected: true,
			customData: new sap.ui.core.CustomData({
				key: "filter",
				value: new sap.ui.model.Filter("name", sap.ui.model.FilterOperator.EQ, "Headphone")
			})
		}),
		new sap.m.ViewSettingsItem({
			key: "name2",
			text: "Mousepad",
			selected: true,
			customData: new sap.ui.core.CustomData({
				key: "filter",
				value: new sap.ui.model.Filter("name", sap.ui.model.FilterOperator.EQ, "Mouse Pad")
			})
		}),
		new sap.m.ViewSettingsItem({
			key: "name3",
			text: "Monitor",
			customData: new sap.ui.core.CustomData({
				key: "filter",
				value: new sap.ui.model.Filter("name", sap.ui.model.FilterOperator.EQ, "Monitor")
			})
		}),
		new sap.m.ViewSettingsItem({
			key: "name4",
			text: "Backpack",
			customData: new sap.ui.core.CustomData({
				key: "filter",
				value: new sap.ui.model.Filter("name", sap.ui.model.FilterOperator.EQ, "Backpack")
			})
		}),
		new sap.m.ViewSettingsItem({
			key: "name5",
			text: "Printer",
			selected: true,
			customData: new sap.ui.core.CustomData({
				key: "filter",
				value: new sap.ui.model.Filter("name", sap.ui.model.FilterOperator.EQ, "Printer")
			})
		}),
		new sap.m.ViewSettingsItem({
			key: "name6",
			text: "Optic Mouse",
			selected: true,
			customData: new sap.ui.core.CustomData({
				key: "filter",
				value: new sap.ui.model.Filter("name", sap.ui.model.FilterOperator.EQ, "Optic Mouse")
			})
		}),
		new sap.m.ViewSettingsItem({
			key: "name7",
			text: "Dock Station",
			customData: new sap.ui.core.CustomData({
				key: "filter",
				value: new sap.ui.model.Filter("name", sap.ui.model.FilterOperator.EQ, "Dock Station")
			})
		})
	]
}));

vsd1.addFilterItem(new sap.m.ViewSettingsFilterItem({
	key: "myStatusFilter",
	text: "Status",
	items: [
		new sap.m.ViewSettingsItem({
			key: "status1",
			text: "Approved",
			selected: true,
			customData: new sap.ui.core.CustomData({
				key: "filter",
				value: new sap.ui.model.Filter("status", sap.ui.model.FilterOperator.EQ, "A")
			})
		}),
		new sap.m.ViewSettingsItem({
			key: "status2",
			text: "Open",
			selected: true,
			customData: new sap.ui.core.CustomData({
				key: "filter",
				value: new sap.ui.model.Filter("status", sap.ui.model.FilterOperator.EQ, "O")
			})
		}),
		new sap.m.ViewSettingsItem({
			key: "status3",
			text: "Denied",
			selected: true,
			customData: new sap.ui.core.CustomData({
				key: "filter",
				value: new sap.ui.model.Filter("status", sap.ui.model.FilterOperator.EQ, "D")
			})
		})
	]
}));

var vPopover = new sap.m.ResponsivePopover({
	title :"test",
	placement : sap.m.PlacementType.Auto,
	contentHeight : "15rem",
	contentWidth : "15rem"
});
var suggestionData = [{ "name": "John Smith",
		                 "objId": "john.smith@sap.com",
		                 "icon": "demokit/images/persons/img_contacts_01.png"
		               },
                      { "name": "Joerg Stiller",
                       	"objId": "joerg.stiller@sap.com",
                       	"icon": "demokit/images/persons/img_contacts_01.png"
                      },
                      { "name": "Nancy Dole",
                       	"objId": "nancy.dole@sap.com",
                       	"icon": "demokit/images/persons/img_contacts_01.png"
                       }  
                              
					]     ;
					
							

var oData3 = [{
    "viewData": {
        "dateTime": new Date(new Date().getTime() - (1000 * 3600 * 24) * 2).getTime(),
        "filterValue": "History",
        "icon": "sap-icon://activity-2",
        "userPicture" : "demokit/images/persons/img_contacts_01.png",
        "replies": [
            {
                "dateTime": "2012-10-24",
                "filterValue": "Replies",
                "icon": "demokit/images/persons/img_contacts_01.png",
                "text": "mesage 1",
                "title": "Reply 1",
                "userName": "Joerg Stiller"
            },
            {
                "dateTime": "2012-10-24",
                "filterValue": "Replies",
                "icon": "demokit/images/persons/img_contacts_01.png",
                "text": "message 2",
                "title": "Reply 2",
                "userName": "Joerg Stiller"
            }
        ],
        "text": "Change the transaction from SE80 to SE16",
        "title": "changed a long long long long long long Transaction",
        "userName": "Joerg Stiller"
    }
},
{
    "viewData": {
        "dateTime": new Date(),
        "filterValue": "Posts",
        "icon": "sap-icon://discussion",
        
        "replies": [
            {
                "dateTime": "2012-10-24",
                "filterValue": "Replies",
                "icon": "sap-icon://activity-2",
                "text": "this is a reply message 1, really long long long long long text",
                "title": "Reply 1",
                "userName": "Joerg Stiller"
            },
            {
                "dateTime": "2012-10-24",
                "filterValue": "Replies",
                "icon": "sap-icon://activity-2",
                "text": "this is a reply message 2",
                "title": "Reply 2",
                "userName": "Joerg Stiller with a long long long long long name"
            }
        ],
        "text": "Test Post created by qUnit",
        "title": "created a new post that is really loooooooooong long long long long long long long long long long long long",
        "userName": "John Smith with a looooooooooooooooggggggggggggggggg name"
    }
}
];    	
        	
        	
      	
       	
     
	var oModel = new sap.ui.model.json.JSONModel(oData3); 

	var reply = new sap.m.List({
		items: {
			 path: "viewData/replies/",
			template: new sap.m.FeedListItem( {
				
				text: "{text}",
				icon: "{icon}",
				timestamp: "{dateTime}",
				sender: "{userName}"
			})
		} 		
});
	var actions = [new sap.ui.core.CustomData({
			key: "action1",
			value: "Action1"
		}), 
		new sap.ui.core.CustomData({
			key: "action2",
			value: "Second"
		}),
		new sap.ui.core.CustomData({
			key: "action3",
			value: "Third"
		}),
		new sap.ui.core.CustomData({
			key: "action4",
			value: "Last"
		})];
	var actions2 = [new sap.ui.core.CustomData({
				key: "action1",
				value: "A1"
			}), 
			new sap.ui.core.CustomData({
				key: "action2",
				value: "Second"
			}),
			new sap.ui.core.CustomData({
				key: "action3",
				value: "Third"
			})];
	
	var tlItem = new sap.suite.ui.commons.TimelineItem({
  		dateTime : "{viewData/dateTime}",
		text : "{viewData/text}",
		title : "{viewData/title}",
		userName : "{viewData/userName}",
		filterValue: "{viewData/filterValue}",
		icon : "{viewData/icon}",
		userPicture : "{viewData/userPicture}",
		userNameClickable : true,
		replyList: reply,
		customAction: actions		
	});
	
	tlItem.attachUserNameClicked(
		function(oControlEvent) { 
  			alert("Click on User Name " + oControlEvent.getSource().getUserName());
		}	
	);
	tlItem.attachReplyPost(
			function(oControlEvent){
				alert(oControlEvent.getParameter("value"));
				
				this.getReplyList().addItem(new sap.m.FeedListItem( {
					
					text: oControlEvent.getParameter("value"),
					icon : "sap-icon://accept",
					timestamp:  new Date(),
					sender: "Yuanyuan Xiang"
				}))
				
			}		
	);
	
	tlItem.attachCustomActionClicked(
		function(oEvent){
			alert("value is " + oEvent.getParameter("value") + " key is " + oEvent.getParameter("key"));
			oItem = oEvent.getSource();
			oItem.removeAllCustomAction();
			oItem.addCustomAction(new sap.ui.core.CustomData({key:"less", value:"Show Less"}));
			
			
		}
	);
	
    tlItem.attachSuggest(function(oEvent) {
        alert(oEvent.getParameter("suggestValue"));
        var oModel = new sap.ui.model.json.JSONModel();
        oModel.setData(suggestionData);
        sap.ui.getCore().setModel(oModel, "myModel");


        var tt = new sap.m.StandardListItem({
               icon: "{myModel>icon}",
               title: "{myModel>name}",
               description: "{myModel>objId}"
        });
               
        this.bindAggregation("suggestionItems",{
                     path: "myModel>/", 
                     template: tt
        });
        

 });
	
  	var timeline = new sap.suite.ui.commons.Timeline({enableBusyIndicator: false, 
  		enableSocial: false, forceGrowing: true, enableScroll: false});
  	timeline.setModel(oModel);
  	timeline.bindAggregation("content", {
		path: "/",
		template: tlItem
	});
  	timeline.setCustomFilter(vPopover);
  	
  	timeline.setShowIcons(true);
  	timeline.setWidth("80%");
	timeline.attachAddPost(function(oEvent) {
		alert("addPost event is filed. post content is : " + oEvent.getParameter("value"));
		var oItem = new sap.suite.ui.commons.TimelineItem({
			dateTime : new Date(),
			text : oEvent.getParameter("value"),
			userName : "Yuanyuan Xiang",
		  	title : "added a Note",
		  	filterValue: "Note",
		 	icon : "sap-icon://accept"
		  	});
		 	timeline.addContent(oItem);
		  	}); 

	timeline.attachSuggest(function(oEvent) {
		alert(oEvent.getParameter("suggestValue"));
		/*
		var oModel = new sap.ui.model.json.JSONModel();
		oModel.setData(suggestionData);
		sap.ui.getCore().setModel(oModel, "myModel");
		*/
		var oModel = new sap.ui.model.odata.ODataModel("/uilib-sample/proxy/http/services.odata.org/V3/Northwind/Northwind.svc/", true);
		sap.ui.getCore().setModel(oModel, "myModel");
		/*
		var tt = new sap.m.StandardListItem({
			icon: "{myModel>icon}",
			title: "{myModel>name}",
			description: "{myModel>objId}"
		});
		*/
		var tt = new sap.m.StandardListItem({
			icon: "sap-icon://activity-items",
			title: "{myModel>ShipName}",
			description: "{myModel>CustomerID}"
		});
		timeline.bindAggregation("suggestionItems",{
				path: "myModel>/Orders", 
				template: tt
		});

	});
	
	timeline.attachGrow(function(oEvent) {
		alert("grow event");
	});
	
   	var panel1 = new sap.ui.commons.Panel({ collapsed : false, showCollapseIcon : false,   width : "400px", height : "500px",  text:"Timeline: Text Items with Show Icons, Show Header, Sort", areaDesign: sap.ui.commons.enums.AreaDesign.Transparent});
   	panel1.addContent(timeline); 	
 
   	

   	
   	var layh = new sap.ui.commons.layout.HorizontalLayout();
   	var indent = new sap.ui.commons.TextView({ width : '100px' });
   	var indent2 = new sap.ui.commons.TextView({ width : '100px' });
  
   	//layh.addContent(panel1);
   	
    layh.addContent(panel1);//.addContent(indent).addContent(panel2);
   	layh.placeAt("content"); 

		
</script>
</head>

<body class="sapUiBody">
    <div id="content"></div>
</body>
</html>
