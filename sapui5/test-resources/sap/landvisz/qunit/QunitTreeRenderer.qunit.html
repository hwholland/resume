<!DOCTYPE HTML>
<!-- 
  Tested control/class: sap.landvisz.LandscapeEntity
  Author: SAP
-->

<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>Qunit for Landscape Entity Control</title>
	<script id="sap-ui-bootstrap" 
		type="text/javascript"
		src="../../../../resources/sap-ui-core.js"
		data-sap-ui-theme="sap_goldreflection"
		data-sap-ui-language="en-US"
		data-sap-ui-noConflict="true"
		data-sap-ui-libs="sap.ui.commons,sap.ui.ux3,sap.landvisz"
		data-sap-ui-preload="false">
	</script>
	
	<link rel="stylesheet" href="../../../../resources/sap/ui/thirdparty/qunit.css" type="text/css" media="screen" />
	<script type="text/javascript" src="../../../../resources/sap/ui/thirdparty/qunit.js"></script>
	<script type="text/javascript" src="../../../../resources/sap/ui/qunit/qunit-junit.js"></script>
	<script type="text/javascript" src="../../../../resources/sap/ui/qunit/QUnitUtils.js"></script>
	
	<!-- Control initialization -->

<script language="javascript">

 
var oData = {
			nodes:{

			node1: {
				name: "SAP Erp6.0",
				selected: false,
				type:"pv",
				node: {
					name: "instances",
					selected: false,
					type:"pi",
					node1: {
						name: "central",
						selected: false,
						type:"pi",
					},
					node2: {
						name: "ecc",
						selected: false,
						type:"pi",
					}
				},

			},
			node2:{
				name: "SAP NW7.0",
				selected: false,
				type:"pv",
				node: {
					name: "central",
					selected: false,
					type:"pi",
				}
			}
		}
				};
			  
		
		var treeField  = new sap.landvisz.internal.TreeField();
		treeField.setTreeModel(oData);
		treeField.setBindingName("nodes");
			var myModel = {
					name : "AWX",
					tooltip : "Am a Overall tooltip",
					type : "TechnicalSystem",
					qualifierText : "ABAP",
					qualifierTooltip : "ABAP Server System",
					qualifierType : "Abap",
					id : "aminId",
					renderingSize : "Regular",
					defaultState : "NotSelected",
					description : "Technical System AWX of SAP Netweaver 7.0",
					
					myHeaders: [ 
					             
					             { header :"OverView",properties:[
			      	                                 
			     	                                  new sap.landvisz.internal.LinearRowField({ label :"Operating System",value:"Windows Server 2003"}),
			     	                                  new sap.landvisz.internal.LinearRowField({ label :"Database",value:"IBM DB2"})
			     	]},

				 { header :"Product",properties:  [new sap.landvisz.internal.LinearRowField({ label :"SAP Netweaver",iconType:"p",iconTitle:"Product"})
				 ]},
				 { header :"ProductVersion",properties:  [new sap.landvisz.internal.LinearRowField({ value :"SAP Netweaver 7.0",iconType:"pv",iconTitle:"ProductVersion"})
				 ]},
				 
				 { header :"ProductInstances",properties: treeField}
				 
			],
			
			};
				
				  var oLandEntity = new sap.landvisz.LandscapeEntity({

					   systemName : "{/name}",
						tooltip : "{/tooltip}",
						type : sap.landvisz.LandscapeObject.TechnicalSystem,
						qualifierText : "{/qualifierText}",
						qualifierTooltip : "{/qualifierTooltip}",
						qualifierType : sap.landvisz.TechnicalSystemType.Java,
						id : "aminId",
						renderingSize : sap.landvisz.EntityCSSSize.Medium,
						enabled : true,
						visible : true,
						defaultState : "{/defaultState}",
						description : "{/description}",
						containers:"{/myHeaders}",
//						select:function(oControlEvent) {
							
//		   					alert("select");
//		   				}

			 });
				oLandEntity.attachSelect(function(oControlEvent) {
					
					alert("I am the handler of entity selection");
				});
					var oModel = new sap.ui.model.json.JSONModel();
					oModel.setData(myModel);
					oLandEntity.setModel(oModel);
					
					
				    oLandEntity.placeAt("content");
		    
		  //Tests Starts
						
			module("TreeRendererCreation");
			test("TreeRendererCreationOk", function() {
				/*var oDomRef = jQuery.sap.domById("CLVEntityActions");
	    		ok(oDomRef, "CLVEntityActions exist in the page");
	    		//var oDomRef = jQuery.sap.domById("sapUiHLayoutChildWrapper");
				var oDomRef = jQuery.sap.domById("__bar0-aminId-0");
				//var oDomRef = jQuery.sap.domById("sapLandviszAction");
	    		ok(oDomRef, "Action 1 exists");*/
	    		var oDomRef = treeField.getTreeModel();
	    		if(oDomRef)
	    	    ok(oDomRef, "Tree Field exists");	    		
	    		equals(treeField.getTreeModel().nodes.node1.name , "SAP Erp6.0", "SAP Erp6.0 exists");
	    		equals(treeField.getTreeModel().nodes.node1.type , "pv", "Type is Product Version");
	    		equals(treeField.getTreeModel().nodes.node1.node.name , "instances", "Instances exists");
	    		equals(treeField.getTreeModel().nodes.node1.node.type , "pi", "Type is Product Instance");
	    		equals(treeField.getTreeModel().nodes.node1.node.node1.name , "central", "Name as Central exists");
	    		equals(treeField.getTreeModel().nodes.node1.node.node1.type , "pi", "Type is Product Instance");
	    		equals(treeField.getTreeModel().nodes.node1.node.node2.name , "ecc", "Name as Ecc exists");
	    		equals(treeField.getTreeModel().nodes.node1.node.node1.type , "pi", "Type is Product Instance");
	    		equals(treeField.getTreeModel().nodes.node2.name , "SAP NW7.0", "SAP NW7.0 exists");
	    		equals(treeField.getTreeModel().nodes.node2.type , "pv", "Type is Product Version");
	    		equals(treeField.getTreeModel().nodes.node2.node.name , "central", "central exists");
	    		equals(treeField.getTreeModel().nodes.node2.node.type , "pi", "Type is Product Instance");
	    		
	    		
	    	    
			});	
			

</script>	

</head>
 <body class="sapUiBody">
       	<h1 id="qunit-header">QUnit Page for CLV UI5 Custom Actions Control</h1>
		<h2 id="qunit-banner"></h2>
		<h2 id="qunit-userAgent"></h2>
		<ol id="qunit-tests"></ol>
		<div id="qunit-fixture">test markup, will be hidden</div>
		<div id="content">
       </div>
       </body>
</html>