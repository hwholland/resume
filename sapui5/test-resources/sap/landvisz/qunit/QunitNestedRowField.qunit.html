<!DOCTYPE HTML>
<!-- 
  Tested control/class: sap.landvisz.LandscapeEntity
  Author: SAP
-->

<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>Qunit for Landscape Entity Control</title>
	<script id="sap-ui-bootstrap" 
		type="text/javascript"
		src="../../../../resources/sap-ui-core.js"
		data-sap-ui-theme="sap_goldreflection"
		data-sap-ui-language="en-US"
		data-sap-ui-noConflict="true"
		data-sap-ui-libs="sap.ui.commons,sap.ui.ux3,sap.landvisz"
		data-sap-ui-preload="false">
	</script>
	<link rel="stylesheet" href="../../../../resources/sap/ui/thirdparty/qunit.css" type="text/css" media="screen" />
	<script type="text/javascript" src="../../../../resources/sap/ui/thirdparty/qunit.js"></script>
	<script type="text/javascript" src="../../../../resources/sap/ui/qunit/qunit-junit.js"></script>
	<script type="text/javascript" src="../../../../resources/sap/ui/qunit/QUnitUtils.js"></script>
	
	<!-- Control initialization -->

<script language="javascript">


var myModel = {
		name : "J01",
		//tooltip : "Am a Overall tooltip",
		type : "TechnicalSystem",
		qualifierText : "ABAP",
		qualifierTooltip : "ABAP Server System",
		qualifierType : "Abap",
		id : "aminId",
		renderingSize : "Regular",
		defaultState : "NotSelected",
		description : "Am in Description",
	
	myHeaders: [ { header :"OverView",selected: false, properties:[{ label :"OS",value:"Windows"},
	         	                                  { label :"DB",value:"DB2"}
	         	]},

	    	 { header :"Product",selected: false,properties:  [{ label :"SAP ERP", value:"",iconType:"p",iconTitle:"Product"}]
	    	 },
	    	 { header :"ProductVersion",selected: true,properties:  [{ label :"SAP ERP 6.0",value:"",iconType:"pv",iconTitle:"ProductVersion"}]
	    	 }
	    	 
	    ],
	  actions: [{action: "Relations",icon: "http://upload.wikimedia.org/wikipedia/commons/5/59/SAP_2011_logo.svg"},{ action:"copy"},{ action: "paste", icon:"http://upload.wikimedia.org/wikipedia/commons/5/59/SAP_2011_logo.svg"}] ,
	};

var oLandEntity = new sap.landvisz.LandscapeEntity({

   systemName : "{/name}",
	//tooltip : "{/tooltip}",
	type : sap.landvisz.LandscapeObject.TechnicalSystem,
	qualifierText : "{/qualifierText}",
	qualifierTooltip : "{/qualifierTooltip}",
	qualifierType : sap.landvisz.TechnicalSystemType.ABAP,
	id : "aminId",
	renderingSize : sap.landvisz.EntityCSSSize.Medium,
	enabled : true,
	visible : true,
	defaultState : "{/defaultState}",
	description : "{/description}",
	systemStatus : sap.landvisz.ModelingStatus.WARNING,
	showCustomActions: true,
	showEntityActions: true

});
var oModel = new sap.ui.model.json.JSONModel();
oModel.setData(myModel);
oLandEntity.setModel(oModel);

var oDataContainer = new sap.landvisz.internal.DataContainer({ header : "{header}",selected:"{selected}" });
var oRowField = new sap.landvisz.internal.LinearRowField({ label:"{label}",value:"{value}",iconTitle:"{iconTitle}",iconType:"{iconType}"});
oDataContainer.bindAggregation("properties","properties",oRowField);
oLandEntity.bindAggregation("dataContainers","/myHeaders",oDataContainer);
var oActionBar =  new sap.landvisz.internal.ActionBar({actionLabel: "{action}", iconSrc:"{icon}"});
oLandEntity.bindAggregation("actionBar","/actions",oActionBar);



    oLandEntity.placeAt("content");
		    
		  //Tests Starts
						
			module("NestedRowFieldCreation");
			test("NestedRowFieldCreationOk", function() {
				var oDomRef = jQuery.sap.domById("aminId-CLVEntityVLayoutProperties");
	    		ok(oDomRef, "Data Container Row Field exists");
	    		//check which Navigation item is selected
	    		
	    		if(oLandEntity.getModel().getData().myHeaders[0].selected == true){
		    		equals(oLandEntity.getModel().getData().myHeaders[0].header , "OverView", "Overview is selected");
		    		equals(oLandEntity.getModel().getData().myHeaders[0].properties[0].label, "Operating System", "Label is operating system");
		    		equals(oLandEntity.getModel().getData().myHeaders[0].properties[0].value, "Windows Server 2003", "Value is Windows Server 2003");
		    		equals(oLandEntity.getModel().getData().myHeaders[0].header , "OverView", "Overview is selected");
		    		equals(oLandEntity.getModel().getData().myHeaders[0].properties[1].label, "Database", "Label is Database");
		    		equals(oLandEntity.getModel().getData().myHeaders[0].properties[1].value, "IBM DB2", "Value is IBM DB2");
		    		ok("Nested Row field rendered");
		    		}
	    		if(oLandEntity.getModel().getData().myHeaders[1].selected == true){
		    		equals(oLandEntity.getModel().getData().myHeaders[1].header , "Product", "Product is selected");
		    		equals(oLandEntity.getModel().getData().myHeaders[1].properties[0].label, "SAP ERP", "Label is SAP ERP");
		    		equals(oLandEntity.getModel().getData().myHeaders[1].properties[0].iconType, "p", "Icon type is product");
		    		equals(oLandEntity.getModel().getData().myHeaders[1].properties[0].iconTitle, "Product", "icon Title is Product");
		    		ok("Linear Row field Rendered");
		    		}
		    		
		    		if(oLandEntity.getModel().getData().myHeaders[2].selected == true){
			    		equals(oLandEntity.getModel().getData().myHeaders[2].header , "ProductVersion", "ProductVersion is selected");
			    		equals(oLandEntity.getModel().getData().myHeaders[2].properties[0].label, "SAP ERP 6.0", "Value is ERP 6.0");
			    		equals(oLandEntity.getModel().getData().myHeaders[2].properties[0].iconType, "pv", "Icon Type is Product Version");
			    		equals(oLandEntity.getModel().getData().myHeaders[2].properties[0].iconTitle, "ProductVersion", "icon Title is ProductVersion");
			    		ok("Linear Row field Rendered");
			    		}
	    		
			});	
			

</script>

</head>
 <body class="sapUiBody">
       	<h1 id="qunit-header">QUnit Page for CLV UI5 Custom Actions Control</h1>
		<h2 id="qunit-banner"></h2>
		<h2 id="qunit-userAgent"></h2>
		<ol id="qunit-tests"></ol>
		<div id="qunit-fixture">test markup, will be hidden</div>
		<div id="content">
       </div>
       </body>
</html>