<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta charset="UTF-8">

		<title>QUnit: Example - sap.gantt</title>

		<script id="sap-ui-bootstrap"
			src="../../../../../resources/sap-ui-core.js"
			data-sap-ui-theme="sap_bluecrystal"
			data-sap-ui-noConflict="true"
			data-sap-ui-libs="sap.gantt">
		</script>

		<link rel="stylesheet" type="text/css" href="../../../../../resources/sap/ui/thirdparty/qunit.css"/>
		<script src="../../../../../resources/sap/ui/thirdparty/qunit.js"></script>
		<script src="../../../../../resources/sap/ui/qunit/qunit-junit.js"></script>
		<script src="../../../../../resources/sap/ui/qunit/QUnitUtils.js"></script>
		<script>
			
			sap.ui.require([
				"sap/gantt/misc/Format",
				"sap/gantt/library",
				"sap/ui/thirdparty/d3",
				"sap/ui/thirdparty/sinon",
				"sap/ui/thirdparty/sinon-qunit"
				], function () {
					"use strict";
					
					QUnit.module("Test sap.gantt.misc.Format", {
						setup: function () {
							var config = sap.ui.getCore().getConfiguration();
							this.originalLanguage = config.getLanguage();
							config.setLanguage("en");
						},
						teardown: function () {
							var config = sap.ui.getCore().getConfiguration();
							config.setLanguage(this.originalLanguage);
							this.originalLanguage = undefined;
						}
					});
					
					QUnit.test("test for format in library", function (assert) {
						jQuery.sap.require("sap.ui.core.Configuration");
						jQuery.sap.require("sap.ui.core.format.DateFormat");
						
						
						var date1 = new Date(2015,8,9,0,0,0,0);
						var date2 = new Date(2016,8,9,0,10,0,0);

						assert.strictEqual(sap.gantt.misc.Format.abapTimestampToDate("20150909000000").toUTCString(), date1.toUTCString(), "Test abapTimestampToDate format: 20150909000000");
						
						assert.strictEqual(sap.gantt.misc.Format.abapTimestampToDate("20160909001000").toUTCString(), date2.toUTCString(), "Test abapTimestampToDate format: 20160909001000");
						
						assert.strictEqual(sap.gantt.misc.Format.abapTimestampToDate(date1.toUTCString()).toUTCString(), date1.toUTCString(), "Test abapTimestampToDate format: Wed Sep 09 2015 00:00:00 GMT+0800 (China Standard Time)");
						
						assert.strictEqual(sap.gantt.misc.Format.abapTimestampToDate(date2.toUTCString()).toUTCString(), date2.toUTCString(), "Test abapTimestampToDate format: Fri Sep 09 2016 00:10:00 GMT+0800 (China Standard Time)");
						
						var locale = new sap.gantt.config.Locale({
							timeZone: "CET",
							utcdiff: "010000",
							utcsign: "+"
						});

						assert.strictEqual(sap.gantt.misc.Format.abapTimestampToDate(date1).toUTCString(), date1.toUTCString(), "Test passing Date object to abapTimestampToDate method");
						
						assert.strictEqual(sap.gantt.misc.Format.dateToAbapTimestamp(date1), "20150909000000", "Test dateToAbapTimestamp format: new Date(2015,08,09,0,0,0,0)");
						
						assert.strictEqual(sap.gantt.misc.Format.dateToAbapTimestamp(date2), "20160909001000", "Test dateToAbapTimestamp format: new Date(2016,08,09,0,10,0,0)");
						
						assert.strictEqual(sap.gantt.misc.Format.abapTimestampToTimeLabel("20150909000000",locale), "Sep 9, 2015, 1:00:00 AM", "Test abapTimestampToTimeLabel format: 20150909000000");
						
						assert.strictEqual(sap.gantt.misc.Format.abapTimestampToTimeLabel("20160909001000",locale), "Sep 9, 2016, 1:10:00 AM", "Test dateToAbapTimestamp format: 20160909001000");
						
						assert.strictEqual(sap.gantt.misc.Format.abapTimestampToTimeLabel("20150815011000",locale), "Aug 15, 2015, 2:10:00 AM", "Test dateToAbapTimestamp format: 20150815011000");

						var oZoomStrategyConfig = {
							unit: sap.gantt.config.TimeUnit.month,
							span: 6,
							format: "MMMM yyyy",
							locale: "zh-cn"
						}

						assert.strictEqual(sap.gantt.misc.Format.creatTimeLabel(oZoomStrategyConfig, date1), "九月 2015", "Test creatTimeLabel");
					});
				});
			

		</script>

		
	</head>
	<body>
		<div id="qunit"></div>
	</body>
</html>
