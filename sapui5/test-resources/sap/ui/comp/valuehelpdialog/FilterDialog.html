<!DOCTYPE HTML>
<html>
<head>

<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<title>Filter Dialog - sap.ui.comp</title>

<!-- ********************************************************************** -->
<!-- SAPUI5 Bootstrap:                                                     -->
<!-- Extend the "libs" property if you like to import additional libraries  -->
<!-- ********************************************************************** -->
<script id="sap-ui-bootstrap" 
	type="text/javascript"
	data-sap-ui-libs="sap.m,sap.ui.comp"
	data-sap-ui-theme="sap_bluecrystal"
	src="../../../../../resources/sap-ui-core.js"
	data-sap-ui-compatVersion="edge">
</script>

<script type="text/javascript">	
	jQuery.sap.require("sap.ui.comp.valuehelpdialog.ValueHelpDialog");
	jQuery.sap.require("sap.ui.comp.filterbar.FilterBar");

	
	var theFilterButton = new sap.m.Button({
		text: "Filter"
	});
	
	theFilterButton.attachPress(function() {
			
			var oValueHelpDialog = new sap.ui.comp.valuehelpdialog.ValueHelpDialog({
				title: "Enter Some Filters",
				modal: true,
				filterMode: true,
  				maxIncludeRanges: -1,
   				maxExcludeRanges: 2,

				ok: function(oControlEvent) {
					aTokens = oControlEvent.getParameter("tokens");

					var sTokens= ""; 
					for (i = 0; i < aTokens.length; i++) {
						var oToken = aTokens[i];
						sTokens+= oToken.getText() + " ";
					}
					//theTokenInput.setTokens(aTokens);

					sap.m.MessageToast.show("Tokens= "+sTokens);
					oValueHelpDialog.close();
				},

				cancel: function(oControlEvent) {
					sap.m.MessageToast.show("Cancel pressed!");
					oValueHelpDialog.close();
				}
			});
			
			//oValueHelpDialog.setIncludeRangeOperations([ sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.BT ]);			
			
			oValueHelpDialog.setRangeKeyFields(["CompanyCode"]);

			var rangeToken1= new sap.m.Token({key: "i1", text: "ID: a..z"}).data("range", { "exclude": false, "operation": sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.BT, "keyField": "CompanyCode", "value1": "a", "value2": "z"});
			var rangeToken2= new sap.m.Token({key: "i2", text: "ID: =foo"}).data("range", { "exclude": false, "operation": sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.EQ, "keyField": "CompanyCode", "value1": "foo", "value2": ""});
			var	aTokens= [rangeToken1, rangeToken2];   
			oValueHelpDialog.setTokens(aTokens);			
			
			if (this.$().closest(".sapUiSizeCompact").length > 0) { // check if the Token field runs in Compact mode
				oValueHelpDialog.addStyleClass("sapUiSizeCompact");
			}

			oValueHelpDialog.open();
		}

	);

	theFilterButton.placeAt("content");
 	
</script>
</head>
<body class="sapUiBody sapUiSizeCompact" role="application">
	<h1 id="header">Filter Dialog Test Page for <code>sap.ui.comp.valuehelpdialog.ValueHelpDialog</code></h1>
	Filter Dialog <br>
	<div id="content" style="display:inline" ></div><br>
	<p>
</body>
</html>
