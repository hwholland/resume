<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<title>qUnit Page for sap.ui.comp.smartfield.SmartField</title>

		<script id="sap-ui-bootstrap"
			src="../../../../../resources/sap-ui-core.js"
			data-sap-ui-theme="sap_bluecrystal"
			data-sap-ui-noConflict="true"
			data-sap-ui-libs="sap.ui.comp">
		</script>

		<link rel="stylesheet" href="../../../../../resources/sap/ui/thirdparty/qunit.css"	type="text/css" media="screen" />
		<script src="../../../../../resources/sap/ui/thirdparty/qunit.js"></script>
		<script src="../../../../../resources/sap/ui/qunit/qunit-junit.js"></script>
		<script src="../../../../../resources/sap/ui/qunit/qunit-coverage.js"></script>
		<script src="../../../../../resources/sap/ui/qunit/QUnitUtils.js"></script>
		<script src="../../../../../resources/sap/ui/thirdparty/sinon.js"></script>
		<script src="../../../../../resources/sap/ui/thirdparty/sinon-qunit.js"></script>
		<script src="data/TestModel.data.js"></script>
		<script>
		if (!(sap.ui.Device.browser.internet_explorer && sap.ui.Device.browser.version <= 8)) {
			jQuery.sap.require("sap.ui.qunit.qunit-coverage");
		}

		(function() {
			jQuery.sap.require("sap.ui.comp.smartfield.SmartField");
			jQuery.sap.require("sap.ui.model.odata.ODataModel");
			jQuery.sap.require("sap.ui.model.odata.ODataMetaModel");
			jQuery.sap.require("sap.ui.model.json.JSONModel");
			jQuery.sap.require("sap.ui.model.ParseException");
			jQuery.sap.require("sap.ui.model.ValidateException");


			var fnPatchSetContentAggregation = function(oControl, fnHandler) {

				oControl.__origSetAggregation = oControl.__origSetAggregation || oControl.setAggregation;
				var fnOrigSetAggregation = oControl.setAggregation;
				oControl.setAggregation = function(sAggregation) {
					if (sAggregation === "_content") {
						return fnHandler.call(this);
					} else {
						return this.__origSetAggregation.apply(this, arguments);
					}
				};
			};

			var fnPatchGetContentAggregation = function(oControl, fnHandler) {

				oControl.__origGetAggregation = oControl.__origGetAggregation || oControl.getAggregation;
				oControl.getAggregation = function(sAggregation) {
					if (sAggregation === "_content") {
						return fnHandler.call(this);
					} else {
						return this.__origGetAggregation.apply(this, arguments);
					}
				};
			};

			var oTestEntitySet = {
				"name": "Project",
				"entityType": "ZMEY_SRV.Project_Type",
				"extensions": [{
					"name": "pageable",
					"value": "false",
					"namespace": "http://www.sap.com/Protocols/SAPData"
				},
					{
						"name": "addressable",
						"value": "false",
						"namespace": "http://www.sap.com/Protocols/SAPData"
					},
					{
						"name": "content-version",
						"value": "1",
						"namespace": "http://www.sap.com/Protocols/SAPData"
					},
					{
						"name": "updatable-path",
						"value": "Properties/EntityUpdatable",
						"namespace": "http://www.sap.com/Protocols/SAPData"
					}],
				"sap:pageable": "false",
				"Org.OData.Capabilities.V1.SkipSupported": {
					"Bool": "false"
				},
				"Org.OData.Capabilities.V1.TopSupported": {
					"Bool": "false"
				},
				"sap:addressable": "false",
				"sap:content-version": "1",
				"sap:updatable-path": "Properties/EntityUpdatable",
				"Org.OData.Capabilities.V1.UpdateRestrictions": {
					"Updatable": {
						"Path": "Properties/EntityUpdatable"
					}
				},
				"Org.OData.Capabilities.V1.SearchRestrictions": {
					"Searchable": {
						"Bool": "false"
					}
				},
				"Org.OData.Capabilities.V1.FilterRestrictions": {
					"NonFilterableProperties": [{
						"PropertyPath": "ID"
					},
						{
							"PropertyPath": "Name"
						},
						{
							"PropertyPath": "Description"
						},
						{
							"PropertyPath": "StartDate"
						},
						{
							"PropertyPath": "StartTime"
						},
						{
							"PropertyPath": "StartDateTime"
						},
						{
							"PropertyPath": "Amount"
						},
						{
							"PropertyPath": "AmountCurrency"
						},
						{
							"PropertyPath": "Quantity"
						},
						{
							"PropertyPath": "QuantityUnit"
						},
						{
							"PropertyPath": "Description_Required"
						},
						{
							"PropertyPath": "Description_ReadOnly"
						},
						{
							"PropertyPath": "Description_Hidden"
						},
						{
							"PropertyPath": "Description_FC"
						},
						{
							"PropertyPath": "StartDate_Required"
						},
						{
							"PropertyPath": "StartDate_ReadOnly"
						},
						{
							"PropertyPath": "StartDate_Hidden"
						},
						{
							"PropertyPath": "StartDate_FC"
						},
						{
							"PropertyPath": "EntityUpdatable_FC"
						},
						{
							"PropertyPath": "Released"
						},
						{
							"PropertyPath": "ReleaseActionEnabled_FC"
						},
						{
							"PropertyPath": "BigInteger"
						}]
				},
				"Org.OData.Capabilities.V1.SortRestrictions": {
					"NonSortableProperties": [{
						"PropertyPath": "ID"
					},
						{
							"PropertyPath": "Name"
						},
						{
							"PropertyPath": "Description"
						},
						{
							"PropertyPath": "StartDate"
						},
						{
							"PropertyPath": "StartTime"
						},
						{
							"PropertyPath": "StartDateTime"
						},
						{
							"PropertyPath": "Amount"
						},
						{
							"PropertyPath": "AmountCurrency"
						},
						{
							"PropertyPath": "Quantity"
						},
						{
							"PropertyPath": "QuantityUnit"
						},
						{
							"PropertyPath": "Description_Required"
						},
						{
							"PropertyPath": "Description_ReadOnly"
						},
						{
							"PropertyPath": "Description_Hidden"
						},
						{
							"PropertyPath": "Description_FC"
						},
						{
							"PropertyPath": "StartDate_Required"
						},
						{
							"PropertyPath": "StartDate_ReadOnly"
						},
						{
							"PropertyPath": "StartDate_Hidden"
						},
						{
							"PropertyPath": "StartDate_FC"
						},
						{
							"PropertyPath": "EntityUpdatable_FC"
						},
						{
							"PropertyPath": "Released"
						},
						{
							"PropertyPath": "ReleaseActionEnabled_FC"
						},
						{
							"PropertyPath": "BigInteger"
						}]
				}
			};

			var oTestEntityType = {
				"name": "Project_Type",
				"key": {
					"propertyRef": [{
						"name": "ID"
					}]
				},
				"property": [{
					"name": "ID",
					"type": "Edm.Int32",
					"nullable": "false",
					"extensions": [{
						"name": "creatable",
						"value": "false",
						"namespace": "http://www.sap.com/Protocols/SAPData"
					},
						{
							"name": "updatable",
							"value": "false",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
						{
							"name": "sortable",
							"value": "false",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
						{
							"name": "filterable",
							"value": "false",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						}],
					"sap:creatable": "false",
					"sap:updatable": "false",
					"sap:sortable": "false",
					"sap:filterable": "false",
					"Org.OData.Core.V1.Computed": {
						"Bool": "true"
					}
				},
					{
						"name": "Name",
						"type": "Edm.String",
						"nullable": "false",
						"maxLength": "24",
						"extensions": [{
							"name": "field-control",
							"value": "Properties/Name_FC",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "label",
								"value": "Name",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "sortable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:field-control": "Properties/Name_FC",
						"com.sap.vocabularies.Common.v1.FieldControl": {
							"Path": "Properties/Name_FC"
						},
						"sap:label": "Name",
						"com.sap.vocabularies.Common.v1.Label": {
							"String": "Name"
						},
						"sap:sortable": "false",
						"sap:filterable": "false"
					},
					{
						"name": "Description",
						"type": "Edm.String",
						"nullable": "false",
						"maxLength": "80",
						"extensions": [{
							"name": "field-control",
							"value": "Description_FC",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "label",
								"value": "Description",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "sortable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:field-control": "Description_FC",
						"com.sap.vocabularies.Common.v1.FieldControl": {
							"Path": "Description_FC"
						},
						"sap:label": "Description",
						"com.sap.vocabularies.Common.v1.Label": {
							"String": "Description"
						},
						"sap:sortable": "false",
						"sap:filterable": "false"
					},
					{
						"name": "StartDate",
						"type": "Edm.DateTime",
						"precision": "0",
						"extensions": [{
							"name": "display-format",
							"value": "Date",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "field-control",
								"value": "StartDate_FC",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "label",
								"value": "Start Date",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "sortable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:display-format": "Date",
						"sap:field-control": "StartDate_FC",
						"com.sap.vocabularies.Common.v1.FieldControl": {
							"Path": "StartDate_FC"
						},
						"sap:label": "Start Date",
						"com.sap.vocabularies.Common.v1.Label": {
							"String": "Start Date"
						},
						"sap:sortable": "false",
						"sap:filterable": "false"
					},
					{
						"name": "StartTime",
						"type": "Edm.Time",
						"precision": "0",
						"extensions": [{
							"name": "label",
							"value": "Start Time",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "sortable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:label": "Start Time",
						"com.sap.vocabularies.Common.v1.Label": {
							"String": "Start Time"
						},
						"sap:sortable": "false",
						"sap:filterable": "false",
						"com.sap.vocabularies.Common.v1.FieldControl": {
							"Path": "StartDate_FC"
						}
					},
					{
						"name": "StartDateTime",
						"type": "Edm.DateTimeOffset",
						"precision": "0",
						"documentation": [{
							"text": null,
							"extensions": [{
								"name": "Summary",
								"value": "The UTC timestamp is the date and time relative to the UTC (Universal coordinated time).",
								"attributes": [],
								"children": [],
								"namespace": "http://schemas.microsoft.com/ado/2008/09/edm"
							},
								{
									"name": "LongDescription",
									"value": "To normalize local times in a UTC time stamp and make them comparable, they must be converted using their time zone and the ABAP command convert.\nAlthough the time zone for the conversion can be fetched from customizing or master data, you should save it redundantly.\nThe internal structure of the UTC time stamp is logically divided into a date and time part in packed number format <YYYYMMDDhhmmss>. There is also a high resolution UTC time stamp (10^-7 seconds).",
									"attributes": [],
									"children": [],
									"namespace": "http://schemas.microsoft.com/ado/2008/09/edm"
								}]
						}],
						"extensions": [{
							"name": "label",
							"value": "Start Date and Time",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "heading",
								"value": "Time Stamp",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "quickinfo",
								"value": "UTC Time Stamp in Short Form (YYYYMMDDhhmmss)",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "sortable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:label": "Start Date and Time",
						"com.sap.vocabularies.Common.v1.Label": {
							"String": "Start Date and Time"
						},
						"sap:heading": "Time Stamp",
						"com.sap.vocabularies.Common.v1.Heading": {
							"String": "Time Stamp"
						},
						"sap:quickinfo": "UTC Time Stamp in Short Form (YYYYMMDDhhmmss)",
						"com.sap.vocabularies.Common.v1.QuickInfo": {
							"String": "UTC Time Stamp in Short Form (YYYYMMDDhhmmss)"
						},
						"sap:sortable": "false",
						"sap:filterable": "false",
						"com.sap.vocabularies.Common.v1.FieldControl": {
							"If": [{
								"Path": "Released"
							},
								{
									"Int": "1"
								},
								{
									"Int": "3"
								}]
						}
					},
					{
						"name": "Amount",
						"type": "Edm.Decimal",
						"nullable": "false",
						"precision": "11",
						"scale": "2",
						"documentation": [{
							"text": null,
							"extensions": [{
								"name": "Summary",
								"value": "Price for external processing.",
								"attributes": [],
								"children": [],
								"namespace": "http://schemas.microsoft.com/ado/2008/09/edm"
							},
								{
									"name": "LongDescription",
									"value": null,
									"attributes": [],
									"children": [],
									"namespace": "http://schemas.microsoft.com/ado/2008/09/edm"
								}]
						}],
						"extensions": [{
							"name": "unit",
							"value": "AmountCurrency",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "label",
								"value": "Price",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "sortable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:unit": "AmountCurrency",
						"sap:label": "Price",
						"com.sap.vocabularies.Common.v1.Label": {
							"String": "Price"
						},
						"sap:sortable": "false",
						"sap:filterable": "false",
						"Org.OData.Measures.V1.ISOCurrency": {
							"Path": "AmountCurrency"
						}
					},
					{
						"name": "AmountCurrency",
						"type": "Edm.String",
						"nullable": "false",
						"maxLength": "5",
						"documentation": [{
							"text": null,
							"extensions": [{
								"name": "Summary",
								"value": "Currency key for amounts in the system.",
								"attributes": [],
								"children": [],
								"namespace": "http://schemas.microsoft.com/ado/2008/09/edm"
							},
								{
									"name": "LongDescription",
									"value": null,
									"attributes": [],
									"children": [],
									"namespace": "http://schemas.microsoft.com/ado/2008/09/edm"
								}]
						}],
						"extensions": [{
							"name": "label",
							"value": "Currency",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "heading",
								"value": "Crcy",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "quickinfo",
								"value": "Currency Key",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "sortable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "semantics",
								"value": "currency-code",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:label": "Currency",
						"com.sap.vocabularies.Common.v1.Label": {
							"String": "Currency"
						},
						"sap:heading": "Crcy",
						"com.sap.vocabularies.Common.v1.Heading": {
							"String": "Crcy"
						},
						"sap:quickinfo": "Currency Key",
						"com.sap.vocabularies.Common.v1.QuickInfo": {
							"String": "Currency Key"
						},
						"sap:sortable": "false",
						"sap:filterable": "false",
						"sap:semantics": "currency-code"
					},
					{
						"name": "Quantity",
						"type": "Edm.Decimal",
						"nullable": "false",
						"precision": "13",
						"scale": "3",
						"documentation": [{
							"text": null,
							"extensions": [{
								"name": "Summary",
								"value": "Total quantity (including scrap) to be produced in this order.",
								"attributes": [],
								"children": [],
								"namespace": "http://schemas.microsoft.com/ado/2008/09/edm"
							},
								{
									"name": "LongDescription",
									"value": null,
									"attributes": [],
									"children": [],
									"namespace": "http://schemas.microsoft.com/ado/2008/09/edm"
								}]
						}],
						"extensions": [{
							"name": "unit",
							"value": "QuantityUnit",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "label",
								"value": "Quantity",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "heading",
								"value": "Total order quantity",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "quickinfo",
								"value": "Total order quantity",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "sortable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:unit": "QuantityUnit",
						"sap:label": "Quantity",
						"com.sap.vocabularies.Common.v1.Label": {
							"String": "Quantity"
						},
						"sap:heading": "Total order quantity",
						"com.sap.vocabularies.Common.v1.Heading": {
							"String": "Total order quantity"
						},
						"sap:quickinfo": "Total order quantity",
						"com.sap.vocabularies.Common.v1.QuickInfo": {
							"String": "Total order quantity"
						},
						"sap:sortable": "false",
						"sap:filterable": "false",
						"Org.OData.Measures.V1.Unit": {
							"Path": "QuantityUnit"
						}
					},
					{
						"name": "QuantityUnit",
						"type": "Edm.String",
						"nullable": "false",
						"maxLength": "3",
						"documentation": [{
							"text": null,
							"extensions": [{
								"name": "Summary",
								"value": "Unit of measure in which stocks of the material are managed. The system converts all the quantities you enter in other units of measure (alternative units of measure) to the base unit of measure.",
								"attributes": [],
								"children": [],
								"namespace": "http://schemas.microsoft.com/ado/2008/09/edm"
							},
								{
									"name": "LongDescription",
									"value": "You define the base unit of measure and also alternative units of measure and their conversion factors in the material master record.\nSince all data is updated in the base unit of measure, your entry is particularly important for the conversion of alternative units of measure. A quantity in the alternative unit of measure can only be shown precisely if its value can be shown with the decimal places available. To ensure this, please note the following:\nThe base unit of measure is the unit satisfying the highest necessary requirement for precision.\nThe conversion of alternative units of measure to the base unit should result in simple decimal fractions (not, for example, 1/3 = 0.333...).\nInventory Management\nIn Inventory Management, the base unit of measure is the same as the stockkeeping unit.\nServices\nServices have units of measure of their own, including the following:\nService unit\nUnit of measure at the higher item level. The precise quantities of the individual services are each at the detailed service line level.\nBlanket\nUnit of measure at service line level for services to be provided once only, and for which no precise quantities can or are to be specified.",
									"attributes": [],
									"children": [],
									"namespace": "http://schemas.microsoft.com/ado/2008/09/edm"
								}]
						}],
						"extensions": [{
							"name": "label",
							"value": "Unit",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "heading",
								"value": "BUn",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "quickinfo",
								"value": "Base Unit of Measure",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "sortable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "semantics",
								"value": "unit-of-measure",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:label": "Unit",
						"com.sap.vocabularies.Common.v1.Label": {
							"String": "Unit"
						},
						"sap:heading": "BUn",
						"com.sap.vocabularies.Common.v1.Heading": {
							"String": "BUn"
						},
						"sap:quickinfo": "Base Unit of Measure",
						"com.sap.vocabularies.Common.v1.QuickInfo": {
							"String": "Base Unit of Measure"
						},
						"sap:sortable": "false",
						"sap:filterable": "false",
						"sap:semantics": "unit-of-measure"
					},
					{
						"name": "Description_Required",
						"type": "Edm.Boolean",
						"nullable": "false",
						"extensions": [{
							"name": "sortable",
							"value": "false",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:sortable": "false",
						"sap:filterable": "false"
					},
					{
						"name": "Description_ReadOnly",
						"type": "Edm.Boolean",
						"nullable": "false",
						"extensions": [{
							"name": "sortable",
							"value": "false",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:sortable": "false",
						"sap:filterable": "false"
					},
					{
						"name": "Description_Hidden",
						"type": "Edm.Boolean",
						"nullable": "false",
						"extensions": [{
							"name": "sortable",
							"value": "false",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:sortable": "false",
						"sap:filterable": "false"
					},
					{
						"name": "Description_FC",
						"type": "Edm.Byte",
						"nullable": "false",
						"extensions": [{
							"name": "creatable",
							"value": "false",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "updatable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "sortable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:creatable": "false",
						"sap:updatable": "false",
						"sap:sortable": "false",
						"sap:filterable": "false",
						"Org.OData.Core.V1.Computed": {
							"Bool": "true"
						}
					},
					{
						"name": "StartDate_Required",
						"type": "Edm.Boolean",
						"nullable": "false",
						"extensions": [{
							"name": "sortable",
							"value": "false",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:sortable": "false",
						"sap:filterable": "false"
					},
					{
						"name": "StartDate_ReadOnly",
						"type": "Edm.Boolean",
						"nullable": "false",
						"extensions": [{
							"name": "sortable",
							"value": "false",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:sortable": "false",
						"sap:filterable": "false"
					},
					{
						"name": "StartDate_Hidden",
						"type": "Edm.Boolean",
						"nullable": "false",
						"extensions": [{
							"name": "sortable",
							"value": "false",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:sortable": "false",
						"sap:filterable": "false"
					},
					{
						"name": "StartDate_FC",
						"type": "Edm.Byte",
						"nullable": "false",
						"extensions": [{
							"name": "creatable",
							"value": "false",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "updatable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "sortable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:creatable": "false",
						"sap:updatable": "false",
						"sap:sortable": "false",
						"sap:filterable": "false",
						"Org.OData.Core.V1.Computed": {
							"Bool": "true"
						}
					},
					{
						"name": "EntityUpdatable_FC",
						"type": "Edm.Boolean",
						"nullable": "false",
						"extensions": [{
							"name": "creatable",
							"value": "false",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "updatable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "sortable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:creatable": "false",
						"sap:updatable": "false",
						"sap:sortable": "false",
						"sap:filterable": "false",
						"Org.OData.Core.V1.Computed": {
							"Bool": "true"
						}
					},
					{
						"name": "Released",
						"type": "Edm.Boolean",
						"nullable": "false",
						"extensions": [{
							"name": "creatable",
							"value": "false",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "updatable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "sortable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:creatable": "false",
						"sap:updatable": "false",
						"sap:sortable": "false",
						"sap:filterable": "false",
						"Org.OData.Core.V1.Computed": {
							"Bool": "true"
						}
					},
					{
						"name": "ReleaseActionEnabled_FC",
						"type": "Edm.Boolean",
						"nullable": "false",
						"extensions": [{
							"name": "creatable",
							"value": "false",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "updatable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "sortable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:creatable": "false",
						"sap:updatable": "false",
						"sap:sortable": "false",
						"sap:filterable": "false",
						"Org.OData.Core.V1.Computed": {
							"Bool": "true"
						}
					},
					{
						"name": "BigInteger",
						"type": "Edm.Int64",
						"nullable": "false",
						"extensions": [{
							"name": "label",
							"value": "Big Integer",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
							{
								"name": "sortable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							},
							{
								"name": "filterable",
								"value": "false",
								"namespace": "http://www.sap.com/Protocols/SAPData"
							}],
						"sap:label": "Big Integer",
						"com.sap.vocabularies.Common.v1.Label": {
							"String": "Big Integer"
						},
						"sap:sortable": "false",
						"sap:filterable": "false"
					}],
				"navigationProperty": [{
					"name": "Properties",
					"relationship": "ZMEY_SRV.ProjectProperties",
					"fromRole": "FromRole_ProjectProperties",
					"toRole": "ToRole_ProjectProperties"
				},
					{
						"name": "Tasks",
						"relationship": "ZMEY_SRV.ProjectTask",
						"fromRole": "FromRole_ProjectTask",
						"toRole": "ToRole_ProjectTask"
					}],
				"extensions": [{
					"name": "content-version",
					"value": "1",
					"namespace": "http://www.sap.com/Protocols/SAPData"
				}],
				"sap:content-version": "1",
				"namespace": "ZMEY_SRV",
				"$path": "/dataServices/schema/0/entityType/0"
			};

			var oTestProperty = {
				"property": {
					"name": "Name",
					"type": "Edm.String",
					"nullable": "false",
					"maxLength": "24",
					"extensions": [
						{
							"name": "sortable",
							"value": "false",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
						{
							"name": "label",
							"value": "Document Number",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						},
						{
							"name": "quickinfo",
							"value": "Accounting Document Number",
							"namespace": "http://www.sap.com/Protocols/SAPData"
						}
					]
				},
				"extensions": {
					"sap:label": {
						"name": "label",
						"value": "Document Number",
						"namespace": "http://www.sap.com/Protocols/SAPData"
					},
					"sap:quickinfo": {
						"name": "filterable",
						"value": "Accounting Document Number",
						"namespace": "http://www.sap.com/Protocols/SAPData"
					},
					"sap:sortable": {
						"name": "sortable",
						"value": "false",
						"namespace": "http://www.sap.com/Protocols/SAPData"
					}
				},
				"typePath": "Name"
			};

			QUnit.module("sap.ui.comp.smartfield.SmartField", {
				beforeEach: function() {
					function findIndex(aArray, vExpectedPropertyValue, sPropertyName) {
						var iIndex = -1;

						sPropertyName = sPropertyName || "name";
						jQuery.each(aArray || [], function (i, oObject) {
							if (oObject[sPropertyName] === vExpectedPropertyValue) {
								iIndex = i;
								return false; // break
							}
						});

						return iIndex;
					}

					function getObject1(oModel, sArrayName, sQualifiedName, bAsPath) {
						var vResult = bAsPath ? undefined : null,
							iSeparatorPos,
							sNamespace,
							sName;

						sQualifiedName = sQualifiedName || "";
						iSeparatorPos = sQualifiedName.lastIndexOf(".");
						sNamespace = sQualifiedName.slice(0, iSeparatorPos);
						sName = sQualifiedName.slice(iSeparatorPos + 1);
						jQuery.each(oModel.getObject("/dataServices/schema") || [], function (i, oSchema) {
							if (oSchema.namespace === sNamespace) {
								jQuery.each(oSchema[sArrayName] || [], function (j, oThing) {
									if (oThing.name === sName) {
										vResult = bAsPath ? oThing.$path : oThing;
										return false; // break
									}
								});
								return false; // break
							}
						});

						return vResult;
					}

					this.oSmartField = new sap.ui.comp.smartfield.SmartField();
					this.oSmartField.getModel = function(sName) {
						var oModel;

						if (!sName) {
							oModel = sinon.createStubInstance(sap.ui.model.odata.ODataModel);
							oModel.getServiceMetadata = function() {
								return oTestModel;
							};
							oModel.getMetaModel = function() {
								var oStub = sinon.createStubInstance(sap.ui.model.odata.ODataMetaModel);
								oStub.oModel = new sap.ui.model.json.JSONModel(oTestModel);
								oStub.oData = oTestModel;
								oStub.getObject = function(sPath) {
									var oNode, aParts = sPath.split("/"), iIndex = 0;
									if (!aParts[0]) {
										// absolute path starting with slash
										oNode = this.oData;
										iIndex++;
									}
									while (oNode && aParts[iIndex]) {
										oNode = oNode[aParts[iIndex]];
										iIndex++;
									}
									return oNode;
								};
								oStub.getODataEntityContainer = function(bAsPath) {
									var vResult = bAsPath ? undefined : null;

									jQuery.each(this.oModel.getObject("/dataServices/schema") || [], function (i, oSchema) {
										var j = findIndex(oSchema.entityContainer, "true", "isDefaultEntityContainer");

										if (j >= 0) {
											vResult = bAsPath
												? "/dataServices/schema/" + i + "/entityContainer/" + j
												: oSchema.entityContainer[j];
											return false; //break
										}
									});

									return vResult;
								};
								oStub.getODataEntitySet = function(sName, bAsPath) {
									var k,
									oEntityContainer = this.getODataEntityContainer(),
									vResult = bAsPath ? undefined : null;

									if (oEntityContainer) {
										k = findIndex(oEntityContainer.entitySet, sName);
										if (k >= 0) {
											vResult = bAsPath
												? oEntityContainer.$path + "/entitySet/" + k
												: oEntityContainer.entitySet[k];
										}
									}

									return vResult;
								};
								oStub.getODataEntityType = function (sQualifiedName, bAsPath) {
									return getObject1(this.oModel, "entityType", sQualifiedName, bAsPath);
								};
								oStub.getODataProperty = function (oType, vName, bAsPath) {
									var i,
									aParts = jQuery.isArray(vName) ? vName : [vName],
									oProperty = null,
									sPropertyPath;

									while (oType && aParts.length) {
										i = findIndex(oType.property, aParts[0]);
										if (i < 0) {
											break;
										}

										aParts.shift();
										oProperty = oType.property[i];
										sPropertyPath = oType.$path + "/property/" + i;

										if (aParts.length) {
											// go to complex type in order to allow drill-down
											oType = this.getODataComplexType(oProperty.type);
										}
									}

									return bAsPath ? sPropertyPath : oProperty;
								};
								oStub.getODataComplexType = function (sQualifiedName, bAsPath) {
									return getObject1(this.oModel, "complexType", sQualifiedName, bAsPath);
								};
								oStub.loaded = function() {
									return {
										then: function(fFunc) {
											fFunc();
										}
									}
								};
								return oStub;
							};
							oModel.bindContext = function() {
								return {
									attachChange : function() {

									},
									attachEvents : function() {

									},
									initialize : function() {

									},
									getContext : function() {
										return null;
									}
								};
							};
							oModel.bindProperty = function() {
								return {
									setType : function() {

									},
									setFormatter : function() {

									},
									setBindingMode : function() {

									},
									attachChange : function() {

									},
									attachEvents : function() {

									},
									initialize : function() {

									},
									updateRequired : function() {
										return false;
									},
									detachChange : function() {

									},
									detachEvents : function() {

									},
									setContext : function() {

									}
								};
							};

							oModel.oMetadata = {
								bLoaded : true
							};
						}

						return oModel;
					};
					this.oSmartField.getBindingContext = function() {
						return {
							sPath : "/Project(71)",
							getPath: function() {
								return "/Project(71)";
							}
						};
					};
					this.oSmartField.mBindingInfos["value"] = {
						parts: [{
							model : undefined,
							path : "ID"
						}]
					};
				},
				afterEach: function() {

				}
			});

			QUnit.test("Shall be instantiable", function() {
				assert.ok(this.oSmartField);
				assert.ok(!this.oSmartField.isContextTable());
				//assert.ok(!this.oSmartField._getView());
			});

			QUnit.test("onAfterRendering", function() {
				var sID;
				this.oSmartField._oFactory = {
					getMetaData: function() {
						return {
							property: {
								property: {}
							}
						};
					}
				};
				this.oSmartField._getView = function() {
					return {};
				};
				this.oSmartField.getInnerControls = function() {
					var oID = {
						setFieldGroupIds: function(aIDs) {
							sID = aIDs[0];
						}
					};

					return [ oID ];
				};
				this.oSmartField._oSideEffects.getFieldGroupIDs = function() {
					return [ "dummyID" ];
				};

				this.oSmartField.onAfterRendering();
				assert.equal(sID, "dummyID");
			});

			QUnit.test("updateBindingContext - no params", function() {
				var bBind = false;
				this.oSmartField.bindProperty = function() {
					bBind = true;
				};

				this.oSmartField.updateBindingContext();
				assert.equal(bBind, true);
			});

			QUnit.test("updateBindingContext - bSkipLocal set and model name", function() {
				this.oSmartField.updateBindingContext(true, false, "model");
				assert.ok(this.oSmartField);

			});

			QUnit.test("_init", function() {
				this.oSmartField._init();
				assert.ok(this.oSmartField);
			});

			QUnit.test("updateBindingContext - changed entity set", function() {
				sinon.spy(this.oSmartField, "_createFactory");
				this.oSmartField.updateBindingContext();
				assert.ok(this.oSmartField._createFactory.calledOnce, "Factory created");

				this.oSmartField.getBindingContext = function() {
					return {
						sPath : "/Customer(2)",
						getPath: function() {
							return "/Customer(2)";
						}
					};
				};

				this.oSmartField.updateBindingContext();
				assert.ok(this.oSmartField._createFactory.calledTwice, "Factory recreated");
			});

			QUnit.test("_init with unbound value", function() {
				sinon.stub(this.oSmartField, "_getBindingInfo").returns(null);
				sinon.spy(this.oSmartField, "_createFactory");
				this.oSmartField._init();
				assert.ok(this.oSmartField);
				assert.ok(!this.oSmartField._createFactory.called);

				this.oSmartField.setUrl("some.url");
				this.oSmartField._init();
				assert.ok(this.oSmartField._createFactory.called);
			});

			QUnit.test("_createFactory for JSON model", function() {
				var oModel, oInfo, oFactory;

				oModel = sinon.createStubInstance(sap.ui.model.json.JSONModel);
				oInfo = {
					parts : [ {
						model : "modelname",
						path : "value"
					}],
					model : "modelname"
				};

				oFactory = this.oSmartField._createFactory(null, oModel, oInfo);
				assert.equal(oFactory instanceof sap.ui.comp.smartfield.JSONControlFactory, true);

				oFactory.destroy();
			});

			QUnit.test("_createFactory for OData model - without configuration", function() {
				var oModel, oInfo, oFactory;

				oModel = this.oSmartField.getModel();
				oInfo = this.oSmartField._getBindingInfo(null, "value");

				oFactory = this.oSmartField._createFactory(null, oModel, oInfo);
				assert.equal(oFactory instanceof sap.ui.comp.smartfield.ODataControlFactory, true);

				oFactory.destroy();
			});

			QUnit.test("_createFactory for OData model - with configuration", function() {
				var oModel, oInfo, oFactory;

				oModel = this.oSmartField.getModel();
				oInfo = this.oSmartField._getBindingInfo(null, "value");

				oFactory = this.oSmartField._createFactory(null, oModel, oInfo, {
					configdata: {
						model: undefined,
						path: "Description",
						entitySet: "Project"
					}
				});
				assert.equal(oFactory instanceof sap.ui.comp.smartfield.ODataControlFactory, true);

				oFactory.destroy();
			});

			QUnit.test("_createFactory no params", function() {
				var oModel, oInfo, oFactory;

				this.oSmartField.getBindingContext = function() {
					return null;
				};
				oFactory = this.oSmartField._createFactory(null, oModel, oInfo);
				assert.equal(!oFactory, true);
			});

			QUnit.test("updateBindingContext for JSON model", function() {
				var oModel, oInfo, oFactory;

				oModel = sinon.createStubInstance(sap.ui.model.json.JSONModel);
				oInfo = {
					parts : [ {
						model : null,
						path : "value"
					}],
					model : "modelname"
				};
				oFactory = new sap.ui.comp.smartfield.JSONControlFactory(oModel, this.oSmartField, { model : null, path : "value" });

				this.oSmartField._oFactory = oFactory;
				assert.equal(!this.oSmartField._oControl.current, true);

				this.oSmartField.updateBindingContext();
				assert.equal(this.oSmartField._oControl.current, "edit");

				oFactory.destroy();
			});

			QUnit.test("updateBindingContext - only model name", function() {
				this.oSmartField.updateBindingContext(false, false, "model");
				assert.ok(this.oSmartField);
			});

			QUnit.test("_getBindingInfo - no model name", function() {
				var oInfo = this.oSmartField._getBindingInfo(undefined, "value");
				assert.ok(oInfo);
				assert.equal(!oInfo.model, true);
				assert.equal(oInfo.path, "ID");
			});

			QUnit.test("_getBindingInfo - model name null", function() {
				var oInfo = this.oSmartField._getBindingInfo(null, "value");
				assert.ok(oInfo);
				assert.equal(!oInfo.model, true);
				assert.equal(oInfo.path, "ID");
			});

			QUnit.test("_getBindingInfo - model name something", function() {
				var oInfo = this.oSmartField._getBindingInfo("something", "value");
				assert.equal(!oInfo, true);
			});

			QUnit.test("_getBindingInfo - with valid model name", function() {
				this.oSmartField.getBindingInfo = function(sProperty) {
					if (sProperty === "value") {
						return {
							parts : [ {
								model : "modelname",
								path : "value"
							}],
							model : "modelname"
						};
					}
				};

				var oInfo = this.oSmartField._getBindingInfo("modelname", "value");
				assert.ok(oInfo);
				assert.equal(oInfo.model, "modelname");
			});

			QUnit.test("setEnabled", function() {
				var oReturn = this.oSmartField.setEnabled(true);
				assert.equal(this.oSmartField.getProperty("enabled"), true);
				assert.equal(this.oSmartField, oReturn);
			});

			QUnit.test("setEditable", function() {
				var oReturn = this.oSmartField.setEditable(true);
				assert.equal(this.oSmartField.getProperty("editable"), true);
				assert.equal(this.oSmartField, oReturn);
			});

			QUnit.test("setContextEditable", function() {
				var oReturn = this.oSmartField.setContextEditable(true);
				assert.equal(this.oSmartField.getProperty("contextEditable"), true);
				assert.equal(this.oSmartField, oReturn);
			});

			QUnit.test("setVisible", function() {
				var oReturn;

				fnPatchGetContentAggregation(this.oSmartField, function() {
					return {
						setProperty : function(sName, oValue) {
							assert.equal(sName, "visible");
							assert.equal(oValue, true);
						}
					};
				});

				oReturn = this.oSmartField.setVisible(true);
				assert.equal(this.oSmartField.getProperty("visible"), true);
				assert.equal(this.oSmartField, oReturn);
			});

			QUnit.test("setValue", function() {
				var oReturn = this.oSmartField.setValue(true);
				assert.equal(this.oSmartField.getProperty("value"), true);
				assert.equal(this.oSmartField, oReturn);
			});

			QUnit.test("getValue with callback set", function() {
				this.oSmartField._oValue["edit"] = function() {
					return "theValue";
				};
				this.oSmartField.setValue(true);
				assert.equal(this.oSmartField.getValue(), "theValue");

			});

			QUnit.test("getValue without callback set", function() {
				this.oSmartField.setValue(true);
				assert.equal(this.oSmartField.getValue(), true);

			});

			QUnit.test("setEntitySet", function() {
				var oReturn, fFound = function(oParam) {
					assert.equal(oParam.mParameters.entitySet, "Project");
				};
				this.oSmartField.attachEntitySetFound(fFound);
				oReturn = this.oSmartField.setEntitySet("Project");
				assert.equal(this.oSmartField.getProperty("entitySet"), "Project");
				assert.equal(this.oSmartField, oReturn);
			});

			QUnit.test("_getMode shall return display_uom", function() {
				var sMode;

				this.oSmartField.data = function() {
					return null;
				};
				this.oSmartField.getUomEditState = function() {
					return 0;
				};
				this.oSmartField.getControlContext = function() {
					return "responsiveTable";
				};

				sMode = this.oSmartField._getMode();
				assert.equal(sMode, "display_uom");
			});

			QUnit.test("_toggleControl - smart field not initialized", function() {
				this.oSmartField._toggleControl();
				assert.equal(!this.oSmartField._oControl["edit"], true);
			});

			QUnit.test("_toggleControl with creation and setting of edit control", function() {
				var iContent = 0, oControl, sUOM = "the unit of measure", fCheck1, fCheck2;

				fCheck1 = function() {};
				fCheck2 = function() {};
				oControl = {
					control : {	},
					params : {
						getValue: function() {
							return "theValue";
						},
						uom: function() {
							return sUOM;
						},
						uomset: function(sValue) {
							sUOM = sValue;
						},
						checks: [ fCheck1, fCheck2 ]
					}
				};

				this.oSmartField._oFactory = {
					createControl : function() {
						return oControl;
					}
				};
				fnPatchSetContentAggregation(this.oSmartField, function() {
					iContent++;
				});

				this.oSmartField._toggleControl();
				assert.equal(this.oSmartField._oControl["edit"], oControl.control);
				assert.equal(this.oSmartField._oControl.current, "edit");
				assert.equal(this.oSmartField._oValue["edit"](), "theValue");
				assert.equal(this.oSmartField._oValue.uom(), "the unit of measure");

				// now set the uom.
				this.oSmartField._oValue.uomset("the new unit of measure");
				assert.equal(this.oSmartField._oValue.uom(), "the new unit of measure");
			});

			QUnit.test("_getEntitySet", function() {
				var sSet;

				this.oSmartField.getBindingContext = function() {
					return {
						sPath : "/Project(id1='71' id2='abcd')"
					};
				};
				sSet = this.oSmartField._getEntitySet();
				assert.equal(sSet, "Project");
			});

			QUnit.test("_getEntitySet with entityset", function() {
				var sSet;

				this.oSmartField.getBindingContext = function() {
					return {
						sPath : "/Project(id1='71' id2='abcd')"
					};
				};
				this.oSmartField.setEntitySet("dummy");
				sSet = this.oSmartField._getEntitySet();
				assert.equal(sSet, "dummy");
			});

			QUnit.test("_getEntitySet with nothing specified", function() {
				var sSet;

				this.oSmartField.getBindingContext = function() {
					return {
						sPath : ""
					};
				};

				sSet = this.oSmartField._getEntitySet();
				assert.equal(sSet, "");
			});

			QUnit.test("_getEntitySet with nothing specified", function() {
				var sSet;

				this.oSmartField.getBindingContext = function() {
					return null;
				};

				sSet = this.oSmartField._getEntitySet();
				assert.equal(sSet, "");
			});

			QUnit.test("getDataType for JSON model", function() {
				this.oSmartField._oFactory = null;
				assert.equal(this.oSmartField.getDataType(), null);
			});

			QUnit.test("getDataType for JSON model", function() {
				this.oSmartField._oFactory = {
					getDataProperty: function() {
						return {
							property : {
								type: "Edm.String"
							}
						};
					}
				};
				assert.equal(this.oSmartField.getDataType(), "Edm.String");
			});

			QUnit.test("getDataType from Property", function() {
				this.oSmartField._oFactory = {};
				this.oSmartField.getJsonType = function() {
					return "JSON.String";
				};
				assert.equal(this.oSmartField.getDataType(), "JSON.String");
			});

			QUnit.test("getDataType no model set", function() {
				this.oSmartField._oFactory = null;
				assert.equal(this.oSmartField.getDataType(), null);
			});

			QUnit.test("getDataProperty getDataProperty not implemented on factory", function() {
				this.oSmartField._oFactory = {
					getDataProperty: function() {
						return {
							"id": "id"
						};
					}
				};
				assert.equal(this.oSmartField.getDataProperty().id, "id");
			});

			QUnit.test("getDataProperty getDataProperty not implemented on factory", function() {
				this.oSmartField._oFactory = {};
				assert.equal(this.oSmartField.getDataProperty(), null);
			});

			QUnit.test("getDataProperty nothing set", function() {
				this.oSmartField._oFactory = null;
				assert.equal(this.oSmartField.getDataProperty(), null);
			});

			QUnit.test("getUnitOfMeasure with unit of measure set.", function() {
				this.oSmartField._oValue.uom = function() {
					return "the unit of measure";
				};
				assert.equal(this.oSmartField.getUnitOfMeasure(), "the unit of measure");
			});

			QUnit.test("getUnitOfMeasure no unit of measure set.", function() {
				this.oSmartField._oValue.uom = null;
				assert.equal(this.oSmartField.getUnitOfMeasure(), null);
			});

			QUnit.test("setUnitOfMeasure", function() {
				var sValue;

				this.oSmartField._oValue.uomset = function(oValue) {
					sValue = oValue
				};
				this.oSmartField.setUnitOfMeasure("newValue");
				assert.equal(sValue, "newValue");
			});

			QUnit.test("setUnitOfMeasure - invalid input", function() {
				var sValue = null;

				this.oSmartField._oValue.uomset = function(oValue) {
					sValue = oValue
				};
				this.oSmartField.setUnitOfMeasure();
				assert.equal(sValue, null);
			});

			QUnit.test("setWidth", function() {
				var sValue;

				this.oSmartField.getAggregation = function(sWidth) {
					return {
						setWidth: function(sWidth) {
							sValue = sWidth;
						}
					};
				};
				this.oSmartField.setWidth("100px");
				assert.equal(sValue, "100px");
			});

			QUnit.test("setSimpleClientError", function() {
				this.oSmartField.setSimpleClientError(true);
				assert.equal(this.oSmartField._oError.bComplex, false);
				assert.equal(this.oSmartField._oError.bFirst, true);
				assert.equal(this.oSmartField._oError.bSecond, false);
			});

			QUnit.test("setComplexClientErrorFirstOperand", function() {
				this.oSmartField.setComplexClientErrorFirstOperand(true);
				assert.equal(this.oSmartField._oError.bComplex, true);
				assert.equal(this.oSmartField._oError.bFirst, true);
				assert.equal(this.oSmartField._oError.bSecond, false);
			});

			QUnit.test("setComplexClientErrorSecondOperand", function() {
				this.oSmartField.setComplexClientErrorSecondOperand(true);
				assert.equal(this.oSmartField._oError.bComplex, true);
				assert.equal(this.oSmartField._oError.bFirst, false);
				assert.equal(this.oSmartField._oError.bSecond, true);
			});

			QUnit.test("setComplexClientErrorSecondOperand", function() {
				var oParent = {
					_oError: {
						bComplex: false,
						bFirst: false,
						bSecond: true
					},
					setComplexClientErrorSecondOperand: function(bError) {
						this._oError.bComplex = true;
						this._oError.bSecond = bError;
					}
				};
				this.oSmartField.getParent = function() {
					return {
						getParent: function() {
							return oParent;
						}
					};
				};
				this.oSmartField.setComplexClientErrorSecondOperandNested(true);
				assert.equal(oParent._oError.bComplex, true);
				assert.equal(oParent._oError.bFirst, false);
				assert.equal(oParent._oError.bSecond, true);
			});

			QUnit.test("_hasClientError", function() {
				this.oSmartField._oError.bComplex = true;
				this.oSmartField._oError.bSecond = true;
				assert.equal(this.oSmartField._hasClientError(), true);

				this.oSmartField._oError.bComplex = false;
				assert.equal(this.oSmartField._hasClientError(), false);
			});

			QUnit.test("getFocusDomRef for empty Smartfield", function() {
				var oRef = this.oSmartField.getFocusDomRef();
				assert.ok(!oRef);
			});

			QUnit.test("getFocusDomRef hosting another control", function() {
				var oRef, aControls, oControl = {
					getMetadata: function() {
						return {
							_sClassName: "test"
						};
					},
					getFocusDomRef: function() {
						return "dummy-focus";
					}
				};

				fnPatchGetContentAggregation(this.oSmartField, function() {
					return oControl;
				});
				oRef = this.oSmartField.getFocusDomRef();

				assert.equal(oRef, "dummy-focus");
			});

			QUnit.test("getInnerControls", function() {
				var aControls, oControl = {
					getMetadata: function() {
						return {
							_sClassName: "test"
						};
					}
				};

				fnPatchGetContentAggregation(this.oSmartField, function() {
					return oControl;
				});

				// test simple control.
				aControls = this.oSmartField.getInnerControls();
				assert.equal(aControls[0], oControl);

				//test complex control.
				fnPatchGetContentAggregation(this.oSmartField, function() {
					return {
						getMetadata: function() {
							return {
								_sClassName: "sap.m.HBox"
							};
						},
						getItems: function() {
							return [];
						}
					};
				});

				aControls = this.oSmartField.getInnerControls();
				assert.equal(aControls.length, 0);

				fnPatchGetContentAggregation(this.oSmartField, function() {
					return {
						getMetadata: function() {
							return {
								_sClassName: "sap.m.HBox"
							};
						},
						getItems: function() {
							return [ {} ];
						}
					};
				});

				aControls = this.oSmartField.getInnerControls();
				assert.equal(aControls.length, 1);

				fnPatchGetContentAggregation(this.oSmartField, function() {
					return {
						getMetadata: function() {
							return {
								_sClassName: "sap.m.HBox"
							};
						},
						getItems: function() {
							return [ {}, {
								getAggregation: function() {
									return 1;
								}
							} ];
						}
					};
				});

				aControls = this.oSmartField.getInnerControls();
				assert.equal(aControls.length, 2);
				assert.equal(aControls[1], 1);

				fnPatchGetContentAggregation(this.oSmartField, function() {
					return {
						getMetadata: function() {
							return {
								_sClassName: "sap.m.HBox"
							};
						},
						getItems: function() {
							return [ {}, {
								getAggregation: function() {
									return null;
								}
							} ];
						}
					};
				});

				aControls = this.oSmartField.getInnerControls();
				assert.equal(aControls.length, 1);
			});

				QUnit.test("_getInnerControls for SmartLink", function() {
					var aControls, oControl = {
						getMetadata: function() {
							return {
								_sClassName: "sap.ui.comp.navpopover.SmartLink"
							};
						},
						getAggregation: function() {
							return "test";
						}
					};

					fnPatchGetContentAggregation(this.oSmartField, function() {
						return oControl;
					});

					// test existing nested control.
					aControls = this.oSmartField.getInnerControls();
					assert.equal(aControls[0], "test");

					oControl.getAggregation = function() {
						return null;
					};
					aControls = this.oSmartField.getInnerControls();
					assert.equal(aControls.length, 1);
					assert.equal(aControls[0], oControl);
				});

				QUnit.test("_checkClientError", function() {
					var bParse = false, bValidate = false, oControl = {
						getMetadata: function() {
							return {
								_sClassName: "test"
							};
						}
					};

					//check unknown control
					this.oSmartField._checkClientError(oControl);
					assert.equal(bParse, false);

					//check sap.m.Input: no exception
					oControl = {
						getMetadata: function() {
							return {
								_sClassName: "sap.m.Input"
							};
						},
						getValue: function() {

						},
						getBinding: function() {
							return {
								setExternalValue: function() {

								}
							};
						}
					};
					this.oSmartField._checkClientError(oControl);
					assert.equal(bParse, false);
					assert.equal(bValidate, false);

					//check sap.m.Input: ParseException
					oControl = {
						getMetadata: function() {
							return {
								_sClassName: "sap.m.Input"
							};
						},
						getValue: function() {

						},
						getBinding: function() {
							return {
								sInternalType: "string",
								getType: function() {
									return {
										parseValue: function(){
											throw new sap.ui.model.ParseException();
										},
										validateValue: function() {
											throw new sap.ui.model.ValidateException();
										}
									};
								}
							};
						},
						fireParseError: function() {
							bParse = true;
						}
					};
					this.oSmartField._checkClientError(oControl);
					assert.equal(bParse, true);
					assert.equal(bValidate, false);

					//check sap.m.Input: ValidationException
					bParse = false;
					oControl = {
						getMetadata: function() {
							return {
								_sClassName: "sap.m.Input"
							};
						},
						getValue: function() {

						},
						getBinding: function() {
							return {
								sInternalType: "string",
								getType: function() {
									return {
										parseValue: function(){
										},
										validateValue: function() {
											throw new sap.ui.model.ValidateException();
										}
									};
								}
							};
						},
						fireValidationError: function() {
							bValidate = true;
						}
					};
					this.oSmartField._checkClientError(oControl);
					assert.equal(bValidate, true);
					assert.equal(bParse, false);
				});

				QUnit.test("checkClientError", function() {
					var bError, oControl, that = this;

					oControl = {
						getMetadata: function() {
							return {
								_sClassName: "sap.m.Input"
							};
						},
						getBinding: function() {
							return {
								sInternalType: "string",
								getType: function() {
									return {
										parseValue: function(){
										},
										validateValue: function() {
											that.oSmartField._oError.bFirst = true;
											throw new sap.ui.model.ValidateException();
										}
									};
								}
							};
						},
						getValue: function() {
							return null;
						},
						fireValidationError: function() {

						}
					};

					fnPatchGetContentAggregation(this.oSmartField, function() {
						return {
							getMetadata: function() {
								return {
									_sClassName: "sap.m.HBox"
								};
							},
							getItems: function() {
								return [
									oControl
								];
							}
						};
					});

					// no errors in display mode
					this.oSmartField.setEditable(false);
					bError = this.oSmartField.checkClientError();
					assert.equal(bError, false);

					// we already have found an error.
					this.oSmartField.setEditable(true);
					this.oSmartField._oError.bFirst = true;
					bError = this.oSmartField.checkClientError();
					assert.equal(bError, true);

					// simulate finding an error.
					this.oSmartField._oError.bFirst = false;
					bError = this.oSmartField.checkClientError();
					assert.equal(bError, true);
				});

				QUnit.test("attachVisibleChanged", function() {
					var bVisible = true, fChange = function(oParam) {
						bVisible = oParam.getParameter("visible");
					};

					this.oSmartField.attachVisibleChanged(fChange);
					this.oSmartField.setVisible(false);
					assert.equal(bVisible, false);
				});

				QUnit.test("_getMaxSeverity", function() {
					var oChild1, oChild2, iMax;

					oChild1 = {
						getValueState: function() {
							return "Success";
						}
					};
					oChild2 = {
						getValueState: function() {
							return "Error";
						}
					};

					iMax = this.oSmartField._getMaxSeverity([ oChild1, {}, oChild2, {} ]);
					assert.equal(iMax, 2);
				});

				QUnit.test("getValueStateText", function() {
					var oChild1, oChild2, iMax;

					oChild1 = {
						getValueState: function() {
							return "Success";
						},
						getValueStateText: function() {
							return "SuccessText";
						}
					};
					oChild2 = {
						getValueState: function() {
							return "Error";
						},
						getValueStateText: function() {
							return "ErrorText";
						}
					};
					this.oSmartField.getInnerControls = function() {
						return [ oChild1, oChild2 ];
					};

					assert.equal(this.oSmartField.getValueStateText(), "ErrorText");

					this.oSmartField.setValueStateText("test");
					this.oSmartField.getInnerControls = function() {
						return [];
					};
					assert.equal(this.oSmartField.getValueStateText(), "");
				});

				QUnit.test("getValueState", function() {
					var oChild1, oChild2, iMax;

					oChild1 = {
						getValueState: function() {
							return "Success";
						}
					};
					oChild2 = {
						getValueState: function() {
							return "Error";
						}
					};
					this.oSmartField.getInnerControls = function() {
						return [ oChild1, oChild2 ];
					};
					assert.equal(this.oSmartField.getValueState(), "Error");

					this.oSmartField.getInnerControls = function() {
						return [];
					};
					assert.equal(this.oSmartField.getValueState(), "None");
				});

				QUnit.test("setValueState", function() {
					var oChild1, oChild2, iMax, oState;

					oChild1 = {
						getValueState: function() {
							return "Success";
						},
						setValueState: function(sState) {
							oState = sState;
						}
					};
					oChild2 = {
						getValueState: function() {
							return "Error";
						}
					};
					this.oSmartField.getInnerControls = function() {
						return [ oChild1, oChild2 ];
					};

					this.oSmartField.setValueState("Error");
					assert.equal(oState, "Error");
					assert.equal(this.oSmartField.checkClientError(), true);
				});

				QUnit.test("setValueStateText", function() {
					var oChild1, oChild2, iMax, oState;

					oChild1 = {
						getValueState: function() {
							return "Success";
						},
						setValueStateText: function(sState) {
							oState = sState;
						},
						getMetadata: function() {
							return {
								"_sClassName": ""
							};
						}
					};
					oChild2 = {
						getValueState: function() {
							return "Error";
						},
						getMetadata: function() {
							return {
								"_sClassName": ""
							};
						}
					};
					this.oSmartField.getInnerControls = function() {
						return [ oChild1, oChild2 ];
					};

					this.oSmartField.setValueStateText("Error");
					assert.equal(oState, "Error");
					assert.equal(this.oSmartField.checkClientError(), false);
				});

				QUnit.test("exit method", function() {
					var bDestroy = false;
					var bInnerInactiveControlDestroyed = false;
					var bInnerActiveControlDestroyed = false;
					this.oSmartField._oFactory = {
						destroy: function() {
							bDestroy = true;
						}
					};

					this.oSmartField.exit();
					assert.ok(this.oSmartField);
					assert.equal(bDestroy, true);
				});

				QUnit.test("exit method destroys inner edit control in display mode", function() {
					var bEditControlDestroyed = false;
					var bDisplayControlDestroyed = false;

					this.oSmartField._oControl.edit = {
						destroy: function() {
							bEditControlDestroyed = true;
						}
					};
					this.oSmartField._oControl.display = {
						destroy: function() {
							bDisplayControlDestroyed = true;
						}
					};

					this.oSmartField.setEditable(false);
					this.oSmartField.exit();

					assert.ok(bEditControlDestroyed, "in display mode, inner edit control has to be destroyed explicitly");
					assert.ok(!bDisplayControlDestroyed, "in display mode, inner display control should only be destroyed via content aggregation");
				});

				QUnit.test("exit method destroys inner display control in edit mode", function() {
					var bEditControlDestroyed = false;
					var bDisplayControlDestroyed = false;

					this.oSmartField._oControl.edit = {
						destroy: function() {
							bEditControlDestroyed = true;
						},
						getParent: function() {
							return {};
						}
					};

					this.oSmartField._oControl.display = {
						destroy: function() {
							bDisplayControlDestroyed = true;
						}
					};

					this.oSmartField._oControl.current = "edit";
					this.oSmartField.destroy();

					assert.ok(!bEditControlDestroyed, "in edit mode, inner edit control should only be destroyed via content aggregation");
					assert.ok(bDisplayControlDestroyed, "in edit mode, inner display control has to be destroyed explicitly");
				});

				QUnit.test("Can be destroyed", function() {
					var bDestroy = false;
					this.oSmartField._oFactory = {
						destroy: function() {
							bDestroy = true;
						}
					};

					this.oSmartField.destroy();
					assert.ok(this.oSmartField);
					assert.equal(bDestroy, true);
				});

				QUnit.test("create control", function() {

					this.oSmartField._oFactory = { bPending: false};

					sinon.stub(this.oSmartField, "_createControl");
					this.oSmartField.setEditable(true);
					assert.ok(this.oSmartField._createControl.calledOnce, "SmartField is editable, create control should have been called");
					this.oSmartField._createControl.reset();

					this.oSmartField.data("configdata", { configdata: true});
					this.oSmartField.setEditable(false);
					assert.ok(!this.oSmartField._createControl.calledOnce, "SmartField is not editable, create control should not have been called");
					assert.equal(this.oSmartField._oControl.current, "display");

					//this.oSmartField.setValue(false);
					//assert.ok(this.oSmartField._createControl.calledOnce, "display-only SmartField should create control after setting any non-empty value");
				});

				QUnit.test("refreshDataState shall set _checkCreated to true", function() {
					var oState = {
						isLaundering: function() {
							return true;
						}
					};

					this.oSmartField.getBindingContext = function() {
						return {
							getObject: function() {
								return {
									__metadata: {
										created: true
									}
								};
							}
						}
					};

					this.oSmartField.refreshDataState("value", oState);
					assert.ok(this.oSmartField._checkCreated);
				});

				QUnit.test("refreshDataState shall remove _checkCreated", function() {
					var oState = {
						isLaundering: function() {
							return false;
						},
						isDirty: function() {
							return false;
						}
					};

					this.oSmartField.getBindingContext = function() {
						return {
							getObject: function() {
								return {
									__metadata: {
										created: true
									}
								};
							}
						}
					};
					this.oSmartField._checkCreated = true;
					this.oSmartField._oFactory = {
						rebindOnCreated : function() {

						}
					};
					this.oSmartField.refreshDataState("value", oState);
					assert.ok(!this.oSmartField._checkCreated);
				});

				QUnit.test("toggle between edit/display, with value and without value", function() {
					var oEditControl = new sap.ui.core.Control();
					var oDisplayControl = new sap.ui.core.Control();
					var oInnerControl = oDisplayControl;
					this.oSmartField._oFactory = {
						createControl: function() {
							return {
								control: oInnerControl
							};
						}
					};
					this.oSmartField.data("configdata", { configdata: true});

					this.oSmartField.setEditable(false);
					this.oSmartField.setValue("");

					assert.ok(!this.oSmartField.getAggregation("_content"), "empty value, not editable => smartField's content has to be empty");
					assert.equal(this.oSmartField._oControl.current, "display");

					oInnerControl = oEditControl;
					this.oSmartField.setEditable(true);
					this.oSmartField.setValue("dummy");
					assert.ok(this.oSmartField.getAggregation("_content") === oEditControl, "contains value, editable => smartField's content has to contain editControl");
					assert.equal(this.oSmartField._oControl.current, "edit");

					oInnerControl = oDisplayControl;
					this.oSmartField.setEditable(false);
					assert.ok(this.oSmartField.getAggregation("_content") === oDisplayControl, "contains value, not editable => smartField's content has to contain display control");
					assert.equal(this.oSmartField._oControl.current, "display");

					this.oSmartField.setValue("");
					assert.ok(!this.oSmartField.getAggregation("_content"), "empty value, not editable => smartField's content has to be empty");

					oInnerControl = oEditControl;
					this.oSmartField.setEditable(true);

					assert.ok(this.oSmartField.getAggregation("_content") === oEditControl, "empty value, editable => smartField's content has to contain edit control");
					assert.equal(this.oSmartField._oControl.current, "edit");
				});

				// BCP: 1770145312
				QUnit.test("it should destroy the inner control", function(assert) {

					// arrange
					this.oSmartField._oControl.display = new sap.ui.core.Control();
					this.oSmartField._oControl.display_uom = new sap.ui.core.Control();
					this.oSmartField._oControl.edit = new sap.ui.core.Control();
					var oDestroySpy = sinon.spy(sap.ui.core.Control.prototype, "destroy");

					// act
					this.oSmartField._destroyFactory();

					// assert
					assert.strictEqual(oDestroySpy.callCount, 3);
					assert.strictEqual(this.oSmartField._oControl.display, null);
					assert.strictEqual(this.oSmartField._oControl.display_uom, null);
					assert.strictEqual(this.oSmartField._oControl.edit, null);

					// cleanup
					oDestroySpy.restore();
				});

				QUnit.test("getSupportedAnnotationPaths shall return complete paths", function() {
					var oModel, aResult;

					oModel = sinon.createStubInstance(sap.ui.model.odata.ODataMetaModel);
					oModel.getODataEntityType = function() {
						return oTestEntityType;
					};
					oModel.getODataProperty = function() {
						return oTestProperty;
					};

					aResult = sap.ui.comp.smartfield.SmartField.getSupportedAnnotationPaths(oModel, oTestEntitySet, "Description");
					assert.equal(aResult[0], "Properties/EntityUpdatable");
				});

				QUnit.test("getSupportedAnnotationPaths shall return only navigation properties", function() {
					var oModel, aResult, oPropertiesSet, oPropertiesType;
					oPropertiesSet = {"name":"ProjectFC","entityType":"ZMEY_SRV.ProjectFC_Type","extensions":[{"name":"creatable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"updatable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"deletable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"pageable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"addressable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"content-version","value":"1","namespace":"http://www.sap.com/Protocols/SAPData"}],"sap:creatable":"false","Org.OData.Capabilities.V1.InsertRestrictions":{"Insertable":{"Bool":"false"}},"sap:updatable":"false","Org.OData.Capabilities.V1.UpdateRestrictions":{"Updatable":{"Bool":"false"}},"sap:deletable":"false","Org.OData.Capabilities.V1.DeleteRestrictions":{"Deletable":{"Bool":"false"}},"sap:pageable":"false","Org.OData.Capabilities.V1.SkipSupported":{"Bool":"false"},"Org.OData.Capabilities.V1.TopSupported":{"Bool":"false"},"sap:addressable":"false","sap:content-version":"1","Org.OData.Capabilities.V1.SearchRestrictions":{"Searchable":{"Bool":"false"}},"Org.OData.Capabilities.V1.FilterRestrictions":{"NonFilterableProperties":[{"PropertyPath":"ID"},{"PropertyPath":"Description_FC"},{"PropertyPath":"Name_FC"},{"PropertyPath":"StartDate_FC"},{"PropertyPath":"EntityUpdatable"}]},"Org.OData.Capabilities.V1.SortRestrictions":{"NonSortableProperties":[{"PropertyPath":"ID"},{"PropertyPath":"Description_FC"},{"PropertyPath":"Name_FC"},{"PropertyPath":"StartDate_FC"},{"PropertyPath":"EntityUpdatable"}]}};
					oPropertiesType = {"name":"ProjectFC_Type","key":{"propertyRef":[{"name":"ID"}]},"property":[{"name":"ID","type":"Edm.Int32","nullable":"false","extensions":[{"name":"creatable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"updatable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"sortable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"filterable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"}],"sap:creatable":"false","sap:updatable":"false","sap:sortable":"false","sap:filterable":"false","Org.OData.Core.V1.Computed":{"Bool":"true"}},{"name":"Description_FC","type":"Edm.Byte","nullable":"false","extensions":[{"name":"creatable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"updatable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"sortable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"filterable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"}],"sap:creatable":"false","sap:updatable":"false","sap:sortable":"false","sap:filterable":"false","Org.OData.Core.V1.Computed":{"Bool":"true"}},{"name":"Name_FC","type":"Edm.Byte","nullable":"false","extensions":[{"name":"creatable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"updatable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"sortable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"filterable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"}],"sap:creatable":"false","sap:updatable":"false","sap:sortable":"false","sap:filterable":"false","Org.OData.Core.V1.Computed":{"Bool":"true"}},{"name":"StartDate_FC","type":"Edm.Byte","nullable":"false","extensions":[{"name":"creatable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"updatable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"sortable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"filterable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"}],"sap:creatable":"false","sap:updatable":"false","sap:sortable":"false","sap:filterable":"false","Org.OData.Core.V1.Computed":{"Bool":"true"}},{"name":"EntityUpdatable","type":"Edm.Boolean","nullable":"false","extensions":[{"name":"creatable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"updatable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"sortable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"},{"name":"filterable","value":"false","namespace":"http://www.sap.com/Protocols/SAPData"}],"sap:creatable":"false","sap:updatable":"false","sap:sortable":"false","sap:filterable":"false","Org.OData.Core.V1.Computed":{"Bool":"true"}}],"extensions":[{"name":"content-version","value":"1","namespace":"http://www.sap.com/Protocols/SAPData"}],"sap:content-version":"1","namespace":"ZMEY_SRV","$path":"/dataServices/schema/0/entityType/2"};

					oModel = sinon.createStubInstance(sap.ui.model.odata.ODataMetaModel);
					oModel.getODataEntityType = function(sType) {
						if (sType === "ZMEY_SRV.Project_Type") {
							return oTestEntityType;
						}

						return oPropertiesType;
					};
					oModel.getODataEntitySet = function() {
						return oPropertiesSet;
					};
					oModel.getODataProperty = function() {
						return oTestProperty;
					};
					oModel.getODataAssociationSetEnd = function() {
						return {"entitySet":"ProjectFC","role":"ToRole_ProjectProperties"};
					};
					aResult = sap.ui.comp.smartfield.SmartField.getSupportedAnnotationPaths(oModel, oTestEntitySet, "Description", true);

					assert.equal(aResult[0], "Properties");
				});

				QUnit.test("addAssociation shall propagate aria label to inner controls", function() {
					var sLabel;

					this.oSmartField.getInnerControls = function() {
						var oInnerControl = {
							addAriaLabelledBy: function(sId){
								sLabel = sId;
							}
						};
						return [oInnerControl];
					};

					this.oSmartField.addAssociation("ariaLabelledBy", "textXYZ");
					assert.equal(sLabel, "textXYZ");
				});
			}());
		</script>
	</head>
	<body id="body" class="sapUiBody">
		<h1 id="qunit-header">qUnit Page for qUnit Page for sap.ui.comp.smartfield.SmartField</h1>
		<h2 id="qunit-banner"></h2>
		<h2 id="qunit-userAgent"></h2>
		<ol id="qunit-tests"></ol>
	</body>
</html>
