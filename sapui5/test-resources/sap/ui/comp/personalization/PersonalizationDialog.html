<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="UTF-8">
<title>PersonalizationDialog</title>
<script id="sap-ui-bootstrap" type="text/javascript"
	data-sap-ui-libs="sap.ui.comp,sap.m,sap.ui.commons,sap.ui.table"
	data-sap-ui-theme="sap_bluecrystal" data-sap-ui-preload="sync"
	data-sap-ui-compatVersion="edge"
	src="../../../../../resources/sap-ui-core.js"
	data-sap-ui-resourceroots='{
				"test.sap.ui.comp.personalization": "./"
			}'>
	
</script>
<script>
	jQuery.sap.require("test.sap.ui.comp.personalization.PersonalizationDialog");
	jQuery.sap.require("test.sap.ui.comp.personalization.Util");
	jQuery.sap.require("jquery.sap.xml");
	jQuery.sap.require("sap.ui.comp.personalization.Controller");
	jQuery.sap.require("sap.m.P13nFilterItem");
	jQuery.sap.require("sap.m.P13nConditionPanel");
	jQuery.sap.require("sap.m.MessageToast");

	var fGetChangeText = function(oChangeType) {
		return "" + (oChangeType.columns === sap.ui.comp.personalization.ChangeType.TableChanged ? "table's columns has been changed" : oChangeType.columns === sap.ui.comp.personalization.ChangeType.ModelChanged ? "model's columns has been changed" : "") + (oChangeType.sort === sap.ui.comp.personalization.ChangeType.TableChanged ? "table's sort has been changed" : oChangeType.sort === sap.ui.comp.personalization.ChangeType.ModelChanged ? "model's sort has been changed" : "") + (oChangeType.filter === sap.ui.comp.personalization.ChangeType.TableChanged ? "table's filter has been changed" : oChangeType.filter === sap.ui.comp.personalization.ChangeType.ModelChanged ? "model's filter has been changed" : "") + (oChangeType.misc === sap.ui.comp.personalization.ChangeType.TableChanged ? "width of table's column has been changed" : oChangeType.misc === sap.ui.comp.personalization.ChangeType.ModelChanged ? "width of model's column has been changed" : "")
	};

	var bPerformanceOptimization;
	var oPersData = {};
	var fHandleRequestColumns = function(oEvent) {
		var aColumnKeys = oEvent.getParameter("columnKeys");
		var oTable = oEvent.oSource.getTable();

		var oColumnKey2ColumnMap = {};
		if (oTable instanceof sap.ui.table.AnalyticalTable) {
			oColumnKey2ColumnMap = sap.ui.comp.personalization.PersonalizationDialog.createAnalyticalColumns(oTable, oANAData, aColumnKeys);
			oANAController.addColumns(oColumnKey2ColumnMap);
		} else if (oTable instanceof sap.ui.table.Table) {
			oColumnKey2ColumnMap = sap.ui.comp.personalization.PersonalizationDialog.createUIColumns(oTable, oJSONData, aColumnKeys);
			oUIController.addColumns(oColumnKey2ColumnMap);
		} else if (oTable instanceof sap.m.Table) {
			oColumnKey2ColumnMap = sap.ui.comp.personalization.PersonalizationDialog.createMColumns(oTable, oJSONData, aColumnKeys);
			oMController.addColumns(oColumnKey2ColumnMap);
		}
	};
	var fHandleAfterP13nModelDataChange = function(oEvent) {
		oPersData = oEvent.getParameter("persistentData");
		var oChangeData = oEvent.getParameter("changeData");
		var oChangeTypeVariant = oEvent.getParameter("changeTypeVariant");
		var oChangeType = oEvent.getParameter("changeType");
		var oTable = oEvent.oSource.getTable();
		var oLabel;
		var aColumns;
		var oBinding;

		if (oTable instanceof sap.ui.comp.personalization.ChartWrapper) {
			var oChart = oTable.getChartObject();
			oBinding = oChart.getBinding("data");
			aColumns = oTable.getColumns();
			oLabel = sap.ui.comp.personalization.PersonalizationDialog.getLabelOfDirtyFlag(oChart, oChartToolbar);
		} else if (oTable instanceof sap.m.Table) {
			oBinding = oTable.getBinding("items");
			aColumns = oTable.getColumns();
			oLabel = sap.ui.comp.personalization.PersonalizationDialog.getLabelOfDirtyFlag(oTable, null);
		} else {
			oBinding = oTable.getBinding("rows");
			aColumns = oTable.getColumns();
			oLabel = sap.ui.comp.personalization.PersonalizationDialog.getLabelOfDirtyFlag(oTable, null);
		}

		test.sap.ui.comp.personalization.Util.setDirtyFlag(oLabel, sap.ui.comp.personalization.Util.hasChangedType(oChangeTypeVariant));

		var sMessageText = this.fGetChangeText(oChangeType);
		if (sMessageText !== "") {
			sap.m.MessageToast.show(sMessageText, {
				duration: 10000
			});
		}

		test.sap.ui.comp.personalization.Util.updateSortererFromP13nModelDataChange(oTable, oPersData, oJSONData.cols);
		test.sap.ui.comp.personalization.Util.updateFiltererFromP13nModelDataChange(oTable, oPersData);
	};
	var fInitVariantManagement = function(oControl, oTable, oToolbar, oController) {
		var that = this;
		var oSmartVariant = sap.ui.getCore().byId(sap.ui.comp.personalization.PersonalizationDialog.getVariantManagementIdOfTable(oTable));
		if (!oSmartVariant) {
			return;
		}
		oControl.fetchVariant = function() {
			return jQuery.extend(true, {}, oPersData);
		};
		oControl.applyVariant = function(oVariantJSON) {
			if (jQuery.isEmptyObject(oVariantJSON)) {
				oController.setPersonalizationData(null);
			} else {
				oController.setPersonalizationData(jQuery.extend(true, {}, oVariantJSON));
			}
			var oLabel = sap.ui.comp.personalization.PersonalizationDialog.getLabelOfDirtyFlag(oTable, oToolbar);
			test.sap.ui.comp.personalization.Util.setDirtyFlag(oLabel, false);
		};
		var oPersInfo = new sap.ui.comp.smartvariants.PersonalizableInfo({
			type: "table",
			keyName: "id",
			dataSource: "TODO",
			control: oControl
		});

		oSmartVariant.attachSave(function() {
			var oLabel = sap.ui.comp.personalization.PersonalizationDialog.getLabelOfDirtyFlag(oTable, oToolbar);
			test.sap.ui.comp.personalization.Util.setDirtyFlag(oLabel, false);
		}, this);
		oSmartVariant.addPersonalizableControl(oPersInfo);
		oSmartVariant.initialise();
	};

	var oVariant1 = {
		columns: {
			columnsItems: [
				{
					columnKey: "Name",
					index: 0
				}, {
					columnKey: "Category",
					index: 1
				}, {
					columnKey: "Price",
					index: 3
				}, {
					columnKey: "Description",
					visible: true,
					index: 2
				}, {
					columnKey: "Quantity",
					visible: false
				}
			]
		},
		dimeasure: {
			//chartTypeKey: "line",
			dimeasureItems: [
				{
					columnKey: "Name",
					visible: true,
					role: "category",
					index: 0
				}, {
					columnKey: "Category",
					visible: true,
					role: "category",
					index: 1
				}, {
					columnKey: "Price",
					visible: true,
					role: "axis1",
					index: 2
				}
			]
		}
	};
	var oVariant2 = {
		sort: {
			sortItems: [
				{
					columnKey: "Category",
					operation: "Ascending"
				}, {
					columnKey: "Price",
					operation: "Ascending"
				}
			]
		}
	};
	var oVariant3 = {
		filter: {
			filterItems: [
				{
					columnKey: "Price",
					exclude: false,
					operation: "LT",
					value1: "100"
				}, {
					columnKey: "Price",
					exclude: false,
					operation: "GT",
					value1: "1000"
				}
			]
		}
	};

	var oVariant4 = {
		group: {
			groupItems: [
				{
					columnKey: "Category",
					operation: "Ascending"
				}, {
					columnKey: "Name",
					operation: "Ascending"
				}
			]
		}
	};

	var oVariant5 = {
		columns: {
			columnsItems: [
				{
					columnKey: "Name",
					index: 0
				}, {
					columnKey: "Category",
					index: 1
				}, {
					columnKey: "Price",
					index: 2
				}, {
					columnKey: "Date",
					visible: false
				}, {
					columnKey: "Quantity",
					visible: false
				}, {
					columnKey: "GUID",
					visible: true
				}
			]
		}
	};

	var aContent = [];
	jQuery.ajax({
		url: "../../../../../test-resources/sap/ui/comp/personalization/mockserver/ProductCollection.json",
		dataType: 'text',
		async: false,
		success: function(response, textStatus, xhr) {
			aContent = JSON.parse(response);
		},
		error: function(xhr, textStatus, error) {

		}
	});
	var gColumnKeys = [
		"ProductId", "Name", "Category", "SupplierName", "Description", "WeightMeasure", "WeightUnit", "Price", "CurrencyCode", "Status", "Quantity", "UoM", "Width", "Depth", "Height", "DimUnit", "Date", "Time", "GUID", "Bool"
	];
	var aPathOfSorter = [
		{
			path: "Name",
			order: "Ascending"
		}
	];
	var aPathOfFilterer = [
	/*{
		path: "Date",
		operation: sap.ui.model.FilterOperator.GT,
		value1: new Date(1397512800000),
		value2: ""
	}*/
	];
	var aPathOfIgnoredColumns = [
		"GUID"
	];
	var enumTypes = {
		String: "String",
		Number: "Number",
		Date: "Date",
		Time: "Time",
		Boolean: "Boolean"
	};
	var oJSONData = {
		oDataItems: aContent,
		cols: [
			{
				text: "ProductId",
				path: "ProductId",
				type: enumTypes.String
			}, {
				text: "Category",
				path: "Category",
				type: enumTypes.String
			}, {
				text: "Name",
				path: "Name",
				type: enumTypes.String
			}, {
				text: "Description",
				path: "Description",
				type: enumTypes.String
			}, {
				text: "SupplierName",
				path: "SupplierName",
				type: enumTypes.String
			}, {
				text: "Quantity",
				path: "Quantity",
				type: enumTypes.Number
			}, {
				text: "Unit Of Measure",
				path: "UoM",
				type: enumTypes.String			
			}, {
				text: "WeightMeasure",
				path: "WeightMeasure",
				type: enumTypes.Number
			}, {
				text: "WeightUnit",
				path: "WeightUnit",
				type: enumTypes.String
			}, {
				text: "Price",
				path: "Price",
				path2: "CurrencyCode",
				control: "ObjectNumber",
				type: enumTypes.Number
			}, {
				text: "Status",
				path: "Status",
				type: enumTypes.String
			}, {
				text: "CurrencyCode",
				path: "CurrencyCode",
				tableType: "UITable",
				type: enumTypes.String
			}, {
				text: "Width",
				path: "Width",
				type: enumTypes.Number
			}, {
				text: "Depth",
				path: "Depth",
				type: enumTypes.Number
			}, {
				text: "Height",
				path: "Height",
				type: enumTypes.Number
			}, {
				text: "DimUnit",
				path: "DimUnit",
				type: enumTypes.String
			}, {
				text: "Date",
				path: "Date",
				type: enumTypes.Date
			}, {
				text: "Time",
				path: "Time",
				type: enumTypes.Time
			}, {
				text: "GUID",
				path: "GUID",
				type: enumTypes.String
			}, {
				text: "Boolean",
				path: "Bool",
				type: enumTypes.Boolean
			}
		],
		pathOfVisibleCols: [
			"Name", "Category", "Price", "Quantity"
		],
		pathOfSorter: aPathOfSorter,
		pathOfFilterer: aPathOfFilterer
	};
	var oANAData = {
		metadataUrl: "../../../../../test-resources/sap/ui/comp/personalization/mockserver/metadata.xml",
		mockdataSettings: "../../../../../test-resources/sap/ui/comp/personalization/mockserver/",
		entitySet: "ProductCollection",
		pathOfSorter: aPathOfSorter,
		pathOfFilterer: aPathOfFilterer
	};

	// --------------------------------------------------------------------------------------------------------------
	// -------------------------- Layout ----------------------------------------------------------------------------
	// --------------------------------------------------------------------------------------------------------------				
	var that = this;
	var oCheckBoxPartionReset = new sap.m.CheckBox({
		text: "Variant Management",
		selected: true,
		select: function() {
			var oSmartVariant;
			var bVariantManagementEnabled = this.getSelected();
			oChartController.setResetToInitialTableState(!bVariantManagementEnabled);
			//oSmartChart._oPersController.setResetToInitialTableState(!bVariantManagementEnabled);
			oUIController.setResetToInitialTableState(!bVariantManagementEnabled);
			oMController.setResetToInitialTableState(!bVariantManagementEnabled);
			oANAController.setResetToInitialTableState(!bVariantManagementEnabled);
			/*oSmartVariant = sap.ui.getCore().byId(sap.ui.comp.personalization.PersonalizationDialog.getVariantManagementIdOfTable(oChart));
			oSmartVariant.setVisible(bVariantManagementEnabled);
			oSmartVariant = sap.ui.getCore().byId(sap.ui.comp.personalization.PersonalizationDialog.getVariantManagementIdOfTable(oUITable));
			oSmartVariant.setVisible(bVariantManagementEnabled);
			oSmartVariant = sap.ui.getCore().byId(sap.ui.comp.personalization.PersonalizationDialog.getVariantManagementIdOfTable(oMTable));
			oSmartVariant.setVisible(bVariantManagementEnabled);
			oSmartVariant = sap.ui.getCore().byId(sap.ui.comp.personalization.PersonalizationDialog.getVariantManagementIdOfTable(oANATable));
			oSmartVariant.setVisible(bVariantManagementEnabled);*/
		}
	});
	var oSetPersonalizationDataEmpty = new sap.m.Button({
		text: "Set Standard Variant ~ setPersonalizationData(<empty object>)",
		//tooltip: "setPersonalizationData() with empty object\n" + "columns: " + aPathOfVisibleCols.toString() + "\n" + "sort ascending: " + aPathOfSorter.toString(),
		press: function() {
			oChartController.setPersonalizationData({});
			//oSmartChart._oPersController.setPersonalizationData({});
			oMController.setPersonalizationData({});
			oANAController.setPersonalizationData({});
			oUIController.setPersonalizationData({});
		}
	});
	var oSetVariant1Button = new sap.m.Button({
		text: "Set 'Columns' Variant",
		tooltip: "columns: Name,Category,Price",
		press: function() {
			oChartController.setPersonalizationData(oVariant1);
			//oSmartChart._oPersController.setPersonalizationData(oVariant1);
			oMController.setPersonalizationData(oVariant1);
			oANAController.setPersonalizationData(oVariant1);
			oUIController.setPersonalizationData(oVariant1);
		}
	});
	var oSetVariant2Button = new sap.m.Button({
		text: "Set 'Sort' Variant",
		tooltip: "sort: Category ascending, Price ascending",
		press: function() {
			oChartController.setPersonalizationData(oVariant2);
			//oSmartChart._oPersController.setPersonalizationData(oVariant2);			
			oUIController.setPersonalizationData(oVariant2);
			oMController.setPersonalizationData(oVariant2);
			oANAController.setPersonalizationData(oVariant2);
		}
	});
	var oSetVariant3Button = new sap.m.Button({
		text: "Set 'Filter' Variant",
		tooltip: "filter: price < 100, price > 1000",
		press: function() {
			oChartController.setPersonalizationData(oVariant3);
			//oSmartChart._oPersController.setPersonalizationData(oVariant3);
			oMController.setPersonalizationData(oVariant3);
			oANAController.setPersonalizationData(oVariant3);
			oUIController.setPersonalizationData(oVariant3);
		}
	});
	var oSetVariant4Button = new sap.m.Button({
		text: "Set 'Group' Variant",
		tooltip: "group: Category ascending, Name ascending",
		press: function() {
			oChartController.setPersonalizationData(oVariant4);
			//oSmartChart._oPersController.setPersonalizationData(oVariant4);			
			oUIController.setPersonalizationData(oVariant4);
			oMController.setPersonalizationData(oVariant4);
			oANAController.setPersonalizationData(oVariant4);
		}
	});
	var oSetVariant5Button = new sap.m.Button({
		text: "Set Variant with 'ignoredColumn'",
		tooltip: "columns: Name,Category,Price (GUID is ignoredColumn)",
		press: function() {
			oChartController.setPersonalizationData(oVariant5);
			//oSmartChart._oPersController.setPersonalizationData(oVariant5);			
			oUIController.setPersonalizationData(oVariant5);
			oMController.setPersonalizationData(oVariant5);
			oANAController.setPersonalizationData(oVariant5);
		}
	});

	// --------------------------------------------------------------------------------------------------------------
	// -------------------------- sap.m.Table -----------------------------------------------------------------------
	// --------------------------------------------------------------------------------------------------------------
	bPerformanceOptimization = true;
	var oMTable = sap.ui.comp.personalization.PersonalizationDialog.createMTable("testMTable", oJSONData, bPerformanceOptimization, oCheckBoxPartionReset.getSelected(), function() {
		oMController.openDialog();
	}, function() {
		oMController.openDialog({
			sort: {
				visible: true
			}
		});
	}, function() {
		oMController.openDialog({
			filter: {
				visible: true
			}
		});
	}, function() {
		oMController.openDialog({
			columns: {
				visible: true
			}
		});
	}, function() {
		oMController.openDialog({
			group: {
				visible: true
			}
		});
	});
	var oMController = new sap.ui.comp.personalization.Controller({
		table: oMTable,
		resetToInitialTableState: !oCheckBoxPartionReset.getSelected(),
		columnKeys: bPerformanceOptimization ? gColumnKeys : undefined,
		requestColumns: bPerformanceOptimization ? jQuery.proxy(this.fHandleRequestColumns, this) : function() {
		},
		afterP13nModelDataChange: jQuery.proxy(this.fHandleAfterP13nModelDataChange, this),
		setting: {
			columns: {
				visible: true,
				ignoreColumnKeys: aPathOfIgnoredColumns,
				payload: {
					visibleItemsThreshold: 10
				}
			},
			sort: {
				visible: true
			//ignoreColumnKeys: aPathOfIgnoredColumns
			},
			filter: {
				visible: true,
				ignoreColumnKeys: aPathOfIgnoredColumns
			},
			group: {
				visible: true,
				ignoreColumnKeys: aPathOfIgnoredColumns
			}
		}
	});

	// --------------------------------------------------------------------------------------------------------------
	// -------------------------- sap.ui.table.Table -----------------------------------------------------------------------
	// --------------------------------------------------------------------------------------------------------------
	bPerformanceOptimization = true;
	var oUITable = sap.ui.comp.personalization.PersonalizationDialog.createUITable("testUITable", oJSONData, bPerformanceOptimization, oCheckBoxPartionReset.getSelected(), function() {
		oUIController.openDialog();
	}, function() {
		oUIController.openDialog({
			sort: {
				visible: true
			}
		});
	}, function() {
		oUIController.openDialog({
			filter: {
				visible: true
			}
		});
	}, function() {
		oUIController.openDialog({
			columns: {
				visible: true
			}
		});
	}, function() {
		oUIController.openDialog({
			group: {
				visible: true
			}
		});
	});
	var oUIController = new sap.ui.comp.personalization.Controller({
		table: oUITable,
		resetToInitialTableState: !oCheckBoxPartionReset.getSelected(),
		columnKeys: bPerformanceOptimization ? gColumnKeys : undefined,
		requestColumns: bPerformanceOptimization ? jQuery.proxy(this.fHandleRequestColumns, this) : function() {
		},
		afterP13nModelDataChange: jQuery.proxy(this.fHandleAfterP13nModelDataChange, this),
		setting: {
			columns: {
				visible: true,
				ignoreColumnKeys: aPathOfIgnoredColumns,
				payload: {
					visibleItemsThreshold: 10
				}
			},
			sort: {
				visible: true,
				ignoreColumnKeys: aPathOfIgnoredColumns
			},
			filter: {
				visible: true,
				ignoreColumnKeys: aPathOfIgnoredColumns
			},
			group: {
				visible: true,
				ignoreColumnKeys: aPathOfIgnoredColumns
			}
		}
	});

	// --------------------------------------------------------------------------------------------------------------
	// -------------------------- sap.ui.table.AnalyticalTable ------------------------------------------------------
	// --------------------------------------------------------------------------------------------------------------		
	bPerformanceOptimization = true;
	var oANATable = sap.ui.comp.personalization.PersonalizationDialog.createAnalyticalTable("testANATable", oANAData, bPerformanceOptimization, oCheckBoxPartionReset.getSelected(), function() {
		oANAController.openDialog();
	}, function() {
		oANAController.openDialog({
			sort: {
				visible: true
			}
		});
	}, function() {
		oANAController.openDialog({
			filter: {
				visible: true
			}
		});
	}, function() {
		oANAController.openDialog({
			columns: {
				visible: true
			}
		});
	}, function() {
		oANAController.openDialog({
			group: {
				visible: true
			}
		});
	});
	var oANAController = new sap.ui.comp.personalization.Controller({
		table: oANATable,
		resetToInitialTableState: !oCheckBoxPartionReset.getSelected(),
		columnKeys: bPerformanceOptimization ? gColumnKeys : undefined,
		requestColumns: bPerformanceOptimization ? jQuery.proxy(this.fHandleRequestColumns, this) : function() {
		},
		afterP13nModelDataChange: jQuery.proxy(this.fHandleAfterP13nModelDataChange, this),
		setting: {
			columns: {
				visible: true,
				ignoreColumnKeys: aPathOfIgnoredColumns,
				payload: {
					visibleItemsThreshold: 10
				}
			},
			sort: {
				visible: true,
				ignoreColumnKeys: aPathOfIgnoredColumns
			},
			filter: {
				visible: true,
				ignoreColumnKeys: aPathOfIgnoredColumns
			},
			group: {
				visible: true,
				ignoreColumnKeys: aPathOfIgnoredColumns
			}
		}
	});

	// --------------------------------------------------------------------------------------------------------------
	// -------------------------- sap.ui.comp.personalization.ChartWrapper ------------------------------------------
	// --------------------------------------------------------------------------------------------------------------	
	bPerformanceOptimization = false;
	var oChart = sap.ui.comp.personalization.PersonalizationDialog.createChart("testChart", oANAData, bPerformanceOptimization, oCheckBoxPartionReset.getSelected());
	var oChartToolbar = sap.ui.comp.personalization.PersonalizationDialog.createToolbar("sap.ui.table.Table", oCheckBoxPartionReset.getSelected() ? "testChart" : null, function() {
		oChartController.openDialog();
	}, function() {
		oChartController.openDialog({
			sort: {
				visible: true
			}
		});
	}, function() {
		oChartController.openDialog({
			filter: {
				visible: true
			}
		});
	}, function() {
		oChartController.openDialog({
			dimeasure: {
				visible: true
			}
		});
	}, null);
	var oChartController = new sap.ui.comp.personalization.Controller({
		table: sap.ui.comp.personalization.Util.createChartWrapper(oChart, oChart.data("NonDimeasures")),
		resetToInitialTableState: !oCheckBoxPartionReset.getSelected(),
		columnKeys: bPerformanceOptimization ? gColumnKeys : undefined,
		requestColumns: bPerformanceOptimization ? jQuery.proxy(this.fHandleRequestColumns, this) : function() {
		},
		afterP13nModelDataChange: jQuery.proxy(this.fHandleAfterP13nModelDataChange, this),
		setting: {
			dimeasure: {
				visible: true,
				payload: {
					// This is only relevant for release 1.34
					availableChartTypes: test.sap.ui.comp.personalization.Util.getAvailableChartTypes(oChart)
				}
			},
			sort: {
				visible: true,
				ignoreColumnKeys: aPathOfIgnoredColumns
			},
			filter: {
				visible: true,
				ignoreColumnKeys: aPathOfIgnoredColumns
			}
		}
	});

	// --------------------------------------------------------------------------------------------------------------
	// -------------------------- sap.ui.comp.smartchart.SmartChart ------------------------------------------
	// --------------------------------------------------------------------------------------------------------------	
	//var oSmartChart = sap.ui.comp.personalization.PersonalizationDialog.createSmartChart("testSmartChart", oANAData, oCheckBoxPartionReset.getSelected());

	// --------------------------------------------------------------------------------------------------------------
	// -------------------------- Application -----------------------------------------------------------------------
	// --------------------------------------------------------------------------------------------------------------					
	sap.ui.jsview("ViewName", {
		createContent: function() {
			return new sap.m.Page({
				title: "Personalization Dialog Controls",
				headerContent: [
					new sap.m.Toolbar({
						content: [
							new sap.m.CheckBox({
								text: "compact Mode",
								selected: true,
								select: function() {
									$("#myApp").toggleClass("sapUiSizeCompact");
								}
							}), oCheckBoxPartionReset
						]
					})
				],
				content: [
					new sap.m.Carousel({
						pages: [
							new sap.m.Page({
								headerContent: [
									new sap.m.Toolbar({
										width: "100%",
										content: [
											oSetPersonalizationDataEmpty, oSetVariant1Button, oSetVariant2Button, oSetVariant3Button, oSetVariant4Button, oSetVariant5Button
										]
									})
								],
								content: [
									new sap.m.Panel("IDChartPanel", {
										headerText: "sap.chart.Chart",
										expandable: true,
										expanded: true,
										content: [
											oChartToolbar, oChart
										]
									}),/* new sap.m.Panel("IDSmartChartPanel", {
																																																																																																																																																																																																																																		headerText: "sap.ui.comp.smartchart.SmartChart",
																																																																																																																																																																																																																																		expandable: true,
																																																																																																																																																																																																																																		expanded: true,
																																																																																																																																																																																																																																		content: [
																																																																																																																																																																																																																																			oSmartChart
																																																																																																																																																																																																																																		]
																																																																																																																																																																																																																																	}),*/
									new sap.m.Panel("IDMTablePanel", {
										headerText: "sap.m.Table",
										expandable: true,
										expanded: true,
										content: oMTable
									}), new sap.m.Panel("IDANATablePanel", {
										headerText: "sap.ui.table.AnalyticalTable",
										expandable: true,
										expanded: true,
										content: oANATable
									}), new sap.m.Panel("IDUITablePanel", {
										headerText: "sap.ui.table.Table (without performance optimization)",
										expandable: true,
										expanded: true,
										content: oUITable
									})
								]
							})
						]
					})
				]
			});
		}
	});

	sap.ui.core.UIComponent.extend("PersonalizationDialog.Component", {
		createContent: function() {
			var oApp = new sap.m.App("myApp");
			oApp.addPage(sap.ui.view({
				id: "IDView",
				viewName: "ViewName",
				type: sap.ui.core.mvc.ViewType.JS
			}));
			return oApp;
		}
	});

	var oComponentContainer = new sap.ui.core.ComponentContainer();
	oComponentContainer.setComponent(new PersonalizationDialog.Component());
	oComponentContainer.placeAt("body");

	fInitVariantManagement(sap.ui.getCore().byId("IDMTablePanel"), oMTable, null, oMController);
	fInitVariantManagement(sap.ui.getCore().byId("IDANATablePanel"), oANATable, null, oANAController);
	fInitVariantManagement(sap.ui.getCore().byId("IDUITablePanel"), oUITable, null, oUIController);
	fInitVariantManagement(sap.ui.getCore().byId("IDChartPanel"), oChart, oChartToolbar, oChartController);

	$(document).ready(function() {
		$("#myApp").toggleClass("sapUiSizeCompact");
	});
</script>
</head>
<body id="body" class="sapUiBody"></body>
</html>
