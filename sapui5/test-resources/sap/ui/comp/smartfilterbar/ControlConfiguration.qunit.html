<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<title>qUnit Page for sap.ui.comp.smartfilterbar.ControlConfiguration</title>

		<script id="sap-ui-bootstrap" 
			type="text/javascript"
			src="../../../../../resources/sap-ui-core.js"
			data-sap-ui-theme="sap_bluecrystal"
			data-sap-ui-noConflict="true"
			data-sap-ui-libs="sap.ui.comp">
		</script>

		<link rel="stylesheet" href="../../../../../resources/sap/ui/thirdparty/qunit.css" type="text/css" media="screen" />
		<script type="text/javascript" src="../../../../../resources/sap/ui/thirdparty/qunit.js"></script>
		<script type="text/javascript" src="../../../../../resources/sap/ui/qunit/qunit-junit.js"></script>
		<script type="text/javascript" src="../../../../../resources/sap/ui/qunit/QUnitUtils.js"></script>
		<script type="text/javascript" src="../../../../../resources/sap/ui/thirdparty/sinon.js"></script>

		<script language="javascript">
		
		if(!(sap.ui.Device.browser.internet_explorer && sap.ui.Device.browser.version <= 8)) {
      		jQuery.sap.require("sap.ui.qunit.qunit-coverage");
		} 		
						
		(function() {

			jQuery.sap.require("sap.ui.comp.smartfilterbar.ControlConfiguration");
			jQuery.sap.require("sap.ui.comp.smartfilterbar.SelectOption");
			jQuery.sap.require("sap.m.Input");
			
			module("sap.ui.comp.smartfilterbar.ControlConfiguration", {
				setup: function() {
					this.oControlConfiguration = new sap.ui.comp.smartfilterbar.ControlConfiguration();
					this.oControlConfiguration.setKey("CompanyCode");

				},
				teardown: function() {
				}
			});

			test("Shall be instantiable", function() {
				ok(this.oControlConfiguration);
			});

			test("Shall be configurable whether a ValueHelpialog is available", function() {
				//Call CUT
				this.oControlConfiguration.setHasValueHelpDialog(true);		
				
				strictEqual(this.oControlConfiguration.getHasValueHelpDialog(), true);
			});

			test("The hasValueHelpDialog shall be true by default", function() {
				var bHasValueHelpDialog;
				
				//Call CUT
				bHasValueHelpDialog = this.oControlConfiguration.getHasValueHelpDialog(true);		
				
				strictEqual(bHasValueHelpDialog, true);
			});


			test("It shall be configurable to which group a fields belongs", function() {
				//Call CUT
				this.oControlConfiguration.setGroupId("Address");		
				
				strictEqual(this.oControlConfiguration.getGroupId(), "Address");
			});

			test("The visibility of a field shall be configureable", function() {
				//Call CUT
				this.oControlConfiguration.setVisible(false);		
				
				strictEqual(this.oControlConfiguration.getVisible(), false);
			});

			test("A field shall be visible by default", function() {
				var bIsVisible;
				//Call CUT
				bIsVisible = this.oControlConfiguration.getVisible();		
				
				strictEqual(bIsVisible, true);
			});
			
			test("The mandatory state of a field shall be configureable", function() {
				//Call CUT
				this.oControlConfiguration.setMandatory(sap.ui.comp.smartfilterbar.ControlConfiguration.MANDATORY.mandatory);		
				
				strictEqual(this.oControlConfiguration.getMandatory(), sap.ui.comp.smartfilterbar.ControlConfiguration.MANDATORY.mandatory);
			});
			
			
			test("Shall raise an exception if the mandatory value is not valid", function() {
				var exception;
				
				//Call CUT
				try{
				this.oControlConfiguration.setMandatory("something invalid");
				} catch (e){
					exception = e;
				}

				ok(exception, "shall raise an exception");
			});
			
			test("A field shall have the default value auto for the mandatory property", function() {
				//Call CUT
				strictEqual(this.oControlConfiguration.getMandatory(), sap.ui.comp.smartfilterbar.ControlConfiguration.MANDATORY.auto);
			});

			test("The width of a field shall be configureable", function() {
				//Call CUT
				this.oControlConfiguration.setWidth('100px');		
				
				equal(this.oControlConfiguration.getWidth(), '100px');
			});

			test("A field shall have no width by default", function() {
				//Call CUT
				ok(!this.oControlConfiguration.getWidth());
			});
			
			test("The filter type shall be configurable", function() {
				//Call CUT
				this.oControlConfiguration.setFilterType(sap.ui.comp.smartfilterbar.ControlConfiguration.FILTERTYPE.single);		
				
				equal(this.oControlConfiguration.getFilterType(), sap.ui.comp.smartfilterbar.ControlConfiguration.FILTERTYPE.single);
			});

			test("Shall raise an exception if the filtertype is not valid", function() {
				var exception;
				
				//Call CUT
				try{
				this.oControlConfiguration.setFilterType("something invalid");
				} catch (e){
					exception = e;
				}

				ok(exception, "shall raise an exception");
			});

			
			test("The default filter type shall be auto", function() {
				var sFilterType;

				//Call CUT
				sFilterType = this.oControlConfiguration.getFilterType();

				equal(sFilterType, sap.ui.comp.smartfilterbar.ControlConfiguration.FILTERTYPE.auto );
			});



			test("The control type for a field shall be configureable", function() {		
				//Call CUT
				this.oControlConfiguration.setControlType(sap.ui.comp.smartfilterbar.ControlConfiguration.CONTROLTYPE.input);		

				equal(this.oControlConfiguration.getControlType(), sap.ui.comp.smartfilterbar.ControlConfiguration.CONTROLTYPE.input);
			});
			
			test("The default control type shall be auto", function() {
				var sControlType;

				//Call CUT
				sControlType = this.oControlConfiguration.getControlType();

				equal(sControlType, sap.ui.comp.smartfilterbar.ControlConfiguration.CONTROLTYPE.auto );
			});

			test("Shall raise an exception if the control type is not valid", function() {
				var exception;
				
				//Call CUT
				try{
				this.oControlConfiguration.setControlType("something invalid");
				} catch (e){
					exception = e;
				}

				ok(exception, "shall raise an exception");
			});
			
			
			test("The display behaviour for a field shall be configureable", function() {		
				this.oControlConfiguration.setDisplayBehaviour(sap.ui.comp.smartfilterbar.ControlConfiguration.DISPLAYBEHAVIOUR.descriptionOnly);		

				equal(this.oControlConfiguration.getDisplayBehaviour(), sap.ui.comp.smartfilterbar.ControlConfiguration.DISPLAYBEHAVIOUR.descriptionOnly);
			});
			
			test("The defaultdisplay behaviour shall be auto", function() {
				var sDisplayBehaviour;

				sDisplayBehaviour = this.oControlConfiguration.getDisplayBehaviour();

				equal(sDisplayBehaviour, sap.ui.comp.smartfilterbar.ControlConfiguration.DISPLAYBEHAVIOUR.auto);
			});

			test("Shall raise an exception if the display behaviour is not valid", function() {
				var exception;
				
				try{
				this.oControlConfiguration.setDisplayBehaviour("something invalid");
				} catch (e){
					exception = e;
				}

				ok(exception, "shall raise an exception");
			});

			
			test("The default filter values shall be configureable", function() {
				var oSelectOption, aDefaultValue;
				
				oSelectOption = new sap.ui.comp.smartfilterbar.SelectOption({sign: sap.ui.comp.smartfilterbar.SelectOption.SIGN.I,
					operator: sap.ui.comp.smartfilterbar.SelectOption.OPERATOR.EQ,
					low: "MC1234"});

				//Call CUT
				this.oControlConfiguration.addDefaultFilterValue(oSelectOption);

				aDefaultValue = this.oControlConfiguration.getDefaultFilterValues();
				equal(aDefaultValue.length, 1 );
				equal(aDefaultValue[0].getLow(), "MC1234");
			});	

			
			test("The index shall be configureable", function() {
				var iIndex;
				
				//Call CUT
				this.oControlConfiguration.setIndex(42);

				this.oControlConfiguration.getIndex();
				strictEqual(this.oControlConfiguration.getIndex(), 42);
			});	

			
			test("The default index shall be -1", function() {
				//Call CUT
				strictEqual(this.oControlConfiguration.getIndex(), -1);
			});	

			
			test("It shall be possible to inject an instance of a control, e.g. for custom fields", function() {
				var oControl;
				oControl = new sap.m.Input();
				
				//Call CUT
				this.oControlConfiguration.setCustomControl(oControl);

				ok(this.oControlConfiguration.getCustomControl() instanceof sap.m.Input, "Shall support a custom control");
			});	

			
			
			test("The hasTypeAhead flag shall be configureable", function() {
				var sLabel;
				
				//Call CUT
				this.oControlConfiguration.setHasTypeAhead(false);

				strictEqual(this.oControlConfiguration.getHasTypeAhead(), false);
			});	

			
			test("The default value of the hasTypeAhead flag shall be true", function() {
				//Call CUT
				strictEqual(this.oControlConfiguration.getHasTypeAhead(), true);
			});				

			
			test("Shall fire an event when the visible property gets changed", function() {
				var fEventHandler, sPropertyName;
				fEventHandler = function(oEvent){sPropertyName = oEvent.getParameter("propertyName");}				
				this.oControlConfiguration.attachChange(fEventHandler);
				
				//Call CUT
				this.oControlConfiguration.setVisible(false);
				
				equal(sPropertyName, "visible");
			});				
			
			
		}());

			
		</script>
	</head>
	<body id="body" class="sapUiBody">
		<h1 id="qunit-header">qUnit Page for sap.ui.comp.smartfilterbar.ControlConfiguration</h1>
		<h2 id="qunit-banner"></h2>
		<h2 id="qunit-userAgent"></h2>
		<ol id="qunit-tests"></ol>
		
		<div id="content"></div>
	</body>
</html>