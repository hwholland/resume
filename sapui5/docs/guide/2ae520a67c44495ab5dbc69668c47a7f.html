<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="abstract" content="The sap.ui.comp.filterbar.FilterBar control is used to provide a user-friendly interface for queries."/>
<meta name="description" content="The sap.ui.comp.filterbar.FilterBar control is used to provide a user-friendly interface for queries."/>

<link rel="stylesheet" type="text/css" href="css/prettify.css?x=6619686286314505"/>
<link rel="stylesheet" type="text/css" href="css/documentation.css?x=6619686286314505"/>
<title>Filter Bar</title>
  <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/themes/base/highlight-query-terms.css" />
    <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/js/google-code-prettify/prettify.css" />
    <script src="../../resources/sap/ui/demokit/js/sdk-pagehelper.js"></script>
  </head>
<body class="" id="loio2ae520a67c44495ab5dbc69668c47a7f">
<div id="wrapper"><div id="container">

	<h1 class="title topictitle1">Filter Bar</h1>

	
	<div class="body conbody"><p class="shortdesc">The <samp class="ph codeph">sap.ui.comp.filterbar.FilterBar</samp> control is used to provide a
		user-friendly interface for queries.</p>

		<div class="note caution"><span class="cautiontitle">Caution</span> 
                <p class="p">Controls in the <samp class="ph codeph">sap.ui.comp</samp> library (smart controls) focus
                    strongly on SAP Fiori elements.</p>

                <p class="p">We will continue to maintain the library and all of its controls in the future.
                    However, there will be no development of new features unless specifically
                    requested by SAP Fiori elements.</p>

            </div>

		<p class="p"><span class="ph">The frequently asked questions section below aims at answering some basic
				questions that you might have when using this control.</span></p>

		<p class="p"><span class="ph">For more
				information about this control, see the <a class="xref" href="../../docs/api/symbols/sap.ui.comp.filterbar.FilterBar.html" alt="../../docs/api/symbols/sap.ui.comp.filterbar.FilterBar.html" title="../../docs/api/symbols/sap.ui.comp.filterbar.FilterBar.html">API Reference</a> and the <a class="xref" target="_blank" href="../../explored.html#/entity/sap.ui.comp.filterbar.FilterBar/samples" alt="../../explored.html#/entity/sap.ui.comp.filterbar.FilterBar/samples" title="../../explored.html#/entity/sap.ui.comp.filterbar.FilterBar/samples">samples</a>.</span></p>

		<div class="section"><div class="section_title">Overview</div><div type="Overview">
			
			<p class="p">The <samp class="ph codeph">FilterBar</samp> control has been implemented as a toolbar with a
				collapsible filter area. Whereas the toolbar is always visible, the filter area can
				be hidden to reduce the space required.</p>

			<div class="note note"><span class="notetitle">Note</span> This applies to desktop use. On tablets, the filter area is always collapsed but
				can be expanded by the user. On phones, the filter area is not displayed at all. You
				can access the filters through the <samp class="ph codeph">Filters</samp> dialog.</div>

			<p class="p">The toolbar includes the <samp class="ph codeph">VariantManagement</samp> control and contains the
				following buttons:</p>

			<ul class="ul" id="loio2ae520a67c44495ab5dbc69668c47a7f__ul_cpp_d3t_xw">
				<li class="li"><span class="ph uicontrol">Hide Filter Bar</span> /<span class="ph uicontrol">Show Filter Bar
						</span><p class="p">Hides or displays the filter area.</p>
<div class="note note"><span class="notetitle">Note</span> This function is
						available for desktop use only.</div>
</li>

				<li class="li"><span class="ph uicontrol">Filters</span><p class="p">Lists the filters available and, if selected,
						displays the filter dialog.</p>
</li>

				<li class="li"><span class="ph uicontrol">Go</span><p class="p">Executes the query.</p>
<p class="p">A <samp class="ph codeph">Search</samp>
						event is raised, and the consuming control must respond to it. The
							<samp class="ph codeph">showGoButton</samp> property is set to <samp class="ph codeph">True</samp>
						by default and determines whether the button is visible.</p>
</li>

			</ul>

			<div class="note note"><span class="notetitle">Note</span> You can also deactivate the toolbar using the <samp class="ph codeph">useToolbar=false</samp>
				property setting. In this case the filter bar buttons are rendered in the filter
				area right behind the filters; on phones, right before the filters. The
					<span class="ph uicontrol">Filters</span> dialog is then called <span class="ph uicontrol">Adapt
					Filters</span> dialog.</div>

			<div class="note note"><span class="notetitle">Note</span> The <samp class="ph codeph">FilterBar</samp> control can be used on its own. However, we
				strongly recommend to use it in combination with the <samp class="ph codeph">SmartFilterBar</samp>
				control.</div>

		</div></div>

		<div class="section"><div class="section_title">Details</div><div type="Details"><div class="sectiondiv subsection">
				<p class="p subsectiontitle"><samp class="ph codeph">FilterItem</samp> and
					<samp class="ph codeph">FilterGroupItem</samp></p>

				<p class="p">Filters are similar to query parameters. A filter is represented either by a
						<samp class="ph codeph">FilterItem</samp> element or its specialization, the
						<samp class="ph codeph">FilterGroupItem</samp> element. They are populated via the
						<samp class="ph codeph">FilterItems</samp> or <samp class="ph codeph">FilterGroupItems</samp>
					aggregations. The main difference is that the <samp class="ph codeph">FilterGroupItem</samp>
					has the <samp class="ph codeph">group</samp> attribute. The <samp class="ph codeph">FilterItem</samp> is
					internally processed as a <samp class="ph codeph">FilterGroupItem</samp> that belongs to the
						<samp class="ph codeph">Basic</samp> group.</p>

				<p class="p">The embedding component of the <samp class="ph codeph">FilterBar</samp> control determines if a
					filter is mandatory and visible, defines its label, and whether the filter is
					visible in the filter area.</p>

			</div><div class="sectiondiv subsection">
				<p class="p subsectiontitle">Filters Dialog</p>

				<p class="p">The <span class="ph uicontrol">Filters</span> dialog provides all the functions that are available with
					the <samp class="ph codeph">FilterBar</samp> control. You can define which filter is visible
					in the filter bar and whether a filter is shown in the current view at all. You
					can also clear and restore values by selecting <span class="ph uicontrol">Clear</span> and
						<span class="ph uicontrol">Restore</span> and trigger the query execution.</p>

				<div class="note note"><span class="notetitle">Note</span> Some of the buttons are hidden and must be enabled first.</div>

				<p class="p">The information in this dialog is row-based. The first element is the
						<samp class="ph codeph">VariantManagement</samp> control, followed by the filters. The
					filters are organized in groups, each starting with a group title. For each
					filter, you can select the <span class="ph uicontrol">Add to Filter Bar</span> checkbox to
					make the filter visible in the filter bar.</p>

				<div class="note note"><span class="notetitle">Note</span> This function is available for desktop use only.</div>

				<div class="p">The filters of the <span class="ph uicontrol">Basic</span> group are always included in the current
					view. All other group filters are initially not assigned to the current view.
					You can assign filters other than the ones from the basic filter group by
					selecting the following for a specific group: <ul class="ul" id="loio2ae520a67c44495ab5dbc69668c47a7f__ul_tk3_vhb_dx">
						<li class="li">
							<p class="p"><span class="ph uicontrol">More Filters</span></p>

							<p class="p">Shows all filters of the relevant group that have not been assigned
								yet.</p>

						</li>

						<li class="li">
							<p class="p"><span class="ph uicontrol">Change Filters</span></p>

							<p class="p">Displayed if all filters of the relevant group have already been
								assigned.</p>

						</li>

					</ul>
 This takes you to the <span class="ph uicontrol">Select Filters</span> dialog where
					you can define which filters are included in the current view. This dialog
					displays all the filters of a group.</div>

				<div class="note note"><span class="notetitle">Note</span> The <span class="ph uicontrol">Select Filters</span> dialog is available on its own and
					can be used in other scenarios, for example, in the value help dialog.</div>

				<p class="p">Once filters have been included in the current view, they can also be added to the filter
					bar. A filter can only be removed from the current view if it is not visible in
					the filter bar.</p>

				<p class="p">Mandatory filters can only be removed from the filter bar if they have a value.
					As long as a mandatory filter does not have a value, it will be treated as added
					to the filter bar.</p>

				<p class="p">The buttons in the dialog offer the following functions:</p>

				<ul class="ul" id="loio2ae520a67c44495ab5dbc69668c47a7f__ul_f1g_bmt_xw">
					<li class="li"><span class="ph uicontrol">Save</span><p class="p">Represents the <span class="ph uicontrol">Save</span> function for the
								<samp class="ph codeph">VariantManagement</samp> control on the user
							interface.</p>
<p class="p">It either saves the current view or provides the
								<span class="ph uicontrol">Save</span> dialog for view management if a
								<span class="ph uicontrol">Save As</span> function is required.</p>
</li>

					<li class="li"><span class="ph uicontrol">Clear</span><p class="p">Clears all filters by raising the
								<samp class="ph codeph">Clear</samp> event.</p>
<p class="p">The
								<samp class="ph codeph">showClearButton</samp> property is set to
								<samp class="ph codeph">False</samp> by default and determines whether the button
							is visible.</p>
</li>

					<li class="li"><span class="ph uicontrol">Restore</span><p class="p">Reverts all changes of the current view by raising the
								<samp class="ph codeph">Reset</samp> event and applies the current view
							again.</p>
<p class="p">The <samp class="ph codeph">showRestoreButton</samp> property is set to
								<samp class="ph codeph">True</samp> by default and determines whether the button
							is visible.</p>
</li>

					<li class="li"><span class="ph uicontrol">Go</span><p class="p">Executes the query.</p>
<p class="p">The function of the
							button is the same as for the one in the filter bar. However, here the
							button is always visible.</p>
</li>

					<li class="li"><span class="ph uicontrol">Cancel</span><p class="p">Reverts all changes made by the user since
							the dialog was opened and closes the dialog.</p>
</li>

				</ul>

			</div></div></div>

		<div class="section"><div class="section_title">Integration with Value Help Dialog</div><div type="Integration with Value Help Dialog">
			
			<p class="p">The filter bar is also used in the <span class="ph uicontrol">Value Help</span> dialog
				scenarios. The filter bar property <samp class="ph codeph">advancedMode</samp> must be set to
					<samp class="ph codeph">true</samp> to enable this function.</p>

			<p class="p">The embedding component has to provide a search field using the
					<samp class="ph codeph">FilterItems</samp> aggregation and an advanced search using the
					<samp class="ph codeph">FilterGroupItems</samp> aggregation. For the search, the
					<samp class="ph codeph">Search</samp> event is raised.</p>

		</div></div>

		<div class="section"><div class="section_title">Integration with Smart Variant Management</div><div type="Integration with Smart Variant Management"><p class="p">A view represents a set of
				filters. Views are handled and represented on the user interface by the
					<samp class="ph codeph">VariantManagement</samp> control that is included in the toolbar of
				the <samp class="ph codeph">FilterBar</samp> control. Views are stored in a backend system and
				also retrieved from there.</p>
<p class="p">For views, the following services are
				available:</p>
<ul class="ul" id="loio2ae520a67c44495ab5dbc69668c47a7f__ul_jqk_zh5_fq">
				<li class="li">Shell service for personalization</li>

				<li class="li"><span class="ph"><span class="ph pname">SAPUI5</span></span> flexibility
					services</li>

			</ul>
<p class="p">They can be accessed using the <samp class="ph codeph">SmartVariantManagement</samp> or
					<samp class="ph codeph">SmartVariantManagementUI2</samp> control.</p>
<p class="p">For more information
				about the shell services, see the <a class="xref" href="../../docs/api/symbols/sap.ushell.services.Personalization.html" alt="../../docs/api/symbols/sap.ushell.services.Personalization.html" title="../../docs/api/symbols/sap.ushell.services.Personalization.html">API Reference</a> in the Demo Kit. For more
				information about flexibility services, see <a class="xref" href="a8e55aa2f8bc4127923b20685a6d1621.html" title="Modification-free, cost-saving, easy to use, and performant: Discover the new flexibility when adapting SAP Fiori UIs using SAPUI5 flexibility services.">SAPUI5 Flexibility Services: Adapting UIs Made Easy</a>.</p>
<p class="p">The consuming control
				that is using the <samp class="ph codeph">SmartVariantManagement</samp> control has to provide the
				following dedicated methods:</p>
<ul class="ul" id="loio2ae520a67c44495ab5dbc69668c47a7f__ul_efg_cq5_fq">
				<li class="li"><samp class="ph codeph">applyVariant</samp> (<samp class="ph codeph">oVariantContent</samp>)</li>

				<li class="li"><samp class="ph codeph">var oVariantContent</samp> = <samp class="ph codeph">fetchVariant</samp> ()</li>

			</ul>
<p class="p">The <samp class="ph codeph">fetchVariant</samp> has to return a JSON object. This is the
				information that is stored along with some administrative information, such as the
				name of the view and the ID. Once the view has been retrieved from the backend
				system and transferred to the consuming control, the <samp class="ph codeph">applyVariant</samp>
				is executed. During execution, the consuming control must know the format of
					<samp class="ph codeph">oVariantContent</samp>, since the control must also provide the method
				and react on it.</p>
<p class="p">The following table shows which controls are used by the
				filter bar controls to handle views:</p>

<div class="table-wrapper tablenoborder"><table summary="" id="loio2ae520a67c44495ab5dbc69668c47a7f__table_z1p_2vb_zw" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Controls for View Management Integration</span></caption>
<colgroup><col width="50%"/><col width="50%"/></colgroup>

					
					
					<thead class="thead" align="left">
						<tr class="row">
							<th class="entry" align="left" valign="top" width="50%" id="d2961424e467">
								<p class="p">Control</p>

							</th>

							<th class="entry" align="left" valign="top" width="50%" id="d2961424e473">
								<p class="p">Uses</p>

							</th>

						</tr>

					</thead>

					<tbody class="tbody">
						<tr class="row">
							<td class="entry" align="left" valign="top" width="50%" headers="d2961424e467 ">
								<p class="p"><samp class="ph codeph">FilterBar</samp></p>

							</td>

							<td class="entry" align="left" valign="top" width="50%" headers="d2961424e473 ">
								<p class="p"><samp class="ph codeph">SmartVariantManagementUI2</samp></p>

							</td>

						</tr>

						<tr class="row">
							<td class="entry" align="left" valign="top" width="50%" headers="d2961424e467 ">
								<p class="p"><samp class="ph codeph">SmartFilterBar</samp></p>

							</td>

							<td class="entry" align="left" valign="top" width="50%" headers="d2961424e473 ">
								<p class="p"><samp class="ph codeph">SmartVariantManagement</samp></p>

							</td>

						</tr>

					</tbody>

				</table>
</div>
<div class="sectiondiv subsection">
				<p class="p subsectiontitle">Shell Service for Personalization </p>

				<p class="p">The shell service for personalization is handled internally by the
						<samp class="ph codeph">FilterBar</samp> control. The basic view handling is implemented
					by the <samp class="ph codeph">SmartVariantManagementUI2</samp> control. It extends the
						<samp class="ph codeph">VariantManagement</samp> control. The shell service for
					personalization only supports end user personalization.</p>

				<p class="p">The consuming control of the <samp class="ph codeph">FilterBar</samp> has to provide two
					methods, one for fetching the data that must be stored as the content of the
					view, and one for applying this data, if the view is set. Both methods have to
					be registered using the corresponding methods of the <samp class="ph codeph">FilterBar</samp>
					control:</p>

				<ul class="ul" id="loio2ae520a67c44495ab5dbc69668c47a7f__ul_vxd_dmd_hq">
					<li class="li"><samp class="ph codeph">registerApplyData</samp> (<samp class="ph codeph">fApplyData</samp>) –
						interface: <samp class="ph codeph">fApplyData</samp>
						(<samp class="ph codeph">oVariantContent</samp>)</li>

					<li class="li"><samp class="ph codeph">registerFetchData</samp> (<samp class="ph codeph">fFetchData</samp>) –
						interface: <samp class="ph codeph">oVariantContent</samp> = <samp class="ph codeph">fFetchData</samp>
						()</li>

				</ul>

				<p class="p">A persistence key <samp class="ph codeph">setPersistencyKey</samp> (<samp class="ph codeph">sKey</samp>) must
					be provided as well. This key identifies the storage area and saves and
					retrieves the views currently used.</p>

				<p class="p">To trigger the retrieval of the views, the consuming control must register to the
						<samp class="ph codeph">Initialise</samp> event of the <samp class="ph codeph">FilterBar</samp> and call
					the <samp class="ph codeph">fireInitialise()</samp> method in the <samp class="ph codeph">FilterBar</samp>
					control. </p>

				<div class="note note"><span class="notetitle">Note</span> The retrieval of the initial views is done asynchronously. If the retrieval
					has been completed, the <samp class="ph codeph">SmartVariantManagementUI2</samp> control will
					be populated with the view information, and the event handler for the
						<samp class="ph codeph">Initialise</samp> event will be called.</div>

			</div><div class="sectiondiv subsection">
				<p class="p subsectiontitle"><span class="ph"><span class="ph pname">SAPUI5</span></span>
					Flexibility Services</p>

				<p class="p">Flexibility services are handled internally by the
						<samp class="ph codeph">SmartFilterBar</samp> control. The basic view handling is
					implemented by the <samp class="ph codeph">SmartVariantManagement</samp> control. It extends
					the <samp class="ph codeph">VariantManagement</samp> control. Flexibility services support end
					user personalization and also allow you to create and store views in the VENDOR
					layer of the layered repository.</p>

				<div class="note note"><span class="notetitle">Note</span> We recommend that you always use the <span class="ph"><span class="ph pname">SAPUI5</span></span> flexibility
					services rather than the shell service.</div>

			</div><div class="note note"><span class="notetitle">Note</span> You can also hide <samp class="ph codeph">VariantManagement</samp> if no
					<samp class="ph codeph">persistencyKey</samp> is provided. Also, you can separate the
					<samp class="ph codeph">VariantManagement</samp> control from the <samp class="ph codeph">FilterBar</samp>
				control by using the page variant of the <samp class="ph codeph">SmartVariantManagement</samp>
				control.</div>
</div></div>

		<div class="section"><div class="section_title">FAQ</div><div type="FAQ"><div class="sectiondiv subsection">
				<p class="p subsectiontitle">Question</p>

				<p class="p">How can I use <span class="ph"><span class="ph pname">SAPUI5</span></span>
					flexibility services in the <samp class="ph codeph">FilterBar</samp> control?</p>

			</div><div class="sectiondiv subsection collapsible">
				<p class="p subsectiontitle">Answer</p>

				<p class="p">In general, the <samp class="ph codeph">FilterBar</samp> control supports the shell service for
					personalization. The following steps describe how to enable the
						<samp class="ph codeph">FilterBar</samp> control to use the flexibility services provided
					the <samp class="ph codeph">FilterBar</samp> is already used and the consuming control
					supports the shell service via the <samp class="ph codeph">FilterBar</samp> control. If this
					is not the case, make sure the shell service is used as described above before
					you start.</p>

				<p class="p">After that, here is what you need to do:</p>

				<ol class="ol" id="loio2ae520a67c44495ab5dbc69668c47a7f__ol_zcf_thw_yw">
					<li class="li">Extend the <samp class="ph codeph">FilterBar</samp> to create a new
							<samp class="ph codeph">FilterBar</samp>
						control.<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-js">
sap.ui.comp.filterbar.FilterBar.extend(“my.ui5flex.FilterBar”) {..}</pre></div>
</li>

					<li class="li">Overwrite the internal <samp class="ph codeph">_initializeVariantManagement</samp>
						function of the <samp class="ph codeph">FilterBar</samp> control.
							<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-js">
my.ui5flex.FilterBar.prototype._initializeVariantManagement = function() {
      	if (this._oSmartVM &amp;&amp; this.getPersistencyKey()) {
            var oPersInfo = new sap.ui.comp.smartvariants.PersonalizableInfo({
		     type: "filterBar",
		     keyName: "persistencyKey"		
             });
	     oPersInfo.addControl(this);

	     this._oSmartVM.addPersonalizableControl(oPersInfo);					        
             sap.ui.comp.filterbar.FilterBar.prototype._initializeVariantManagement.apply(this, arguments);

	 } else {
		this.fireInitialise();
 }
    };
</pre></div>
<div class="note note"><span class="notetitle">Note</span> Here,
							the <samp class="ph codeph">_initializeVariantManagement</samp> function has to be
							called instead of the <samp class="ph codeph">fireInitialise()</samp> method, as
							mentioned before. The main purpose of this function is to register the
							extended <samp class="ph codeph">FilterBar</samp> control to the
								<samp class="ph codeph">VariantManagement</samp> control. Once the
								<samp class="ph codeph">VariantManagement</samp> control has been initialized, the
								<samp class="ph codeph">FilterBar</samp> control triggers the
								<samp class="ph codeph">fireInitialise()</samp> method call
						internally.</div>
</li>

					<li class="li">Overwrite the internal <samp class="ph codeph">_createVariantManagement</samp> function of
						the <samp class="ph codeph">FilterBar</samp>
						control.<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint lang-js">
my.ui5flex.FilterBar.prototype._createVariantManagement = function() {
         this._oSmartVM = new sap.ui.comp.smartvariants.SmartVariantManagement({
                	showExecuteOnSelection: true,
                	showShare: true
           	   });
                return this._oSmartVM;
};
</pre></div>
</li>

				</ol>

			</div></div></div>

		<div class="section"><div class="section_title">Further Communication between FilterBar, SmartFilterBar, and Consuming Control</div><div type="Further Communication between FilterBar, SmartFilterBar, and Consuming Control">
			
			<p class="p">The following is also valid for the <samp class="ph codeph">SmartFilterBar</samp> control: Before a view is
				saved, the <samp class="ph codeph">FilterBar</samp> control triggers the
					<samp class="ph codeph">beforeVariantSave</samp> event. This allows the consuming control to
				prepare for the <samp class="ph codeph">fetchData</samp> call, if required. Right after this event
				is raised, the <samp class="ph codeph">FilterBar</samp> control calls the method provided by the
					<samp class="ph codeph">registerFetchData</samp> method. If you select a view from the
					<samp class="ph codeph">VariantManagement</samp> control or the
					<samp class="ph codeph">SmartVariantManagement</samp> respectively after the
					<samp class="ph codeph">FilterBar</samp> has called the method provided by the
					<samp class="ph codeph">registerApplyData</samp> method, the <samp class="ph codeph">afterVariantLoad</samp>
				event is raised.</p>

			<div class="note note"><span class="notetitle">Note</span> The <samp class="ph codeph">afterVariantLoad</samp> event is also raised internally when you
				select <span class="ph uicontrol">Cancel</span> or <span class="ph uicontrol">Restore</span> in the
					<span class="ph uicontrol">Filters</span> dialog of the filter bar.</div>

		</div></div>

		<div class="section"><div class="section_title">Related Information</div><div type="Related Information">
			
			<p class="p"><a class="xref" href="7bcdffc056a94731b4341db73251e32b.html" title="The sap.ui.comp.smartfilterbar.SmartFilterBar control analyzes the $metadata document of an OData service and renders a FilterBar control that can be used to filter, for example, a table or a chart.">Smart Filter Bar</a></p>

			<p class="p"><a class="xref" href="06a4c3ac1cf545a7b51864e7f3aa02da.html" title="The sap.ui.comp.smartvariants.SmartVariantManagement control provides an interface to enable a simple integration of the VariantManagement control and access to the layered repository of the SAPUI5 flexibility services for easy communication.">Smart Variant Management</a></p>

		</div></div>

	</div>

</div></div>

</body>
</html>