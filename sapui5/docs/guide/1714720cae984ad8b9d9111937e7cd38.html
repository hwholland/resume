<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="abstract" content="An intuitive way of choosing filter values from an associated measure value. It supports line, bar, and donut chart types."/>
<meta name="description" content="An intuitive way of choosing filter values from an associated measure value. It supports line, bar, and donut chart types."/>

<link rel="stylesheet" type="text/css" href="css/prettify.css?x=19295592269584638"/>
<link rel="stylesheet" type="text/css" href="css/documentation.css?x=19295592269584638"/>
<title>Visual Filter Setup</title>
  <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/themes/base/highlight-query-terms.css" />
    <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/js/google-code-prettify/prettify.css" />
    <script src="../../resources/sap/ui/demokit/js/sdk-pagehelper.js"></script>
  </head>
<body class="" id="loio1714720cae984ad8b9d9111937e7cd38">
<div id="wrapper"><div id="container">

	<h1 class="title topictitle1">Visual Filter Setup</h1>

	
	<div class="body refbody"><p class="shortdesc">An intuitive way of choosing filter values from an associated measure value. It supports
		line, bar, and donut chart types.</p>

		<div class="section"><p class="p">Use visual filter to combine measures or item counts with filter values. Chart
				visualization increases the joy of use and the faster perception of relevant data.
				Selecting one or several chart data points allows quick analysis of the data set.
				For example, to choose the country with the highest sales, you can visualize the
				graphic and make a selection on it. The default view of visual filter bar is based
				on the filter fields defined in the <samp class="ph codeph">SelectionFields</samp> annotation for
				which a visual filter is defined.</p>
<p class="p">Configuring the property
					<samp class="ph codeph">sap:value-list=fixed-values</samp> in the
					<span class="ph filepath">annotation.xml</span> file to display visual filter values in a
				dropdown list. This allows users to select or de-select values that are not
				displayed on the chart. If dropdown is enabled, ensure the records available in the
				collection path entity set of visual filter and compact filter are same for smooth
				sync between visual filter and compact filter.</p>
<div class="sectiondiv imagemap-wrapper imagemap_sidebyside" id="loio1714720cae984ad8b9d9111937e7cd38__im_overall1">
				
				
				<div class="fig imagemap" id="loio1714720cae984ad8b9d9111937e7cd38____im_imagemap1"><img usemap="#d1471495e36" border="0" class="image" id="loio1714720cae984ad8b9d9111937e7cd38____im_image1" src="loio77f4724abbaa4f38a7df73150248e2a8_LowRes.png" width="474"/>
<map name="d1471495e36" id="d1471495e36">
<area href="1714720cae984ad8b9d9111937e7cd38.html#loio1714720cae984ad8b9d9111937e7cd38__subsection-im1" id="im1" alt="Value List" title="Value List" shape="rect" coords="258,100,469,144"/>
<area href="1714720cae984ad8b9d9111937e7cd38.html#loio1714720cae984ad8b9d9111937e7cd38__subsection-im2" id="im2" alt="Presentation Variant" title="Presentation Variant" shape="rect" coords="259,199,471,245"/>
<area href="1714720cae984ad8b9d9111937e7cd38.html#loio1714720cae984ad8b9d9111937e7cd38__subsection-im3" id="im3" alt="Chart Annotation" title="Chart Annotation" shape="rect" coords="258,300,470,343"/>
<area href="1714720cae984ad8b9d9111937e7cd38.html#loio1714720cae984ad8b9d9111937e7cd38__subsection-im4" id="im4" alt="Selection Fields" title="Selection Fields" shape="rect" coords="4,101,215,144"/>
</map></div>
				<div class="sectiondiv subsection visibility-trigger" id="subsection-im0">
					<h2 class="p subsectiontitle"/>
					<p class="p">Hover over each action for a description. Click the action for more
						information.</p>

				</div>
				<div class="sectiondiv subsection visibility-trigger" id="subsection-im1">
					<h2 class="p subsectiontitle">ValueList Annotation</h2>
					<p class="p">The following is an example of a value list annotation code snippet for
						configuring visual filters. For more information, see <cite class="cite">Defining
							Valuelist Annotation</cite>.</p>

					<div class="note sap-samplecodeblock samplecode"><span class="samplecodetitle">Sample Code</span> <samp class="ph codeph">ValueList</samp> Annotation
						Sample<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">&lt;Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm" Target="SEPMRA_SO_ANA.SEPMRA_C_ALP_SlsOrdItemCubeType/SalesOrderOverallStatus" Qualifier="VisualFilter"&gt;
  &lt;Annotation Term="Common.ValueList"&gt;
    &lt;Record&gt;
      &lt;PropertyValue Property="Label" String="Status"/&gt;
      &lt;PropertyValue Property="CollectionPath" String="SEPMRA_C_ALP_SlsOrdItemCube"/&gt;
      &lt;PropertyValue Property="SearchSupported" Bool="false"/&gt;
      &lt;PropertyValue Property="Parameters"&gt;
        &lt;Collection&gt;
            &lt;Record Type="Common.ValueListParameterInOut"&gt;
                  &lt;PropertyValue Property="LocalDataProperty" PropertyPath="SalesOrder"/&gt;
                  &lt;PropertyValue Property="ValueListProperty" String="SalesOrder"/&gt;
            &lt;/Record&gt;
            &lt;Record Type="Common.ValueListParameterInOut"&gt;
                  &lt;PropertyValue Property="LocalDataProperty" PropertyPath="MainProductCategory"/&gt;
                  &lt;PropertyValue Property="ValueListProperty" String="MainProductCategory"/&gt;
            &lt;/Record&gt;
            &lt;Record Type="Common.ValueListParameterInOut"&gt;
                  &lt;PropertyValue Property="LocalDataProperty" PropertyPath="SalesOrderOverallStatus"/&gt;
                  &lt;PropertyValue Property="ValueListProperty" String="SalesOrderOverallStatus"/&gt;
            &lt;/Record&gt;
            &lt;Record Type="Common.ValueListParameterInOut"&gt;
                  &lt;PropertyValue Property="LocalDataProperty" PropertyPath="Supplier"/&gt;
                  &lt;PropertyValue Property="ValueListProperty" String="Supplier"/&gt;
            &lt;/Record&gt;
        &lt;/Collection&gt;
      &lt;/PropertyValue&gt;
    &lt;PropertyValue Property="PresentationVariantQualifier" String="FilterNumberOfSalesOrdersByStatus"/&gt;
    &lt;/Record&gt;
  &lt;/Annotation&gt;
&lt;/Annotations&gt;</pre></div>
</div>

					<div class="note note"><span class="notetitle">Note</span> See Defining ValueList Annotation section for information on the IN/OUT
						mapping of visual filters.</div>

				</div>
				<div class="sectiondiv subsection visibility-trigger" id="subsection-im2">
					<h2 class="p subsectiontitle">PresentationVariantQualifier</h2>
					<div class="p">The <samp class="ph codeph">PresentationVariant</samp> qualifier provides chart definitions
						for visual filters. The visual filter picks up the first chart annotation in
						the <samp class="ph codeph">PresenationVariant</samp> annotation to render the chart. If
						the chart type is not a supported chart type, ALP renders a bar chart
						(default chart
						type).<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">&lt;Annotation Term="PresentationVariantQualifier" Qualifier="FilterNumberOfSalesOrdersByStatus"&gt;
  &lt;Record&gt;
    &lt;PropertyValue Property="Text" String="Filter: Number of Sales Ordery by Status"/&gt;
    &lt;PropertyValue Property="SortOrder"&gt;
      &lt;Collection&gt;
        &lt;Record Type="Common.SortOrderType"&gt;
           &lt;PropertyValue Property="Property" PropertyPath="NumberOfSalesOrders"/&gt;
           &lt;PropertyValue Property="Descending" Bool="true"/&gt;
        &lt;/Record&gt;
      &lt;/Collection&gt;
           &lt;/PropertyValue&gt;
           &lt;PropertyValue Property="Visualizations"&gt;
             &lt;Collection&gt;
               &lt;AnnotationPath&gt;@UI.Chart#FilterNumberOfSalesOrdersByStatus&lt;/AnnotationPath&gt;
             &lt;/Collection&gt;
           &lt;/PropertyValue&gt;
  &lt;/Record&gt;
&lt;/Annotation&gt;</pre></div>
</div>

				</div>
				<div class="sectiondiv subsection visibility-trigger" id="subsection-im3">
					<h2 class="p subsectiontitle">Chart Annotation</h2>
					<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">&lt;Annotation Term="UI.Chart" Qualifier="FilterNumberOfSalesOrdersByStatus"&gt;
  &lt;Record Type="UI.ChartDefinitionType"&gt;
     &lt;PropertyValue Property="Title" String="Sales Orders by Status"/&gt;
     &lt;PropertyValue Property="Description" String="Number of Sales Orders by Status"/&gt;
     &lt;PropertyValue Property="ChartType" EnumMember="UI.ChartType/Donut"/&gt;
     &lt;PropertyValue Property="Dimensions"&gt;
       &lt;Collection&gt;
          &lt;PropertyPath&gt;SalesOrderOverallStatus&lt;/PropertyPath&gt;
       &lt;/Collection&gt;
     &lt;/PropertyValue&gt;
     &lt;PropertyValue Property="DimensionAttributes"&gt;
       &lt;Collection&gt;
         &lt;Record Type="UI.ChartDimensionAttributeType"&gt;
            &lt;PropertyValue Property="Dimension" PropertyPath="SalesOrderOverallStatus"/&gt;
            &lt;PropertyValue Property="Role" EnumMember="UI.ChartDimensionRoleType/Category"/&gt;
         &lt;/Record&gt;
       &lt;/Collection&gt;
      &lt;/PropertyValue&gt;
      &lt;PropertyValue Property="Measures"&gt;
       &lt;Collection&gt;
          &lt;PropertyPath&gt;NumberOfSalesOrders&lt;/PropertyPath&gt;
       &lt;/Collection&gt;
      &lt;/PropertyValue&gt;
      &lt;PropertyValue Property="MeasureAttributes"&gt;
        &lt;Collection&gt;
          &lt;Record Type="UI.ChartMeasureAttributeType"&gt;
              &lt;PropertyValue Property="Measure" PropertyPath="NumberOfSalesOrders"/&gt;
              &lt;PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1"/&gt;
              &lt;PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#NumberOfSalesOrders"/&gt;
           &lt;/Record&gt;
         &lt;/Collection&gt;
       &lt;/PropertyValue&gt;
  &lt;/Record&gt;
&lt;/Annotation&gt;</pre></div>

					<p class="p"><span class="ph emphasis emphasis">Chart Type</span></p>

					<div class="p">The selection of chart data points and segments is possible in a chart type.
						These selections influence the other chart filters depending on the
						configuration of the value list annotation.
<div class="table-wrapper tablenoborder"><table summary="" id="loio1714720cae984ad8b9d9111937e7cd38__table_ufw_dxg_3z" class="table" frame="border" border="1" rules="all">
<colgroup><col width="50%"/><col width="50%"/></colgroup>

								
								
								<thead class="thead" align="left">
									<tr class="row">
										<th class="entry" valign="top" width="50%" id="d1471495e171">
											<p class="p">The Chart Type…</p>

										</th>

										<th class="entry" valign="top" width="50%" id="d1471495e177">
											<p class="p">Displays…</p>

										</th>

									</tr>

								</thead>

								<tbody class="tbody">
									<tr class="row">
										<td class="entry" valign="top" width="50%" headers="d1471495e171 ">
											<p class="p">Bar</p>

										</td>

										<td class="entry" valign="top" width="50%" headers="d1471495e177 ">
											<p class="p">Top or bottom three records</p>

										</td>

									</tr>

									<tr class="row">
										<td class="entry" valign="top" width="50%" headers="d1471495e171 ">
											<p class="p">Line</p>

										</td>

										<td class="entry" valign="top" width="50%" headers="d1471495e177 ">
											<p class="p">First or last six data points</p>

										</td>

									</tr>

									<tr class="row">
										<td class="entry" valign="top" width="50%" headers="d1471495e171 ">
											<p class="p">Donut</p>

										</td>

										<td class="entry" valign="top" width="50%" headers="d1471495e177 ">
											<p class="p">Top or bottom two records</p>

										</td>

									</tr>

								</tbody>

							</table>
</div>
</div>

					<p class="p"><span class="ph emphasis emphasis">Chart Title</span></p>

					<p class="p">ALP displays chart titles in the following order: &lt;Measure Name&gt; by
						&lt;Dimension Name&gt; in &lt;Scale factor&gt; &lt;UoM&gt;</p>

					<ul class="ul" id="loio1714720cae984ad8b9d9111937e7cd38__ul_wwg_lw4_wx">
						<li class="li">&lt;Measure Name&gt; indicates the measure associated with the chart.
							Use <samp class="ph codeph">sap:label()</samp>
						</li>

						<li class="li">&lt;Dimension Name&gt; indicates the dimension associated with the
							chart. Use <samp class="ph codeph">sap:label()</samp></li>

						<li class="li">&lt;Scale Factor&gt; indicates the scale as specified using the
								<samp class="ph codeph">ScaleFactor</samp> property of the
								<samp class="ph codeph">DataPoint</samp> annotation associated with the measure
							displayed in the
							chart.<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">&lt;Annotation Term="com.sap.vocabularies.UI.v1.Chart" Qualifier="qualifier1"&gt;
		&lt;Record Type="UI.ChartDefinitionType"&gt;
        			&lt;PropertyValue Property="Title" String="My Chart" /&gt;
		        &lt;PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column" /&gt;
		&lt;PropertyValue Property="Measures"&gt;
			&lt;Collection&gt;
				&lt;PropertyPath&gt;ActualCosts&lt;/PropertyPath&gt;
			&lt;/Collection&gt;
		&lt;/PropertyValue&gt;
		&lt;PropertyValue Property="Dimensions"&gt;
			&lt;Collection&gt;
				&lt;PropertyPath&gt;CostElement&lt;/PropertyPath&gt;
			&lt;/Collection&gt;
		&lt;/PropertyValue&gt;
		&lt;PropertyValue Property=”MeasureAttributes”&gt;                          
			&lt;Collection&gt;
		       &lt;Record Type="UI.ChartMeasureAttributeType"&gt;
                 	&lt;PropertyValue Property="Measure" PropertyPath="ActualCost"/&gt;
		             &lt;PropertyValue Property="DataPoint"&gt;
                 		&lt;AnnotationPath&gt;@UI.DataPoint#Qualifier1&lt;/AnnotationPath&gt;
		             &lt;/PropertyValue&gt;
                 	&lt;PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" /&gt;
		        &lt;/Record&gt;
				&lt;/Collection&gt;
		        &lt;/PropertyValue&gt;
		        &lt;PropertyValue Property="DimensionAttributes"&gt;
		            ....
			   	 ....
			   	 ....
	    &lt;/Record&gt;
&lt;/Annotation&gt;
</pre></div>
</li>

					</ul>

					<div class="note note"><span class="notetitle">Note</span> The scale factor in chart and chart title are of same scale.</div>

				</div>
				<div class="sectiondiv subsection visibility-trigger" id="subsection-im4">
					<h2 class="p subsectiontitle">Annotation: SelectionFields</h2>
					<p class="p">Define the <samp class="ph codeph">SelectionFields</samp> annotation to sort the order of
						fields displayed in the visual filters. If there are any mandatory filter
						fields that are not specified in the <samp class="ph codeph">SelectionFields</samp>, then
						these fields appear first, followed by the other entries in the
							<samp class="ph codeph">SelectionFields</samp>.</p>

					<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">&lt;Annotation Term="UI.SelectionFields"&gt;
  &lt;Collection&gt;
    &lt;PropertyPath&gt;DeliveryCalendarYear&lt;/PropertyPath&gt;
    &lt;PropertyPath&gt;SoldToParty&lt;/PropertyPath&gt;
    &lt;PropertyPath&gt;Product&lt;/PropertyPath&gt;
    &lt;PropertyPath&gt;MainProductCategory&lt;/PropertyPath&gt;
    &lt;PropertyPath&gt;DeliveryCalendarQuarter&lt;/PropertyPath&gt;
  &lt;/Collection&gt;
&lt;/Annotation&gt;</pre></div>

				</div>
				<div class="sectiondiv subsection">
					<h2 class="p subsectiontitle">Text Arrangement</h2>
					<div class="p">You can now change the formatting of text that appear on the visual filter
						chart axis labels, legends, chart tooltip, and within the selected link (if
						chart context is selected). Configure the <samp class="ph codeph">TextArrangement</samp>
						annotation and its type in the main entity set to change the text behavior
						as follows:
<div class="table-wrapper tablenoborder"><table summary="" id="loio1714720cae984ad8b9d9111937e7cd38__table_zyg_kb4_wbb" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"/></caption>
<colgroup><col width="50%"/><col width="50%"/></colgroup>

								
								
								<thead class="thead" align="left">
									<tr class="row">
										<th class="entry" valign="top" width="50%" id="d1471495e317">
											<p class="p">Text Arrangement Type</p>

										</th>

										<th class="entry" valign="top" width="50%" id="d1471495e323">
											<p class="p">Description</p>

										</th>

									</tr>

								</thead>

								<tbody class="tbody">
									<tr class="row">
										<td class="entry" valign="top" width="50%" headers="d1471495e317 ">
											<p class="p">TextFirst</p>

										</td>

										<td class="entry" valign="top" width="50%" headers="d1471495e323 ">
											<p class="p">Is the default type that has sap:text first followed
												by ID within brackets. For example, "Notebook
												(001)"</p>

										</td>

									</tr>

									<tr class="row">
										<td class="entry" valign="top" width="50%" headers="d1471495e317 ">
											<p class="p">TextLast</p>

										</td>

										<td class="entry" valign="top" width="50%" headers="d1471495e323 ">
											<p class="p">ID followed by sap:text within brackets. For example,
												"001(Notebook)".</p>

										</td>

									</tr>

									<tr class="row">
										<td class="entry" valign="top" width="50%" headers="d1471495e317 ">
											<p class="p">TextOnly</p>

										</td>

										<td class="entry" valign="top" width="50%" headers="d1471495e323 ">
											<p class="p">Shows only sap:text. For example, "Notebook"</p>

										</td>

									</tr>

									<tr class="row">
										<td class="entry" valign="top" width="50%" headers="d1471495e317 ">
											<p class="p">TextSeparate</p>

										</td>

										<td class="entry" valign="top" width="50%" headers="d1471495e323 ">
											<p class="p">Show only ID . For example, "002"</p>

										</td>

									</tr>

								</tbody>

							</table>
</div>
<div class="note sap-samplecodeblock samplecode"><span class="samplecodetitle">Sample Code</span> Text Arrangement
							Annotation<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">&lt;Annotations Target="ProductType"&gt; //Main EntitySet
  &lt;Annotation Term="com.sap.vocabularies.UI.v1.TextArrangement" EnumMember="com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst"/&gt; 
&lt;/Annotations&gt;</pre></div>
</div>
</div>

				</div>
			</div></div>

		<div class="section">
			<p class="p"><span class="ph emphasis emphasis">Unit of Measure with Multiple Currencies</span></p>

			<p class="p">Visual filter charts do not show up if the backend returns data with multiple Unit of
				Measure (UoM). To achieve a single UoM, set the required UoM in the filter bar, or
				normalizing all the UoM into one UoM in the backend. </p>

			<p class="p">For currency based visual filter values, the currency value could come from another filter
				field in the main entity set (mapped to the value help currency field based entity
				set through the standard IN mapping). If this kind of mapping exists with an empty
				filter field in the main entity set, ALP defaults the value set through the
				DisplayCurrency field in the incoming navigation context (see note below on
				DisplayCurrency) for filtering the value help entity set to render the visual filter
				chart.</p>

			<p class="p">If there exists a parameter in the main entity set with exact technical name
					<samp class="ph codeph">P_DisplayCurrency</samp>, the value is derived from the incoming
					<samp class="ph codeph">DisplayCurrency</samp> field of the incoming navigation context.</p>

			<div class="p">
				<div class="note note"><span class="notetitle">Note</span> User preference for display currency type is stored in the SAP Fiori Launchpad
					user setting and this value is passed by applications in the
						<samp class="ph codeph">DisplayCurrency</samp> field.</div>

			</div>

			<div class="p">The visual filter includes only the first measure and dimension from the first chart
				annotation within the specified <samp class="ph codeph">PresentationVariantQualifier</samp>.
				Ensure that the dimension that you specify in chart and in the
					<samp class="ph codeph">ValueListProperty</samp> of the <samp class="ph codeph">OUT</samp> parameter is
				same. You can also define a <samp class="ph codeph">SortOrder</samp> property in the
					<samp class="ph codeph">PresentationVariant</samp> annotation to control the sort order based
				on a sort field.<div class="note note"><span class="notetitle">Note</span> Sorting in visual filter is based on the following logic:<ul class="ul" id="loio1714720cae984ad8b9d9111937e7cd38__ul_sfn_fxk_sbb">
						<li class="li">For bar and donut chart types sorting is always based on the measure
							displayed (By default, desending order). To change the sort order
							property, define SortOrder property in the PresentationVariant
							annotation.</li>

						<li class="li">For line chart with time based dimension sorting is always based on the
							dimension displayed in ascending order, however, last six time periods
							are displayed.</li>

						<li class="li">For line chart with non time based dimension, sorting is always based on
							the dimension (By default. ascending order). To change the sort order
							property, define SortOrder property in the PresentationVariant
							annotation.</li>

					</ul>
</div>
</div>

		</div>

		<div class="section" id="loio1714720cae984ad8b9d9111937e7cd38__section_t4s_pll_x1b"><div class="section_title">Semantic Coloring for Visual Filter Measure Values</div><div type="Semantic Coloring for Visual Filter Measure Values">
			
			<div class="p">Semantic coloring is based on the defined:<ul class="ul" id="loio1714720cae984ad8b9d9111937e7cd38__ul_arc_rll_x1b">
					<li class="li">
						<p class="p">Criticality in DataPoint annotation. The value specified, or the value
							returned from a path determines the color</p>

					</li>

					<li class="li">
						<p class="p">CriticalityCalculation in DataPoint annotation, along with improvement
							direction and various threshold values. This is applicable only when
							criticality is not defined.</p>

					</li>

				</ul>
</div>

			<p class="p"><img class="image" id="loio1714720cae984ad8b9d9111937e7cd38__image_ttv_rn4_wbb" src="loioa477ee8a509a43faaf108e706efc5a7c_LowRes.png"/></p>

			<div class="p">
				<div class="note note"><span class="notetitle">Note</span> 
					<div class="p">No color is applied to the chart measure when<ul class="ul" id="loio1714720cae984ad8b9d9111937e7cd38__ul_ozw_tll_x1b">
							<li class="li">
								<p class="p">A neutral value is returned</p>

							</li>

							<li class="li">
								<p class="p">There is not enough threshold values defined, or when the
									improvement direction is missing</p>

							</li>

						</ul>
</div>

				</div>

			</div>

		</div></div>

	</div>

<div class="related-links"> 
<div class="relinfo"><div class="relinfotitle ">Related Information</div>
<div><a class="link" href="33f3d807c10b47d9a8141692d2619dc2.html" title="The section following the title area is the filter area. Set up filters to achieve the required search results in the main content area.">Configuring the Filter Area</a></div>
</div>
</div>
</div></div>

</body>
</html>