/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
(function(){'use strict';var s,v;function _(S){var d=[];d.push(new sap.ui.model.Sorter(S.property,S.descending));s.oTableRepresentation.getBinding("items").sort(d);}function a(d,S){var e=d.sort(function(p,f){return S.descending?f[S.property]-p[S.property]:p[S.property]-f[S.property];});return e;}function b(S,d){s.oApi.updatePath(function(o,e){if(o===s.oApi.getActiveStep()){var f=a(s.aDataResponse,S);s.oTableRepresentation.getModel().setData({tableData:f});d();}});}function c(C){var S={};var S=v.getSelectedSortItem();var i=v.getSortDescending();if(s.orderby&&s.orderby.length){S={property:s.orderby[0].property};i=!s.orderby[0].ascending;v.setSelectedSortItem(S.property);}if(S===null){S=v.getSortItems()[0];i=false;}v.setSelectedSortItem(S);v.setSortDescending(i);}sap.ui.controller("sap.apf.ui.reuse.controller.viewSetting",{onInit:function(){var C=this;v=C.getView().getContent()[0];s=C.getView().getViewData();c(C);},handleConfirmForSort:function(e){s.oTableRepresentation.getParent().getParent().setBusy(true);var S={property:e.getParameters().sortItem.getKey(),descending:e.getParameters().sortDescending};if(e.getParameters().sortItem){if(s.oParameter.isAlternateRepresentation){_(S);s.oTableRepresentation.getParent().getParent().setBusy(false);}else{b(S,function(){s.oTableRepresentation.getParent().getParent().setBusy(false);});}}}});}());
