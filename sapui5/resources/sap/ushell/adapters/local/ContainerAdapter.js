// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.adapters.local.ContainerAdapter");jQuery.sap.require("sap.ushell.User");jQuery.sap.require("sap.ushell.utils");sap.ushell.adapters.local.ContainerAdapter=function(s,p,a){var A,u,U,k;A=jQuery.sap.getObject("config",0,a);u={id:"DEFAULT_USER",firstName:"Default",lastName:"User",fullName:"Default User",accessibility:false,isJamActive:false,language:sap.ui.getCore().getConfiguration().getLanguage()||"en",bootTheme:{theme:"sap_bluecrystal",root:""},themeRoot:"/sap/public/bc/themes/",setAccessibilityPermitted:true,setThemePermitted:true,trackUsageAnalytics:null};for(k in A){if(A.hasOwnProperty(k)){u[k]=A[k];}}this.getSystem=function(){return s;};this.getUser=function(){return U;};this.load=function(){var b,c,o,d,D=new jQuery.Deferred();if(A&&typeof A.setUserCallback==="string"){d=new jQuery.Deferred();b=A.setUserCallback.split(".");c=b.pop();if(b.length===0){o=window;}else{o=jQuery.sap.getObject(b.join("."));}if(o&&typeof o[c]==="function"){o[c](d);}else{throw new sap.ushell.utils.Error("ContainerAdapter local platform: Cannot execute setUserCallback - "+A.setUserCallback);}d.done(function(e){["id","firstName","lastName","fullName"].forEach(function(v){if(e[v]&&typeof A.setUserCallback!=="function"){u[v]=e[v];}});U=new sap.ushell.User(u);D.resolve();});}else{U=new sap.ushell.User(u);D.resolve();}return D.promise();};this.logout=function(l){jQuery.sap.log.info("Demo system logged out: "+s.getAlias(),null,"sap.ushell.adapters.local.ContainerAdapter");sap.ushell.utils.reload();return(new jQuery.Deferred()).resolve().promise();};};}());
