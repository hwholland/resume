// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";jQuery.sap.declare("sap.ushell.adapters.local.AppStateAdapter");jQuery.sap.require("sap.ushell.services.Personalization");sap.ushell.adapters.local.AppStateAdapter=function(s,p,c){this._oConfig=c&&c.config;};sap.ushell.adapters.local.AppStateAdapter.prototype._getPersonalizationService=function(){return sap.ushell.Container.getService("Personalization");};sap.ushell.adapters.local.AppStateAdapter.prototype.saveAppState=function(k,s,v,a,c){var p=this._getPersonalizationService(),d=new jQuery.Deferred();p.createEmptyContainer(k,{keyCategory:p.constants.keyCategory.GENERATED_KEY,writeFrequency:p.constants.writeFrequency.HIGH,clientStorageAllowed:false}).done(function(C){C.setItemValue("appStateData",v);C.save().done(function(){d.resolve();}).fail(function(m){d.reject(m);jQuery.sap.log.error(m);});}).fail(function(m){jQuery.sap.log.error(m);d.reject(m);});return d.promise();};sap.ushell.adapters.local.AppStateAdapter.prototype.loadAppState=function(k){var p=this._getPersonalizationService(),d=new jQuery.Deferred();p.getContainer(k,{keyCategory:p.constants.keyCategory.GENERATED_KEY,writeFrequency:p.constants.writeFrequency.HIGH,clientStorageAllowed:false}).done(function(c){var v=c.getItemValue("appStateData");d.resolve(k,v);}).fail(function(m){jQuery.sap.log.error(m);d.reject(m);});return d.promise();};}());
