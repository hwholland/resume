(function(){"use strict";jQuery.sap.require('sap.ushell.renderers.fiori2.search.SearchHelper');var s=sap.ushell.renderers.fiori2.search.SearchHelper;sap.m.List.extend('sap.ushell.renderers.fiori2.search.controls.SearchResultList',{renderer:'sap.m.ListRenderer',onAfterRenderingParent:sap.m.List.prototype.onAfterRendering,onAfterRendering:function(){var t=this;t.onAfterRenderingParent();var m=sap.ushell.renderers.fiori2.search.getModelSingleton();var a=m.getProperty("/multiSelectionEnabled");if(a){t.enableSelectionMode(false);}t._prepareResizeHandler();t.collectListItemsForNavigation();},collectListItemsForNavigation:function(){var t=this;var m=t.getItems();if(m.length===0){return;}var d=function(){t._doCollectListItemsForNavigation();};for(var i=0;i<m.length;i++){var M=m[i];if(M.hasStyleClass("sapUshellSearchResultListItemApps")){var c=M.getContent();if(c.length>0){c[0].addEventDelegate({onAfterRendering:d});}}}t._doCollectListItemsForNavigation();},_doCollectListItemsForNavigation:function(){var t=this;var f=t.getDomRef();if(!f){return;}var I=t.getItemNavigation();if(!I){t._startItemNavigation();I=t.getItemNavigation();}if(!I){return;}t._bItemNavigationInvalidated=false;var r=f.getElementsByTagName("li");var d=[];for(var i=0;i<r.length;i++){var R=r[i];if($(R).hasClass("sapUshellSearchResultListItemApps")){var T=R.getElementsByClassName("sapUshellSearchTileWrapper");for(var j=0;j<T.length;j++){var a=s.getFocusableTileDomRef(T[j]);if(!a||$(a).is(":hidden")){continue;}d.push(a);}$(R).removeAttr("tabindex");$(R).removeAttr("role");}else if($(R).hasClass("sapUshellSearchResultListFooter")){var S=R.getElementsByClassName("sapUshellResultListMoreFooter");for(var k=0;k<S.length;k++){d.push(S[k]);}}else if($(R).hasClass("sapUshellSearchResultListItem")){d.push(R);}}if(d.length>0){var b=$(d[0]).closest("ul");var c=b.length>0?b[0]:d[0].parentElement;I.setRootDomRef(c);}I.setItemDomRefs(d);I.setCycling(false);I.setPageSize(10);},_prepareResizeHandler:function(){var t=this;var r=[768,1151];var w=function(){var b=window.innerWidth;if(b<r[0]){return 0;}for(var i=0;i<r.length-1;i++){if(b>=r[i]&&b<r[i+1]){return i+1;}}return r.length;};var l=w();var a=function(e){var c=w();if(c!=l){l=c;var m=t.getItems();for(var i=0;i<m.length;i++){var M=m[i];if(M.getContent()&&M.getContent().length>0&&M.getContent()[0].showOrHideExpandButton){M.getContent()[0].showOrHideExpandButton();}}}};$(window).on("resize",a);},enableSelectionMode:function(a){var t=this;a=a===undefined?true:a;var b=$(t.getDomRef());if(!a){b.addClass("sapUshellSearchResultList-ShowMultiSelection");return;}var c=200;var d=b.find(".sapUshellSearchResultListItem-CheckboxExpandContainer");var e=b.find(".sapUshellSearchResultListItem-Attributes");var f=parseFloat(e.css("padding-left"));var g=d.find(".sapUshellSearchResultListItem-CheckboxContainer");var h=g.width();if(!b.hasClass("sapUshellSearchResultList-ShowMultiSelection")){d.css("width","0");d.css("opacity","0");e.css("padding-left",f);b.addClass("sapUshellSearchResultList-ShowMultiSelection");var n=f+h;d.animate({"width":h,"opacity":1},c,function(){$(this).css("width","");$(this).css("opacity","");});e.animate({"padding-left":n},c,function(){$(this).css("padding-left","");});}},disableSelectionMode:function(a){var t=this;a=a===undefined?true:a;var b=$(t.getDomRef());if(!a){b.removeClass("sapUshellSearchResultList-ShowMultiSelection");return;}var c=200;var d=b.find(".sapUshellSearchResultListItem-CheckboxExpandContainer");var e=b.find(".sapUshellSearchResultListItem-Attributes");var f=parseFloat(e.css("padding-left"));var g=d.find(".sapUshellSearchResultListItem-CheckboxContainer");var h=g.width();if(b.hasClass("sapUshellSearchResultList-ShowMultiSelection")){var n=f-h;var i=d.animate({"width":0,"opacity":0},c).promise();var j=e.animate({"padding-left":n},c).promise();jQuery.when(i,j).done(function(){b.removeClass("sapUshellSearchResultList-ShowMultiSelection");d.css("width","");d.css("opacity","");e.css("padding-left","");});}}});})();
