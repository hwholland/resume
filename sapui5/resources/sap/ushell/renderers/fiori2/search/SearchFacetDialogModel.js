(function(g){"use strict";jQuery.sap.require('sap.ushell.renderers.fiori2.search.SearchModel');sap.ushell.renderers.fiori2.search.SearchModel.extend("sap.ushell.renderers.fiori2.search.SearchFacetDialogModel",{constructor:function(){var t=this;sap.ushell.renderers.fiori2.search.SearchModel.prototype.constructor.apply(t,[]);t.aAllowedAccessUsage=["AutoFacet"];t.facetQuery=t.sina.createPerspectiveQuery({templateFactsheet:true});t.chartQuery=t.sina.createChartQuery();t.aFilters=[];},prepareFacetList:function(){var t=this;var m=t.getDataSource().getMetaDataSync();t.setProperty('/facetDialog',t.oFacetFormatter.getDialogFacetsFromMetaData(m,t));},facetDialogSingleCall:function(p){var t=this;t.chartQuery.setDataSource(t.getDataSource());t.chartQuery.setSkip(0);t.chartQuery.setTop(1);t.chartQuery.dimensions=[];t.chartQuery.addDimension(p.sAttribute);return t.chartQuery.getResultSet().then(function(r){var f=t.oFacetFormatter.getDialogFacetsFromChartQuery(r,t);t.setProperty(p.sBindingPath+"/items",f.items);});},resetFacetQueryFilterConditions:function(){var t=this;t.facetQuery.resetFilterConditions();},resetChartQueryFilterConditions:function(){var t=this;t.chartQuery.resetFilterConditions();},hasFilterCondition:function(f){var t=this;for(var i=0;i<t.aFilters.length;i++){if(t.aFilters[i].filterCondition.equals&&t.aFilters[i].filterCondition.equals(f)){return true;}}return false;},hasFilter:function(i){var t=this;var f=i.filterCondition;return t.hasFilterCondition(f);},addFilter:function(i){var t=this;if(!t.hasFilter(i)){t.aFilters.push(i);}},removeFilter:function(a){var t=this;var f=a.filterCondition;for(var i=0;i<t.aFilters.length;i++){if(t.aFilters[i].filterCondition.equals&&t.aFilters[i].filterCondition.equals(f)){t.aFilters.splice(i,1);return;}}},changeFilterAdvaced:function(a,A){var t=this;var f=a.filterCondition;for(var i=0;i<t.aFilters.length;i++){if(t.aFilters[i].filterCondition.equals&&t.aFilters[i].filterCondition.equals(f)){t.aFilters[i].advanced=A;return;}}}});})(window);
