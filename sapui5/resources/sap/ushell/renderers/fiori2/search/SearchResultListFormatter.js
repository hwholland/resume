(function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchResultListFormatter');var m=sap.ushell.renderers.fiori2.search.SearchResultListFormatter=function(){this.init.apply(this,arguments);};m.prototype={init:function(){},format:function(s,t){return this._doFormat(s.getElements(),t);},_getImageUrl:function(r){var i={imageUrl:'',name:''};for(var p in r){var a=r[p];var b=false;try{if(a.value&&(a.$$MetaData$$.presentationUsage.indexOf('Image')>=0||a.$$MetaData$$.presentationUsage.indexOf('Thumbnail')>=0)){b=true;}}catch(e){}if(!b){continue;}i.imageUrl=a.value;i.name=p;return i;}return i;},_moveWhyFound2ResponseAttr:function(w,p){var l=w.length;while(l--){if(w[l].labelRaw===p.labelRaw&&p!==undefined){p.value=w[l].value;p.whyfound=true;w.splice(l,1);}}},_appendRemainingWhyfounds2FormattedResultItem:function(w,i){var l=w.length;while(l--){if(w[l].labelRaw!==undefined){var I={};I.name=w[l].label;I.value=w[l].value;I.whyfound=true;i.push(I);w.splice(l,1);}}},_doFormat:function(r,t){var s=function(a,b){return a.displayOrder-b.displayOrder;};var f=[];for(var i=0;i<r.length;i++){var c=r[i];var u='';var d=c.$$RelatedActions$$;for(var e in d){if(d[e].type==="Navigation"){u=encodeURI(d[e].uri);}}var w=c.$$WhyFound$$||[];var g=[];var h=[];var j='';var k={};for(var p in c){if(!c[p].label||!c[p].$$MetaData$$){continue;}var l=c[p].$$MetaData$$.presentationUsage||[];if(l&&l.length>0){if(l.indexOf("Title")>-1&&c[p].value){this._moveWhyFound2ResponseAttr(w,c[p]);j=j+" "+c[p].value;}if(l.indexOf("Summary")>-1){g.push({property:p,displayOrder:c[p].$$MetaData$$.displayOrder});}else if(l.indexOf("Detail")>-1){h.push({property:p,displayOrder:c[p].$$MetaData$$.displayOrder});}}var n=c[p].$$MetaData$$.semanticObjectType;if(n&&n.length>0){k[n]=c[p].valueRaw;}}g.sort(s);h.sort(s);var o=g.concat(h);var q={};q.key=c.key;q.keystatus=c.keystatus;q.semanticObjectTypeAttrs=k;var v=this._getImageUrl(c);q.imageUrl=v.imageUrl;q.dataSourceName=c.$$DataSourceMetaData$$.label;q.dataSource=c.$$DataSourceMetaData$$;q.uri=u;q.titleUriIsIntent=false;q.semanticObjectType=c.$$DataSourceMetaData$$.semanticObjectType||"";q.$$Name$$='';q.systemId=c.$$DataSourceMetaData$$.systemId||"";q.client=c.$$DataSourceMetaData$$.client||"";var I=[];for(var z=0;z<o.length;z++){var x=o[z].property;var y={};if(x!==v.name){this._moveWhyFound2ResponseAttr(w,c[x]);y.name=c[x].label;y.value=c[x].value;y.key=x;y.isTitle=false;y.attributeIndex=z;if(c[x].whyfound){y.whyfound=c[x].whyfound;}I.push(y);}}I.unshift({name:q.dataSourceName,value:j.trim(),key:"DATASOURCE_AS_KEY",isTitle:true,uri:q.uri,isTableTitle:true});q.$$Name$$=j.trim();q.numberofattributes=o.length;q.title=c.title;q.itemattributes=I;q.selected=q.selected||false;q.expanded=q.expanded||false;this._appendRemainingWhyfounds2FormattedResultItem(w,q.itemattributes);f.push(q);}return f;}};})();
