// Copyright (c) 2009-2014 SAP SE, All Rights Reserved
(function(){"use strict";sap.ui.jsview("sap.ushell.renderers.fiori2.meArea.MeArea",{createContent:function(c){jQuery.sap.require('sap.m.Button');jQuery.sap.require('sap.m.OverflowToolbar');jQuery.sap.require('sap.ushell.resources');this.addStyleClass('sapUshellMeAreaView');var u=sap.ushell.Container.getUser().getFullName();var U=new sap.m.VBox({items:[new sap.m.Text({text:u}).addStyleClass('sapUshellMeAreaUserName'),new sap.m.Button({type:sap.m.ButtonType.Unstyled,icon:'sap-icon://log',text:sap.ushell.resources.i18n.getText("logoutBtn_title"),tooltip:sap.ushell.resources.i18n.getText("logoutBtn_tooltip"),press:[c.logout,c]}).addStyleClass("sapUshellLogoutButton")]}).addStyleClass("sapUshellUserArea");var a=sap.ushell.Container.getUser().getImage(),b;if(!a){b=new sap.ui.core.Icon({src:sap.ui.core.IconPool.getIconURI("person-placeholder"),size:'4rem'});}else{b=new sap.m.Image({src:a,width:'4rem',height:'4rem'});}b.addStyleClass("sapUshellMeAreaUserImage");var o=new sap.m.HBox({items:[b,U]});o.addStyleClass('sapUshellMeAreaUserInfo');o.addStyleClass('sapContrastPlus');var A=new sap.m.OverflowToolbar({id:"overflowActions",design:sap.m.ToolbarDesign.Transparent,content:{path:"/currentState/actions",factory:function(i,C){var h=sap.ui.getCore().byId(C.getObject());if(h&&h.setActionType){h.setActionType("action");c._addPressHandlerToActions(h);}return h;}}}).addStyleClass('sapContrastPlus');if(A._getOverflowButton){var d=A._getOverflowButton();if(d){var e=d.onAfterRendering;d.onAfterRendering=function(){if(e){e.apply(this,arguments);}this.addStyleClass('sapUshellActionItem');this.setText(sap.ushell.resources.i18n.getText('meAreaMoreActions'));};}}A.updateAggregation=function(n){var B=this.mBindingInfos[n],h=this.getMetadata().getJSONKeys()[n],C;jQuery.each(this[h._sGetter](),jQuery.proxy(function(i,v){this[h._sRemoveMutator](v);},this));jQuery.each(B.binding.getContexts(),jQuery.proxy(function(i,v){C=B.factory(this.getId()+"-"+i,v)?B.factory(this.getId()+"-"+i,v).setBindingContext(v,B.model):"";this[h._sMutator](C);},this));};jQuery.sap.require('sap.m.StandardListItem');var f=new sap.m.StandardListItem({title:"{meAreaModel>title}",description:{path:"meAreaModel>appType",formatter:function(s){return sap.ushell.services.AppType.getDisplayName(s);}},icon:"{meAreaModel>icon}",type:sap.m.ListType.Active,info:"{meAreaModel>timestamp}"});f.addStyleClass('sapUshellMeAreaActivityItem');var I=new sap.m.IconTabBar('meAreaIconTabBar',{backgroundDesign:sap.m.BackgroundDesign.Transparent,expandable:false,items:[new sap.m.IconTabFilter({text:sap.ushell.resources.i18n.getText("recentActivities"),content:new sap.m.List({items:{path:"meAreaModel>/apps/recentActivities",template:f},itemPress:function(E){var m=this.getModel('meAreaModel'),v=sap.ui.getCore().byId("viewPortContainer");if(v){v.switchState("Center");}var p=E.getParameter('listItem').getBindingContextPath();setTimeout(function(){hasher.setHash(m.getProperty(p).url);},200);}})})]}).addStyleClass('sapUshellMeAreaTabBar');var g=I.onAfterRendering;I.onAfterRendering=function(){if(g){g.apply(this,arguments);}var t=sap.ui.getCore().byId('meAreaIconTabBar--header');if(t){t.addStyleClass('sapContrastPlus');}};this.actionBox=A;return new sap.m.ScrollContainer({vertical:true,horizontal:false,height:"100%",content:new sap.m.VBox({items:[o,A,I]})});},onViewStateShow:function(){this.getController().refreshUserActivities();this.actionBox.updateAggregation("content");},getControllerName:function(){return"sap.ushell.renderers.fiori2.meArea.MeArea";}});}());
