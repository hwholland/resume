/*!
 * ${copyright}
 */
sap.ui.define(['jquery.sap.global','sap/ushell/library','sap/m/FlexBox','sap/m/List'],function(q){"use strict";var S=sap.ui.core.Control.extend("sap.ushell.ui.shell.ShellNavigationMenu",{metadata:{properties:{},aggregations:{items:{type:"sap.m.ListItem",group:"Misc",defaultValue:null,singularName:"item"},miniTiles:{type:"sap.ushell.ui.shell.NavigationMiniTile",group:"Misc",defaultValue:null,singularName:"miniTile"}},events:{}},renderer:{render:function(r,c){r.write('<div  tabindex="0" ');r.writeControlData(c);r.write('>');r.write('<div  tabindex="0" id="hierarchyItems" >');r.renderControl(c.oItemsList);r.write('</div>');var m=c.getMiniTiles();if(m&&m.length>0){r.renderControl(c.oTextTabBar);}r.write('</div>');}}});var K=function(m){this.init(m);};K.prototype.init=function(m){this.keyCodes=q.sap.KeyCodes;this.jqElement=m.$();this.jqElement.on('keydown.keyboardNavigation',this.keydownHandler.bind(this));};K.prototype.destroy=function(){if(this.jqElement){this.jqElement.off(".keyboardNavigation");}delete this.jqElement;};K.prototype.keydownHandler=function(e){switch(e.keyCode){case this.keyCodes.ARROW_UP:this.upDownHandler(e,true);break;case this.keyCodes.ARROW_DOWN:this.upDownHandler(e,false);break;case this.keyCodes.ARROW_LEFT:this.leftRightHandler(e,false);break;case this.keyCodes.ARROW_RIGHT:this.leftRightHandler(e,true);break;case this.keyCodes.HOME:this.homeEndHandler(e,true);break;case this.keyCodes.END:this.homeEndHandler(e,false);break;case this.keyCodes.PAGE_UP:this.pageUpDownHandler(e,true);break;case this.keyCodes.PAGE_DOWN:this.pageUpDownHandler(e,false);break;default:break;}};K.prototype.pageUpDownHandler=function(e,i){var j=q(document.activeElement);if(!j.hasClass("sapUshellNavMiniTile")){return false;}};K.prototype.upDownHandler=function(e,i){var j=q(document.activeElement);if(!j.hasClass("sapUshellNavMiniTile")){return false;}var a=j.parent().parent();var c=j.parent().index();var b=a.children();var n;if(i){n=c-3;if(n<0){n+=9;}}else{n=(c+3)%b.length;}var d=b[n].children[0];this._swapItemsFocus(e,j,d);};K.prototype.leftRightHandler=function(e,i){var n=i?"next":"prev";var j=q(document.activeElement);if(!j.hasClass("sapUshellNavMiniTile")){return false;}var a=j.parent()[n]();var b=a.children();if(!b.length){return false;}this._swapItemsFocus(e,j,b);};K.prototype.homeEndHandler=function(e,i){var n=i?"first":"last";var j=q(document.activeElement);if(!j.hasClass("sapUshellNavMiniTile")){return false;}e.preventDefault();var a=this.jqElement.find(".sapUshellNavMiniTile")[n]();this._swapItemsFocus(e,j,a);};K.prototype._swapItemsFocus=function(e,j,a){e.preventDefault();a.focus();};S.prototype.init=function(){this.oItemsList=new sap.m.List("sapUshellNavHierarchyItems");this.oMiniTilesBox=new sap.m.FlexBox("sapUshellNavRelatedAppsFlexBox");};S.prototype._beforeOpen=function(){if(!this.bInitialized){this.oMiniTilesTab=new sap.m.IconTabFilter("sapUshellNavRelatedAppsTabFilter",{text:sap.ushell.resources.i18n.getText("shellNavMenu_relatedApps"),content:[this.oMiniTilesBox]});this.oTextTabBar=new sap.m.IconTabBar("sapUshellNavMenuTabBar",{expanded:true,expandable:false,items:[this.oMiniTilesTab]});this.bInitialized=true;}};S.prototype._afterOpen=function(){if(sap.ui.Device.system.desktop){if(this.keyboardNavigation){this.keyboardNavigation.destroy();}this.keyboardNavigation=new K(this.oMiniTilesBox);}};S.prototype.getMiniTiles=function(){return this.oMiniTilesBox.getItems();};S.prototype.insertMiniTile=function(m,i){this.oMiniTilesBox.insertItem(m,i);return this;};S.prototype.addMiniTile=function(m){if(this.oMiniTilesBox.getItems().length<9){this.oMiniTilesBox.addItem(m);}else{q.sap.log.warning("ShellNavigationMenu.addMiniTile - miniTiles aggregation is already at maximum size of 9 elements "+"- current item was not added.");}return this;};S.prototype.removeMiniTile=function(i){this.oMiniTilesBox.removeItem(i);return this;};S.prototype.removeAllMiniTiles=function(){this.oMiniTilesBox.removeAllItems();return this;};S.prototype.destroyMiniTiles=function(){this.oMiniTilesBox.destroyItems();return this;};S.prototype.indexOfMiniTile=function(m){return this.oMiniTilesBox.indexOfItem(m);};S.prototype.getItems=function(){return this.oItemsList.getItems();};S.prototype.insertItem=function(h,i){this.oItemsList.insertItem(h,i);return this;};S.prototype.addItem=function(h){this.oItemsList.addItem(h);return this;};S.prototype.removeItem=function(i){this.oItemsList.removeItem(i);return this;};S.prototype.removeAllItems=function(){this.oItemsList.removeAllItems();return this;};S.prototype.destroyItems=function(){this.oItemsList.destroyItems();return this;};S.prototype.indexOfItem=function(h){return this.oItemsList.indexOfItem(h);};S.prototype.exit=function(){this.oItemsList.destroy();this.oMiniTilesBox.destroy();if(this.bInitialized){this.oMiniTilesTab.destroy();this.oTextTabBar.destroy();}if(this.keyboardNavigation){this.keyboardNavigation.destroy();}};return S;},true);
