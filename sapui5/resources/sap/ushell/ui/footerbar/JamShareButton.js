/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
jQuery.sap.declare("sap.ushell.ui.footerbar.JamShareButton");jQuery.sap.require("sap.ushell.library");jQuery.sap.require("sap.m.Button");sap.m.Button.extend("sap.ushell.ui.footerbar.JamShareButton",{metadata:{library:"sap.ushell",properties:{"beforePressHandler":{type:"any",group:"Misc",defaultValue:null},"afterPressHandler":{type:"any",group:"Misc",defaultValue:null},"jamData":{type:"object",group:"Misc",defaultValue:null}}}});(function(){"use strict";jQuery.sap.declare("sap.ushell.ui.footerbar.JamShareButton");jQuery.sap.require("sap.ushell.resources");sap.ushell.ui.footerbar.JamShareButton.prototype.init=function(){jQuery.sap.require("sap.ushell.services.Container");var t=this;this.setEnabled();this.setIcon('sap-icon://share-2');this.setText(sap.ushell.resources.i18n.getText("shareBtn"));this.attachPress(function(){if(t.getBeforePressHandler()){t.getBeforePressHandler()();}this.showShareDialog(t.getAfterPressHandler());});if(sap.m.Button.prototype.init){sap.m.Button.prototype.init.apply(this,arguments);}};sap.ushell.ui.footerbar.JamShareButton.prototype.showShareDialog=function(c){jQuery.sap.require('sap.collaboration.components.fiori.sharing.dialog.Component');if(!this.shareComponent){this.shareComponent=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog"});}this.shareComponent.setSettings(this.getJamData());this.shareComponent.open();if(c){c();}};sap.ushell.ui.footerbar.JamShareButton.prototype.exit=function(){if(this.shareComponent){this.shareComponent.destroy();}if(sap.m.Button.prototype.exit){sap.m.Button.prototype.exit.apply(this,arguments);}};sap.ushell.ui.footerbar.JamShareButton.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){jQuery.sap.log.warning("Disabling JamShareButton: unified shell container not initialized",null,"sap.ushell.ui.footerbar.JamShareButton");}e=false;}else{var u=sap.ushell.Container.getUser();if(!(u&&u.isJamActive())){if(this.getEnabled()){jQuery.sap.log.info("Disabling JamShareButton: user not logged in or Jam not active",null,"sap.ushell.ui.footerbar.JamShareButton");}e=false;this.setVisible(false);}}sap.m.Button.prototype.setEnabled.call(this,e);};}());
