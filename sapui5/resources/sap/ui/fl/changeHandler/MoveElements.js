/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2014-2016 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","./Base","sap/ui/fl/Utils"],function(q,B,U){"use strict";var M={};M.CHANGE_TYPE="moveElements";M.applyChange=function(c,s,p){var C=c.getContent();var m=p.modifier;var v=p.view;var a=p.appComponent;var S=c.getSelector().aggregation;if(!S){throw new Error("No source aggregation supplied via selector for move");}if(!C.target||!C.target.selector){throw new Error("No target supplied for move");}var t=m.bySelector(C.target.selector.id,a,v);if(!t){throw new Error("Move target parent not found");}var T=C.target.selector.aggregation;if(!T){throw new Error("No target aggregation supplied for move");}if(!C.movedElements){throw new Error("No moveElements supplied");}C.movedElements.forEach(function(b){var o=m.bySelector(b.selector.id,a,v);if(!o){throw new Error("Unknown element with id '"+b.selector.id+"' in moveElements supplied");}if(typeof b.targetIndex!=="number"){throw new Error("Missing targetIndex for element with id '"+b.selector.id+"' in moveElements supplied");}m.removeAggregation(s,S,o,v);m.insertAggregation(t,T,o,b.targetIndex);});return true;};M.completeChangeContent=function(c,s,p){var m=p.modifier;var S=this.getSpecificChangeInfo(m,s);var C=c.getDefinition();C.changeType=M.CHANGE_TYPE;C.selector=S.source;C.content={movedElements:[],target:{selector:S.target}};S.movedElements.forEach(function(e){var E=e.element||m.bySelector(e.id);C.content.movedElements.push({selector:{id:E.getId(),type:m.getControlType(E)},sourceIndex:e.sourceIndex,targetIndex:e.targetIndex});});};M.getSpecificChangeInfo=function(m,s){var S=s.source.parent||m.bySelector(s.source.id);var t=s.target.parent||m.bySelector(s.target.id);var a=s.source.aggregation;var T=s.target.aggregation;var b={source:{id:S.getId(),aggregation:a,type:m.getControlType(S)},target:{id:t.getId(),aggregation:T,type:m.getControlType(t)},movedElements:s.movedElements};return b;};return M;},true);
